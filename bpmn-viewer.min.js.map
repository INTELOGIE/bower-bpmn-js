{"version":3,"file":"bpmn-viewer.min.js","sources":["bpmn-viewer.js"],"names":["e","exports","module","define","amd","f","window","global","self","BpmnJS","t","n","r","s","o","u","a","require","i","Error","call","length",1,"_dereq_","initListeners","diagram","listeners","events","get","forEach","l","on","event","handler","checkValidationError","err","pattern","match","exec","message","Viewer","options","this","parent","container","$","addClass","css","position","appendTo","_","logoData","bottom","right","zIndex","attr","Diagram","BpmnModdle","Importer","prototype","importXML","xml","done","moddle","createModdle","fromXML","definitions","importDefinitions","saveXML","toXML","saveSVG","canvas","contentNode","getLayer","defsNode","_paper","select","contents","innerSVG","defs","outerSVG","bbox","getBBox","svg","width","height","x","y","name","invoke","fn","clear","_createDiagram","_init","importBpmnDiagram","__listeners","modules","concat","getModules","additionalModules","unshift","bpmnjs","omit","extend","_modules","destroy","push","./core","./import/Importer","bpmn-moddle","diagram-js","diagram-js/lib/features/overlays","diagram-js/lib/features/selection",2,"__depends__","../draw","../import",3,"BpmnRenderer","styles","pathMap","addMarker","id","element","markers","marker","initMarkers","paper","createMarker","attrs","fill","strokeWidth","strokeLinecap","strokeDasharray","ref","scale","markerWidth","markerHeight","path","circle","stroke","computeStyle","custom","traits","defaultStyles","isArray","style","drawCircle","p","offset","isObject","cx","cy","Math","round","drawRect","rect","drawDiamond","x_2","y_2","points","polygon","drawLine","waypoints","createLine","drawPath","d","as","type","handlers","renderer","renderEventContent","getSemantic","isThrowing","isThrowEvent","isTypedEvent","parallelMultiple","renderLabel","label","textUtil","createText","renderEmbeddedLabel","align","semantic","box","padding","renderExternalLabel","hidden","fontSize","renderLaneLabel","text","textBox","top","transform","createPathFromConnection","connection","pathData","attachTaskMarkers","taskMarkers","obj","subprocess","contains","seq","parallel","compensation","loop","adhoc","$type","loopCharacteristics","undefined","isSequential","isForCompensation","drawShape","h","DefaultRenderer","apply","drawConnection","renderDataItemCollection","yPosition","getScaledPath","xScaleFactor","yScaleFactor","containerWidth","containerHeight","mx","my","isCollection","elementObjectRef","getDi","businessObject","di","eventDefinitionType","filter","matches","definition","all","val","key","any","eventDefinitions","TASK_BORDER_RADIUS","INNER_OUTER_DIST","LABEL_STYLE","fontFamily","TextUtil","size","bpmn:Event","bpmn:StartEvent","isInterrupting","bpmn:MessageEventDefinition","messagePath","bpmn:TimerEventDefinition","linePathData","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:LinkEventDefinition","bpmn:ErrorEventDefinition","bpmn:CancelEventDefinition","bpmn:CompensateEventDefinition","bpmn:SignalEventDefinition","bpmn:MultipleEventDefinition","bpmn:ParallelMultipleEventDefinition","bpmn:EndEvent","bpmn:TerminateEventDefinition","bpmn:IntermediateEvent","outer","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:Activity","bpmn:Task","bpmn:ServiceTask","task","pathDataBG","abspos","fillPathData","bpmn:UserTask","pathData2","pathData3","bpmn:ManualTask","bpmn:SendTask","bpmn:ReceiveTask","instantiate","bpmn:ScriptTask","bpmn:BusinessRuleTask","headerPathData","businessHeaderPath","headerData","businessPath","bpmn:SubProcess","expanded","DiUtil","isExpanded","isEventSubProcess","triggeredByEvent","bpmn:AdHocSubProcess","bpmn:Transaction","innerAttrs","bpmn:CallActivity","bpmn:Participant","lane","expandedPool","isExpandedPool","text2","participantMultiplicity","bpmn:Lane","bpmn:InclusiveGateway","diamond","bpmn:ExclusiveGateway","bpmn:ComplexGateway","bpmn:ParallelGateway","bpmn:EventBasedGateway","drawEvent","eventGatewayType","parallelPath","innerCircle","bpmn:Gateway","bpmn:SequenceFlow","markerEnd","sequenceFlow","source","conditionExpression","$instanceOf","markerStart","default","bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:MessageFlow","messageVisibleKind","midPoint","getPointAtLength","getTotalLength","markerPathData","messageAttrs","bpmn:DataObject","elementObject","bpmn:DataObjectReference","bpmn:DataInput","arrowPathData","getRawPath","bpmn:DataOutput","bpmn:DataStoreReference","DATA_STORE_PATH","elementStore","bpmn:BoundaryEvent","cancel","cancelActivity","bpmn:Group","pointerEvents","bpmn:TextAnnotation","textElement","textPathData","ParticipantMultiplicityMarker","subProcessPath","SubProcessMarker","markerRect","ParallelMarker","SequentialMarker","sequentialPath","CompensationMarker","compensationPath","LoopMarker","loopPath","strokeMiterlimit","AdhocMarker","Object","create","$inject","../util/Di","diagram-js/lib/draw/Renderer","diagram-js/lib/util/Text",4,"PathMap","Snap","EVENT_MESSAGE","heightElements","widthElements","EVENT_SIGNAL","EVENT_ESCALATION","EVENT_CONDITIONAL","EVENT_LINK","EVENT_ERROR","EVENT_CANCEL_45","EVENT_COMPENSATION","EVENT_TIMER_WH","EVENT_TIMER_LINE","EVENT_MULTIPLE","EVENT_PARALLEL_MULTIPLE","GATEWAY_EXCLUSIVE","GATEWAY_PARALLEL","GATEWAY_EVENT_BASED","GATEWAY_COMPLEX","DATA_OBJECT_PATH","DATA_OBJECT_COLLECTION_PATH","DATA_ARROW","DATA_STORE","TEXT_ANNOTATION","MARKER_SUB_PROCESS","MARKER_PARALLEL","MARKER_SEQUENTIAL","MARKER_COMPENSATION","MARKER_LOOP","MARKER_ADHOC","TASK_TYPE_SEND","TASK_TYPE_SCRIPT","TASK_TYPE_USER_1","TASK_TYPE_USER_2","TASK_TYPE_USER_3","TASK_TYPE_MANUAL","TASK_TYPE_INSTANTIATING_SEND","TASK_TYPE_SERVICE","TASK_TYPE_SERVICE_FILL","TASK_TYPE_BUSINESS_RULE_HEADER","TASK_TYPE_BUSINESS_RULE_MAIN","MESSAGE_FLOW_MARKER","pathId","param","rawPath","coordinates","heightRatio","widthRatio","heightIndex","widthIndex","format",5,"./BpmnRenderer","./PathMap",6,"elementData","collectWaypoints","collect","BpmnImporter","eventBus","elementFactory","elementRegistry","_eventBus","_canvas","_elementFactory","_elementRegistry","LabelUtil","hasExternalLabel","getExternalLabelBounds","elementToString","add","parentElement","createRoot","collapsed","bounds","createShape","addShape","_getSource","target","_getTarget","createConnection","waypoint","addConnection","addLabel","fire","createLabel","labelTarget","_getEnd","side","refSemantic","$parent","_getElement","getById","../util/Label","./Util",7,"findDisplayCandidate","find","rootElements","BpmnTreeWalker","contextual","ctx","is","visit","gfx","visitRoot","root","visitIfDi","logError","error","context","registerDi","bpmnElement","diRefs","bind","handleDiagram","handlePlane","plane","planeElement","handlePlaneElement","handleDefinitions","diagrams","indexOf","rootElement","handleProcess","handleCollaboration","handleUnhandledProcesses","handleDeferred","deferred","process","handleFlowElementsContainer","handleIoSpecification","ioSpecification","handleArtifacts","artifacts","handledProcesses","processes","laneSets","handleMessageFlow","messageFlow","handleMessageFlows","messageFlows","handleDataAssociation","association","handleDataInput","dataInput","handleDataOutput","dataOutput","handleArtifact","artifact","dataInputs","dataOutputs","handleSubProcess","subProcess","handleFlowNode","flowNode","childCtx","handleSequenceFlow","handleDataElement","dataObject","handleBoundaryEvent","handleLane","newContext","childLaneSet","handleLaneSet","filterList","flowNodeRef","handleFlowElements","laneSet","lanes","handleLaneSets","handleNonFlowNodes","flowElements","dataInputAssociations","dataOutputAssociations","handleParticipant","participant","newCtx","processRef","collaboration","participants","Refs","enumerable","object-refs",8,"parse","visitor","importer","parentShape","warnings","walker","./BpmnTreeWalker",9,10,"bpmnImporter","./BpmnImporter",11,"isDefaultExpanded",12,"DEFAULT_LABEL_SIZE","getWaypointsMid","mid","first","floor","second","ceil","getExternalLabelMid","max",13,"./lib/simple",14,"packages","Moddle","ModdleXml","xmlStr","typeName","isString","isFunction","reader","Reader","rootHandler","writer","Writer","result","moddle-xml",15,"bpmn","bpmndi","dc","../resources/bpmn/json/bpmn.json","../resources/bpmn/json/bpmndi.json","../resources/bpmn/json/dc.json","../resources/bpmn/json/di.json","./bpmn-moddle",16,"./lib/Reader","./lib/Writer",17,"parseNodeAttributes","node","nodeAttrs","attributes","reduce","v","ns","local","parseNameNs","prefix","value","normalizeNamespaces","model","defaultNsUri","uri","pkg","getPackage","Context","parseRoot","elementsById","references","addReference","reference","addElement","addWarning","w","BaseHandler","BodyHandler","ReferenceHandler","property","ValueHandler","propertyDesc","BaseElementHandler","ElementHandler","getType","GenericElementHandler","XMLReader","sax","common","Types","types","Stack","parseName","aliasToName","handleEnd","handleText","handleNode","body","createReference","coerceType","isMany","set","parser","handleChild","createElement","descriptor","$descriptor","bodyProperty","Type","instance","prop","propertiesByName","isReference","getPropertyForElement","nameNs","propertyName","localName","$pkg","elementType","properties","isVirtual","isAttribute","hasType","effectiveType","toString","valueHandler","referenceHandler","childHandler","isSimple","newElement","createAny","children","$children","$body","resolveReferences","collection","idx","splice","handleClose","stack","pop","handleOpen","peek","line","column","xmlns","trim","onopentag","oncdata","ontext","onclosetag","onend","defer","write","close","./common","tiny-stack",18,"nsName","getElementNs","isGeneric","nameToAlias","getPropertyNs","getSerializableProperties","hasOwnProperty","escapeAttr","str","escapeMap","\n","\n\r","\"","replace","filterAttributes","props","isAttr","filterContained","ReferenceSerializer","BodySerializer","ValueSerializer","ElementSerializer","TypeSerializer","SavingWriter","FormatingWriter","out","indent","append","appendNewLine","appendIndent","join","unindent","XMLWriter","tree","internalWriter","formatingWriter","preamble","XML_PREAMBLE","build","serializeTo","CDATA_ESCAPE","DEFAULT_NS_MAP","serializeValue","escape","test","otherAttrs","parseNsAttributes","nsTagName","parseGeneric","parseAttributes","parseContainments","parseGenericAttributes","effectiveNs","logNamespaceUsed","nsPropertyTagName","isLocalNs","nsAttributeName","child","genericAttrs","$attrs","logNamespace","addAttribute","console","warn","isBody","asType","serialize","serializer","getNamespaces","namespaces","prefixMap","uriMap","used","existing","$model","serializeAttributes","collectNsAttrs","hasBody","b","typeNs",19,"capitalize","string","charAt","toUpperCase","slice","lower","toLowerCase","hasLowerCaseAlias","alias","xsi",20,"./lib/moddle","./lib/ns","./lib/types",21,"Base",22,"DescriptorBuilder","allTypes","pick","addProperty","addNamedProperty","replaceProperty","oldProperty","newProperty","oldNameNs","setBodyProperty","redefineProperty","nsPrefix","parts","redefines","split","attrName","redefinedProperty","validate","propsByName","assertNotDefined","removeNamedProperty","addIdProperty","definedProperty","definedBy","hasProperty","addTrait","defineProperty","./ns",23,"Factory","createType","ModdleElement","writable","defineModel","defineDescriptor","./base",24,"Properties","factory","registry","Registry","typeCache","cache","getEffectiveDescriptor","nsUri","uriOrPrefix","getPackages","getElementDescriptor","getPropertyDescriptor","./factory","./properties","./registry","./types",25,"defaultPrefix",26,27,"generateId","packageMap","typeMap","registerPackage","registerType","propertyNs","isBuiltIn","definePackage","mapTypes","iterator","superClass","cls","parentNs","builder","./descriptor-builder",28,"BUILTINS","String","Boolean","Integer","Real","Element","TYPE_CONVERTERS","parseInt","parseFloat","converter",29,"TinyStack","data","arg",30,31,32,33,34,35,36,37,38,39,"associations","isAbstract","emumerations","literalValues",40,41,42,"isReadOnly","isUnique","subsettedProperty",43,"./lib/Diagram",44,"bootstrap","bootstrapModules","hasModule","m","addModule","__init__","c","components","injector","Injector","createInjector","configModule","config","coreModule","didi",45,"number","resolution","ensurePx","isNumber","createContainer","document","setAttribute","appendChild","createGroup","group","class","Canvas","graphicsFactory","snap","_snap","_graphicsFactory","setCTM","mstr","remove","BASE_LAYER","_container","createPaper","_root","_layers","parentNode","removeChild","_ensureValidId","getRoot","layer","getContainer","_updateMarker","getGraphics","removeMarker","shape","updateShape","updateConnection","_removeElement","removeShape","removeConnection","sendToFront","bubble","gfxParent","getGraphicsByElement","_fireViewboxChange","viewbox","innerBox","matrix","outerBox","getSize","Matrix","translate","localMatrix","inner","scroll","delta","getCTM","dx","dy","createSVGMatrix","multiply","zoom","newScale","center","vbox","min","_setZoom","centerPoint","originalPoint","currentMatrix","scaleMatrix","newMatrix","viewport","point","createSVGPoint","currentScale","matrixTransform","inverse","clientWidth","clientHeight","getAbsoluteBBox","transformBBox","../util/Collections",46,"ElementFactory","_uid","Model","../model",47,"ElementRegistry","_elementMap","_graphicsMap","getByGraphics",48,"Event","extendEvent","eventType","EventBus","_listeners","DEFAULT_PRIORITY","stopPropagation","propagationStopped","preventDefault","defaultPrevented","isPropagationStopped","isDefaultPrevented","priority","callback","listener","_addListener","once","wrappedCallback","arguments","off","_getListeners","args","Array","shift","handleError",49,"gfxContainer","clearVisual","oldVisual","newVisual","after","createContainerFactory","GraphicsFactory","_renderer","createSnapAt","gfxGroup",50,"./Canvas","./ElementFactory","./ElementRegistry","./EventBus","./GraphicsFactory",51,"Renderer","CONNECTION_STYLE","SHAPE_STYLE","toSVGPoints","updateLine","./Snap",52,"snapsvg","./snapsvg-extensions",53,"Styles","defaultTraits","no-fill","no-border","strokeOpacity","no-events","className","additionalAttrs","inject",54,"./Renderer","./Styles",55,"plugin","array","getClasses","setClasses","classes","current","hasClass","removeClass","wrap","createElementNS",56,"InteractionEvents","baseEvent","eventName","registerEvents","click","hit","GraphicsUtil","getVisual","HIT_STYLE","hover","dblclick","newWidth","newBBox","newHeight","oldWidth","oldBBox","oldHeight","../../draw/Renderer","../../util/GraphicsUtil",57,"interactionEvents","./InteractionEvents",58,"Outline","createOutline","OUTLINE_STYLE","prependTo","updateOutline","outline","OUTLINE_OFFSET",59,"./Outline",60,"Overlays","_ids","ids","_overlayDefaults","show","trigger","minZoom","maxZoom","_overlays","_overlayContainers","_overlayRoot","_getOverlayContainer","overlays","clone","overlay","html","next","_addOverlay","htmlContainer","hide","_updateOverlayContainer","left","_updateOverlay","_createOverlayContainer","_updateRoot","raw","_updateOverlayVisibilty","updateViewbox","deferUpdate","debounce","../../util/IdGenerator",61,"./Overlays",62,"Selection","_selectedElements","deselect","selectedElements","oldSelection","newSelection","isSelected","elements",63,"originalEvent","srcEvent","SelectionVisuals","selection","shiftKey","MARKER_HOVER","MARKER_SELECTED","srcElement",64,"selectionVisuals","../interaction-events","../outline","./Selection","./SelectionVisuals",65,"parentRefs","labelRefs","outgoingRefs","incomingRefs","Shape","Root","Label","Connection",66,67,68,"IdGenerator","_counter","_prefix","random",69,"parseAlign","horizontal","vertical","parsePadding","Text","_config","DEFAULT_BOX_PADDING","layoutNext","lines","fit","fitLine","originalLine","nextLine","remainder","textBBox","getTextBBox","fakeText","textContent","semanticShorten","maxLength","part","shortenedParts","shortenLine","maxWidth","shortenedLine","merge","layouted","ownerSVGElement","totalHeight","sum","tspan",70,"annotate","FN_ARGS","FN_ARG","map",71,"Module","./annotation","./injector","./module",72,"autoAnnotate","currentlyResolving","providers","_providers","instances","_instances","msg","pivot","returned","dependencies","dep","createPrivateInjectorFactory","privateChildInjector","createChild","forceNewInstances","provider","cacheIdx","privateChildInjectorFactory","fromParentModule","matchedScopes","privateInjectorsCache","privateChildInjectors","privateChildFactories","$scope","scope","factoryMap","arrayUnwrap","__exports__","clonedModule","keys","substring","privateInjector","__modules__","getFromPrivateInjector",73,74,"Collection","./lib/collection","./lib/refs",75,"refs","inverseProperty","unset",76,"defineCollectionProperty","_value","old","ensureBound","./collection",77,78,79],"mappings":"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","sourcesContent":["!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.BpmnJS=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n'use strict';\n\nvar Diagram = _dereq_('diagram-js'),\n    BpmnModdle = _dereq_('bpmn-moddle'),\n    $ = (window.$),\n    _ = (window._);\n\nvar Importer = _dereq_('./import/Importer');\n\n\nfunction initListeners(diagram, listeners) {\n  var events = diagram.get('eventBus');\n\n  listeners.forEach(function(l) {\n    events.on(l.event, l.handler);\n  });\n}\n\nfunction checkValidationError(err) {\n\n  // check if we can help the user by indicating wrong BPMN 2.0 xml\n  // (in case he or the exporting tool did not get that right)\n\n  var pattern = /unparsable content <([^>]+)> detected([\\s\\S]*)$/;\n  var match = pattern.exec(err.message);\n\n  if (match) {\n    err.message =\n      'unparsable content <' + match[1] + '> detected; ' +\n      'this may indicate an invalid BPMN 2.0 diagram file' + match[2];\n  }\n\n  return err;\n}\n\n/**\n * A viewer for BPMN 2.0 diagrams\n *\n * @class\n *\n * @param {Object} [options] configuration options to pass to the viewer\n * @param {DOMElement} [options.container] the container to render the viewer in, defaults to body.\n * @param {String|Number} [options.width] the width of the viewer\n * @param {String|Number} [options.height] the height of the viewer\n * @param {Array<didi.Module>} [options.modules] a list of modules to override the default modules\n * @param {Array<didi.Module>} [options.additionalModules] a list of modules to use with the default modules\n */\nfunction Viewer(options) {\n  this.options = options = options || {};\n\n  var parent = options.container || $('body');\n\n  var container = $('<div></div>').addClass('bjs-container').css({\n    position: 'relative'\n  }).appendTo(parent);\n\n  _.forEach([ 'width', 'height' ], function(a) {\n    if (options[a]) {\n      container.css(a, options[a]);\n    }\n  });\n\n  // unwrap jquery\n  this.container = container.get(0);\n\n\n  /**\n   * The code in the <project-logo></project-logo> area\n   * must not be changed, see http://bpmn.io/license for more information\n   *\n   * <project-logo>\n   */\n\n  /* jshint -W101 */\n\n  // inlined ../resources/bpmnjs.png\n  var logoData = 'iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADBQTFRFiMte9PrwldFwfcZPqtqN0+zEyOe1XLgjvuKncsJAZ70y6fXh3vDT////UrQV////G2zN+AAAABB0Uk5T////////////////////AOAjXRkAAAHDSURBVHjavJZJkoUgDEBJmAX8979tM8u3E6x20VlYJfFFMoL4vBDxATxZcakIOJTWSmxvKWVIkJ8jHvlRv1F2LFrVISCZI+tCtQx+XfewgVTfyY3plPiQEAzI3zWy+kR6NBhFBYeBuscJLOUuA2WVLpCjVIaFzrNQZArxAZKUQm6gsj37L9Cb7dnIBUKxENaaMJQqMpDXvSL+ktxdGRm2IsKgJGGPg7atwUG5CcFUEuSv+CwQqizTrvDTNXdMU2bMiDWZd8d7QIySWVRsb2vBBioxOFt4OinPBapL+neAb5KL5IJ8szOza2/DYoipUCx+CjO0Bpsv0V6mktNZ+k8rlABlWG0FrOpKYVo8DT3dBeLEjUBAj7moDogVii7nSS9QzZnFcOVBp1g2PyBQ3Vr5aIapN91VJy33HTJLC1iX2FY6F8gRdaAeIEfVONgtFCzZTmoLEdOjBDfsIOA6128gw3eu1shAajdZNAORxuQDJN5A5PbEG6gNIu24QJD5iNyRMZIr6bsHbCtCU/OaOaSvgkUyDMdDa1BXGf5HJ1To+/Ym6mCKT02Y+/Sa126ZKyd3jxhzpc1r8zVL6YM1Qy/kR4ABAFJ6iQUnivhAAAAAAElFTkSuQmCC';\n\n  /* jshint +W101 */\n\n  var a = $('<a href=\"http://bpmn.io\" target=\"_blank\" class=\"bjs-powered-by\" title=\"Powered by bpmn.io\" />').css({\n    position: 'absolute',\n    bottom: 15,\n    right: 15,\n    zIndex: 100\n  });\n\n  var logo = $('<img/>').attr('src', 'data:image/png;base64,' + logoData).appendTo(a);\n\n  a.appendTo(container);\n\n  /* </project-logo> */\n}\n\nViewer.prototype.importXML = function(xml, done) {\n\n  var self = this;\n\n  this.moddle = this.createModdle();\n\n  this.moddle.fromXML(xml, 'bpmn:Definitions', function(err, definitions) {\n\n    if (err) {\n      err = checkValidationError(err);\n      return done(err);\n    }\n\n    self.importDefinitions(definitions, done);\n  });\n};\n\nViewer.prototype.saveXML = function(options, done) {\n\n  if (!done) {\n    done = options;\n    options = {};\n  }\n\n  var definitions = this.definitions;\n\n  if (!definitions) {\n    return done(new Error('no definitions loaded'));\n  }\n\n  this.moddle.toXML(definitions, options, done);\n};\n\nViewer.prototype.createModdle = function() {\n  return new BpmnModdle();\n};\n\nViewer.prototype.saveSVG = function(options, done) {\n\n  if (!done) {\n    done = options;\n    options = {};\n  }\n\n  var canvas = this.get('canvas');\n\n  var contentNode = canvas.getLayer('base'),\n      defsNode = canvas._paper.select('defs');\n\n  var contents = contentNode.innerSVG(),\n      defs = (defsNode && defsNode.outerSVG()) || '';\n\n  var bbox = contentNode.getBBox();\n\n  var svg =\n    '<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n' +\n    '<!-- created with bpmn-js / http://bpmn.io -->\\n' +\n    '<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\\n' +\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" ' +\n         'width=\"' + bbox.width + '\" height=\"' + bbox.height + '\" ' +\n         'viewBox=\"' + bbox.x + ' ' + bbox.y + ' ' + bbox.width + ' ' + bbox.height + '\" version=\"1.1\">' +\n      defs + contents +\n    '</svg>';\n\n  done(null, svg);\n};\n\nViewer.prototype.get = function(name) {\n\n  if (!this.diagram) {\n    throw new Error('no diagram loaded');\n  }\n\n  return this.diagram.get(name);\n};\n\nViewer.prototype.invoke = function(fn) {\n\n  if (!this.diagram) {\n    throw new Error('no diagram loaded');\n  }\n\n  return this.diagram.invoke(fn);\n};\n\nViewer.prototype.importDefinitions = function(definitions, done) {\n\n  // use try/catch to not swallow synchronous exceptions\n  // that may be raised during model parsing\n  try {\n    if (this.diagram) {\n      this.clear();\n    }\n\n    this.definitions = definitions;\n    this.diagram = this._createDiagram(this.options);\n\n    this._init(this.diagram);\n\n    Importer.importBpmnDiagram(this.diagram, definitions, done);\n  } catch (e) {\n    done(e);\n  }\n};\n\nViewer.prototype._init = function(diagram) {\n  initListeners(diagram, this.__listeners || []);\n};\n\nViewer.prototype._createDiagram = function(options) {\n\n  var modules = [].concat(options.modules || this.getModules(), options.additionalModules || []);\n\n  // add self as an available service\n  modules.unshift({\n    bpmnjs: [ 'value', this ],\n    moddle: [ 'value', this.moddle ]\n  });\n\n  options = _.omit(options, 'additionalModules');\n\n  options = _.extend(options, {\n    canvas: { container: this.container },\n    modules: modules\n  });\n\n  return new Diagram(options);\n};\n\n\nViewer.prototype.getModules = function() {\n  return this._modules;\n};\n\n/**\n * Remove all drawn elements from the viewer\n */\nViewer.prototype.clear = function() {\n  var diagram = this.diagram;\n\n  if (diagram) {\n    diagram.destroy();\n  }\n};\n\n/**\n * Register an event listener on the viewer\n *\n * @param {String} event\n * @param {Function} handler\n */\nViewer.prototype.on = function(event, handler) {\n  var diagram = this.diagram,\n      listeners = this.__listeners = this.__listeners || [];\n\n  listeners = this.__listeners || [];\n  listeners.push({ event: event, handler: handler });\n\n  if (diagram) {\n    diagram.get('eventBus').on(event, handler);\n  }\n};\n\n// modules the viewer is composed of\nViewer.prototype._modules = [\n  _dereq_('./core'),\n  _dereq_('diagram-js/lib/features/selection'),\n  _dereq_('diagram-js/lib/features/overlays')\n];\n\nmodule.exports = Viewer;\n\n},{\"./core\":2,\"./import/Importer\":8,\"bpmn-moddle\":13,\"diagram-js\":43,\"diagram-js/lib/features/overlays\":61,\"diagram-js/lib/features/selection\":64}],2:[function(_dereq_,module,exports){\nmodule.exports = {\n  __depends__: [\n    _dereq_('../draw'),\n    _dereq_('../import')\n  ]\n};\n},{\"../draw\":5,\"../import\":10}],3:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar DefaultRenderer = _dereq_('diagram-js/lib/draw/Renderer');\nvar TextUtil = _dereq_('diagram-js/lib/util/Text');\n\nvar DiUtil = _dereq_('../util/Di');\n\nvar createLine = DefaultRenderer.createLine;\n\n\nfunction BpmnRenderer(events, styles, pathMap) {\n\n  DefaultRenderer.call(this, styles);\n\n  var TASK_BORDER_RADIUS = 10;\n  var INNER_OUTER_DIST = 3;\n\n  var LABEL_STYLE = {\n    fontFamily: 'Arial, sans-serif',\n    fontSize: '12px'\n  };\n\n  var textUtil = new TextUtil({\n    style: LABEL_STYLE,\n    size: { width: 100 }\n  });\n\n  var markers = {};\n\n  function addMarker(id, element) {\n    markers[id] = element;\n  }\n\n  function marker(id) {\n    return markers[id];\n  }\n\n  function initMarkers(paper) {\n\n    function createMarker(id, options) {\n      var attrs = _.extend({\n        fill: 'black',\n        strokeWidth: 1,\n        strokeLinecap: 'round',\n        strokeDasharray: 'none'\n      }, options.attrs);\n\n      var ref = options.ref || { x: 0, y: 0 };\n\n      var scale = options.scale || 1;\n\n      // fix for safari / chrome / firefox bug not correctly\n      // resetting stroke dash array\n      if (attrs.strokeDasharray === 'none') {\n        attrs.strokeDasharray = [10000, 1];\n      }\n\n      var marker = options.element\n                     .attr(attrs)\n                     .marker(0, 0, 20, 20, ref.x, ref.y)\n                     .attr({\n                       markerWidth: 20 * scale,\n                       markerHeight: 20 * scale\n                     });\n\n      return addMarker(id, marker);\n    }\n\n\n    createMarker('sequenceflow-end', {\n      element: paper.path('M 1 5 L 11 10 L 1 15 Z'),\n      ref: { x: 11, y: 10 },\n      scale: 0.5\n    });\n\n    createMarker('messageflow-start', {\n      element: paper.circle(6, 6, 5),\n      attrs: {\n        fill: 'white',\n        stroke: 'black'\n      },\n      ref: { x: 6, y: 6 }\n    });\n\n    createMarker('messageflow-end', {\n      element: paper.path('M 1 5 L 11 10 L 1 15 Z'),\n      attrs: {\n        fill: 'white',\n        stroke: 'black'\n      },\n      ref: { x: 11, y: 10 }\n    });\n\n    createMarker('data-association-end', {\n      element: paper.path('M 1 5 L 11 10 L 1 15'),\n      attrs: {\n        fill: 'white',\n        stroke: 'black'\n      },\n      ref: { x: 11, y: 10 },\n      scale: 0.5\n    });\n\n    createMarker('conditional-flow-marker', {\n      element: paper.path('M 0 10 L 8 6 L 16 10 L 8 14 Z'),\n      attrs: {\n        fill: 'white',\n        stroke: 'black'\n      },\n      ref: { x: -1, y: 10 },\n      scale: 0.5\n    });\n\n    createMarker('conditional-default-flow-marker', {\n      element: paper.path('M 1 4 L 5 16'),\n      attrs: {\n        stroke: 'black'\n      },\n      ref: { x: -5, y: 10 },\n      scale: 0.5\n    });\n  }\n\n  function computeStyle(custom, traits, defaultStyles) {\n    if (!_.isArray(traits)) {\n      defaultStyles = traits;\n      traits = [];\n    }\n\n    return styles.style(traits || [], _.extend(defaultStyles, custom || {}));\n  }\n\n  function drawCircle(p, width, height, offset, attrs) {\n\n    if (_.isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n\n    offset = offset || 0;\n\n    attrs = computeStyle(attrs, {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'white'\n    });\n\n    var cx = width / 2,\n        cy = height / 2;\n\n    return p.circle(cx, cy, Math.round((width + height) / 4 - offset)).attr(attrs);\n  }\n\n  function drawRect(p, width, height, r, offset, attrs) {\n\n    if (_.isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n\n    offset = offset || 0;\n\n    attrs = computeStyle(attrs, {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'white'\n    });\n\n    return p.rect(offset, offset, width - offset * 2, height - offset * 2, r).attr(attrs);\n  }\n\n  function drawDiamond(p, width, height, attrs) {\n\n    var x_2 = width / 2;\n    var y_2 = height / 2;\n\n    var points = [x_2, 0, width, y_2, x_2, height, 0, y_2 ];\n\n    attrs = computeStyle(attrs, {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'white'\n    });\n\n    return p.polygon(points).attr(attrs);\n  }\n\n  function drawLine(p, waypoints, attrs) {\n    attrs = computeStyle(attrs, [ 'no-fill' ], {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'none'\n    });\n\n    return createLine(waypoints, attrs).appendTo(p);\n  }\n\n  function drawPath(p, d, attrs) {\n\n    attrs = computeStyle(attrs, [ 'no-fill' ], {\n      strokeWidth: 2,\n      stroke: 'black'\n    });\n\n    return p.path(d).attr(attrs);\n  }\n\n  function as(type) {\n    return function(p, element) {\n      return handlers[type](p, element);\n    };\n  }\n\n  function renderer(type) {\n    return handlers[type];\n  }\n\n  function renderEventContent(element, p) {\n\n    var event = getSemantic(element);\n    var isThrowing = isThrowEvent(event);\n\n    if (isTypedEvent(event, 'bpmn:MessageEventDefinition')) {\n      return renderer('bpmn:MessageEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:TimerEventDefinition')) {\n      return renderer('bpmn:TimerEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:ConditionalEventDefinition')) {\n      return renderer('bpmn:ConditionalEventDefinition')(p, element);\n    }\n\n    if (isTypedEvent(event, 'bpmn:SignalEventDefinition')) {\n      return renderer('bpmn:SignalEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:CancelEventDefinition') &&\n      isTypedEvent(event, 'bpmn:TerminateEventDefinition', { parallelMultiple: false })) {\n      return renderer('bpmn:MultipleEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:CancelEventDefinition') &&\n      isTypedEvent(event, 'bpmn:TerminateEventDefinition', { parallelMultiple: true })) {\n      return renderer('bpmn:ParallelMultipleEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:EscalationEventDefinition')) {\n      return renderer('bpmn:EscalationEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:LinkEventDefinition')) {\n      return renderer('bpmn:LinkEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:ErrorEventDefinition')) {\n      return renderer('bpmn:ErrorEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:CancelEventDefinition')) {\n      return renderer('bpmn:CancelEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:CompensateEventDefinition')) {\n      return renderer('bpmn:CompensateEventDefinition')(p, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:TerminateEventDefinition')) {\n      return renderer('bpmn:TerminateEventDefinition')(p, element, isThrowing);\n    }\n\n    return null;\n  }\n\n  function renderLabel(p, label, options) {\n    return textUtil.createText(p, label || '', options).addClass('djs-label');\n  }\n\n  function renderEmbeddedLabel(p, element, align) {\n    var semantic = getSemantic(element);\n    return renderLabel(p, semantic.name, { box: element, align: align, padding: 5 });\n  }\n\n  function renderExternalLabel(p, element, align) {\n    var semantic = getSemantic(element);\n\n    if (!semantic.name) {\n      element.hidden = true;\n    }\n\n    return renderLabel(p, semantic.name, { box: element, align: align, style: { fontSize: '11px' } });\n  }\n\n  function renderLaneLabel(p, text, element) {\n    var textBox = renderLabel(p, text, {\n      box: { height: 30, width: element.height },\n      align: 'center-middle'\n    });\n\n    var top = -1 * element.height;\n    textBox.transform(\n      'rotate(270) ' +\n      'translate(' + top + ',' + 0 + ')'\n    );\n  }\n\n  function createPathFromConnection(connection) {\n    var waypoints = connection.waypoints;\n\n    var pathData = 'm  ' + waypoints[0].x + ',' + waypoints[0].y;\n    for (var i = 1; i < waypoints.length; i++) {\n      pathData += 'L' + waypoints[i].x + ',' + waypoints[i].y + ' ';\n    }\n    return pathData;\n  }\n\n  var handlers = {\n    'bpmn:Event': function(p, element, attrs) {\n      return drawCircle(p, element.width, element.height,  attrs);\n    },\n    'bpmn:StartEvent': function(p, element) {\n      var attrs = {};\n      var semantic = getSemantic(element);\n\n      if (!semantic.isInterrupting) {\n        attrs = {\n          strokeDasharray: '6',\n          strokeLinecap: 'round'\n        };\n      }\n\n      var circle = renderer('bpmn:Event')(p, element, attrs);\n\n      renderEventContent(element, p);\n\n      return circle;\n    },\n    'bpmn:MessageEventDefinition': function(p, element, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_MESSAGE', {\n        xScaleFactor: 0.9,\n        yScaleFactor: 0.9,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.235,\n          my: 0.315\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'white';\n      var stroke = isThrowing ? 'white' : 'black';\n\n      var messagePath = drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill,\n        stroke: stroke\n      });\n\n      return messagePath;\n    },\n    'bpmn:TimerEventDefinition': function(p, element) {\n\n      var circle = drawCircle(p, element.width, element.height, 0.2 * element.height, {\n        strokeWidth: 2\n      });\n\n      var pathData = pathMap.getScaledPath('EVENT_TIMER_WH', {\n        xScaleFactor: 0.75,\n        yScaleFactor: 0.75,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.5,\n          my: 0.5\n        }\n      });\n\n      var path = drawPath(p, pathData, {\n        strokeWidth: 2,\n        strokeLinecap: 'square'\n      });\n\n      for(var i = 0;i < 12;i++) {\n\n        var linePathData = pathMap.getScaledPath('EVENT_TIMER_LINE', {\n          xScaleFactor: 0.75,\n          yScaleFactor: 0.75,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.5,\n            my: 0.5\n          }\n        });\n\n        var width = element.width / 2;\n        var height = element.height / 2;\n\n        var linePath = drawPath(p, linePathData, {\n          strokeWidth: 1,\n          strokeLinecap: 'square',\n          transform: 'rotate(' + (i * 30) + ',' + height + ',' + width + ')'\n        });\n      }\n\n      return circle;\n    },\n    'bpmn:EscalationEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_ESCALATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.555\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      });\n    },\n    'bpmn:ConditionalEventDefinition': function(p, event) {\n      var pathData = pathMap.getScaledPath('EVENT_CONDITIONAL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.222\n        }\n      });\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1\n      });\n    },\n    'bpmn:LinkEventDefinition': function(p, event) {\n      var pathData = pathMap.getScaledPath('EVENT_LINK', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.57,\n          my: 0.263\n        }\n      });\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1\n      });\n    },\n    'bpmn:ErrorEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_ERROR', {\n        xScaleFactor: 1.1,\n        yScaleFactor: 1.1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.2,\n          my: 0.722\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      });\n    },\n    'bpmn:CancelEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_CANCEL_45', {\n        xScaleFactor: 1.0,\n        yScaleFactor: 1.0,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.638,\n          my: -0.055\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      }).transform('rotate(45)');\n    },\n    'bpmn:CompensateEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_COMPENSATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.201,\n          my: 0.472\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      });\n    },\n    'bpmn:SignalEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_SIGNAL', {\n        xScaleFactor: 0.9,\n        yScaleFactor: 0.9,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.2\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      });\n    },\n    'bpmn:MultipleEventDefinition': function(p, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_MULTIPLE', {\n        xScaleFactor: 1.1,\n        yScaleFactor: 1.1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.222,\n          my: 0.36\n        }\n      });\n\n      var fill = isThrowing ? 'black' : 'none';\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      });\n    },\n    'bpmn:ParallelMultipleEventDefinition': function(p, event) {\n      var pathData = pathMap.getScaledPath('EVENT_PARALLEL_MULTIPLE', {\n        xScaleFactor: 1.2,\n        yScaleFactor: 1.2,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.458,\n          my: 0.194\n        }\n      });\n\n      return drawPath(p, pathData, {\n        strokeWidth: 1\n      });\n    },\n    'bpmn:EndEvent': function(p, element) {\n      var circle = renderer('bpmn:Event')(p, element, {\n        strokeWidth: 4\n      });\n\n      renderEventContent(element, p, true);\n\n      return circle;\n    },\n    'bpmn:TerminateEventDefinition': function(p, element) {\n      var circle = drawCircle(p, element.width, element.height, 8, {\n        strokeWidth: 4,\n        fill: 'black'\n      });\n\n      return circle;\n    },\n    'bpmn:IntermediateEvent': function(p, element) {\n      var outer = renderer('bpmn:Event')(p, element, { strokeWidth: 1 });\n      var inner = drawCircle(p, element.width, element.height, INNER_OUTER_DIST, { strokeWidth: 1, fill: 'none' });\n\n      renderEventContent(element, p);\n\n      return outer;\n    },\n    'bpmn:IntermediateCatchEvent': as('bpmn:IntermediateEvent'),\n    'bpmn:IntermediateThrowEvent': as('bpmn:IntermediateEvent'),\n\n    'bpmn:Activity': function(p, element, attrs) {\n      return drawRect(p, element.width, element.height, TASK_BORDER_RADIUS, attrs);\n    },\n\n    'bpmn:Task': function(p, element) {\n      var rect = renderer('bpmn:Activity')(p, element);\n      renderEmbeddedLabel(p, element, 'center-middle');\n      attachTaskMarkers(p, element);\n      return rect;\n    },\n    'bpmn:ServiceTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var pathDataBG = pathMap.getScaledPath('TASK_TYPE_SERVICE', {\n        abspos: {\n          x: 12,\n          y: 18\n        }\n      });\n\n      var servicePathBG = drawPath(p, pathDataBG, {\n        strokeWidth: 1,\n        fill: 'none'\n      });\n\n      var fillPathData = pathMap.getScaledPath('TASK_TYPE_SERVICE_FILL', {\n        abspos: {\n          x: 17.2,\n          y: 18\n        }\n      });\n\n      var serviceFillPath = drawPath(p, fillPathData, {\n        strokeWidth: 0,\n        stroke: 'none',\n        fill: 'white'\n      });\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SERVICE', {\n        abspos: {\n          x: 17,\n          y: 22\n        }\n      });\n\n      var servicePath = drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: 'white'\n      });\n\n      return task;\n    },\n    'bpmn:UserTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var x = 15;\n      var y = 12;\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_USER_1', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      var userPath = drawPath(p, pathData, {\n        strokeWidth: 0.5,\n        fill: 'none'\n      });\n\n      var pathData2 = pathMap.getScaledPath('TASK_TYPE_USER_2', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      var userPath2 = drawPath(p, pathData2, {\n        strokeWidth: 0.5,\n        fill: 'none'\n      });\n\n      var pathData3 = pathMap.getScaledPath('TASK_TYPE_USER_3', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      var userPath3 = drawPath(p, pathData3, {\n        strokeWidth: 0.5,\n        fill: 'black'\n      });\n\n      return task;\n    },\n    'bpmn:ManualTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_MANUAL', {\n        abspos: {\n          x: 17,\n          y: 15\n        }\n      });\n\n      var userPath = drawPath(p, pathData, {\n        strokeWidth: 0.25,\n        fill: 'white',\n        stroke: 'black'\n      });\n\n      return task;\n    },\n    'bpmn:SendTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SEND', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: 21,\n        containerHeight: 14,\n        position: {\n          mx: 0.285,\n          my: 0.357\n        }\n      });\n\n      var sendPath = drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: 'black',\n        stroke: 'white'\n      });\n\n      return task;\n    },\n    'bpmn:ReceiveTask' : function(p, element) {\n      var semantic = getSemantic(element);\n\n      var task = renderer('bpmn:Task')(p, element);\n      var pathData;\n\n      if (semantic.instantiate) {\n        drawCircle(p, 28, 28, 20 * 0.22, { strokeWidth: 1 });\n\n        pathData = pathMap.getScaledPath('TASK_TYPE_INSTANTIATING_SEND', {\n          abspos: {\n            x: 7.77,\n            y: 9.52\n          }\n        });\n      } else {\n\n        pathData = pathMap.getScaledPath('TASK_TYPE_SEND', {\n          xScaleFactor: 0.9,\n          yScaleFactor: 0.9,\n          containerWidth: 21,\n          containerHeight: 14,\n          position: {\n            mx: 0.3,\n            my: 0.4\n          }\n        });\n      }\n\n      var sendPath = drawPath(p, pathData, {\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:ScriptTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SCRIPT', {\n        abspos: {\n          x: 15,\n          y: 20\n        }\n      });\n\n      var scriptPath = drawPath(p, pathData, {\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:BusinessRuleTask': function(p, element) {\n      var task = renderer('bpmn:Task')(p, element);\n\n      var headerPathData = pathMap.getScaledPath('TASK_TYPE_BUSINESS_RULE_HEADER', {\n        abspos: {\n          x: 8,\n          y: 8\n        }\n      });\n\n      var businessHeaderPath = drawPath(p, headerPathData);\n      businessHeaderPath.attr({\n        strokeWidth: 1,\n        fill: 'AAA'\n      });\n\n      var headerData = pathMap.getScaledPath('TASK_TYPE_BUSINESS_RULE_MAIN', {\n        abspos: {\n          x: 8,\n          y: 8\n        }\n      });\n\n      var businessPath = drawPath(p, headerData);\n      businessPath.attr({\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:SubProcess': function(p, element, attrs) {\n      var rect = renderer('bpmn:Activity')(p, element, attrs);\n\n      var semantic = getSemantic(element),\n          di = getDi(element);\n\n      var expanded = DiUtil.isExpanded(semantic);\n\n      var isEventSubProcess = !!semantic.triggeredByEvent;\n      if (isEventSubProcess) {\n        rect.attr({\n          strokeDasharray: '1,2'\n        });\n      }\n\n      renderEmbeddedLabel(p, element, expanded ? 'center-top' : 'center-middle');\n\n      if (expanded) {\n        attachTaskMarkers(p, element);\n      } else {\n        attachTaskMarkers(p, element, ['SubProcessMarker']);\n      }\n\n      return rect;\n    },\n    'bpmn:AdHocSubProcess': function(p, element) {\n      return renderer('bpmn:SubProcess')(p, element);\n    },\n    'bpmn:Transaction': function(p, element) {\n      var outer = renderer('bpmn:SubProcess')(p, element);\n\n      var innerAttrs = styles.style([ 'no-fill', 'no-events' ]);\n      var inner = drawRect(p, element.width, element.height, TASK_BORDER_RADIUS - 2, INNER_OUTER_DIST, innerAttrs);\n\n      return outer;\n    },\n    'bpmn:CallActivity': function(p, element) {\n      return renderer('bpmn:SubProcess')(p, element, {\n        strokeWidth: 5\n      });\n    },\n    'bpmn:Participant': function(p, element) {\n\n      var lane = renderer('bpmn:Lane')(p, element);\n\n      var expandedPool = DiUtil.isExpandedPool(getSemantic(element));\n\n      if (expandedPool) {\n        drawLine(p, [\n          { x: 30, y: 0 },\n          { x: 30, y: element.height }\n        ]);\n        var text = getSemantic(element).name;\n        renderLaneLabel(p, text, element);\n      } else {\n        // Collapsed pool draw text inline\n        var text2 = getSemantic(element).name;\n        renderLabel(p, text2, { box: element, align: 'center-middle' });\n      }\n\n      var participantMultiplicity = !!(getSemantic(element).participantMultiplicity);\n\n      if(participantMultiplicity) {\n        renderer('ParticipantMultiplicityMarker')(p, element);\n      }\n\n      return lane;\n    },\n    'bpmn:Lane': function(p, element) {\n      var rect = drawRect(p, element.width, element.height, 0, {\n        fill: 'none'\n      });\n\n      var semantic = getSemantic(element);\n\n      if (semantic.$type === 'bpmn:Lane') {\n        var text = semantic.name;\n        renderLaneLabel(p, text, element);\n      }\n\n      return rect;\n    },\n    'bpmn:InclusiveGateway': function(p, element) {\n      var diamond = drawDiamond(p, element.width, element.height);\n\n      var circle = drawCircle(p, element.width, element.height, element.height * 0.24, {\n        strokeWidth: 2.5,\n        fill: 'none'\n      });\n\n      return diamond;\n    },\n    'bpmn:ExclusiveGateway': function(p, element) {\n      var diamond = drawDiamond(p, element.width, element.height);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_EXCLUSIVE', {\n        xScaleFactor: 0.4,\n        yScaleFactor: 0.4,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.32,\n          my: 0.3\n        }\n      });\n\n      if (!!(getDi(element).isMarkerVisible)) {\n        drawPath(p, pathData, {\n          strokeWidth: 1,\n          fill: 'black'\n        });\n      }\n\n      return diamond;\n    },\n    'bpmn:ComplexGateway': function(p, element) {\n      var diamond = drawDiamond(p, element.width, element.height);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_COMPLEX', {\n        xScaleFactor: 0.5,\n        yScaleFactor:0.5,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.46,\n          my: 0.26\n        }\n      });\n\n      var complexPath = drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: 'black'\n      });\n\n      return diamond;\n    },\n    'bpmn:ParallelGateway': function(p, element) {\n      var diamond = drawDiamond(p, element.width, element.height);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_PARALLEL', {\n        xScaleFactor: 0.6,\n        yScaleFactor:0.6,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.46,\n          my: 0.2\n        }\n      });\n\n      var parallelPath = drawPath(p, pathData, {\n        strokeWidth: 1,\n        fill: 'black'\n      });\n\n      return diamond;\n    },\n    'bpmn:EventBasedGateway': function(p, element) {\n\n      var semantic = getSemantic(element);\n\n      var diamond = drawDiamond(p, element.width, element.height);\n\n      var outerCircle = drawCircle(p, element.width, element.height, element.height * 0.20, {\n        strokeWidth: 1,\n        fill: 'none'\n      });\n\n      var type = semantic.eventGatewayType;\n      var instantiate = !!semantic.instantiate;\n\n      function drawEvent() {\n\n        var pathData = pathMap.getScaledPath('GATEWAY_EVENT_BASED', {\n          xScaleFactor: 0.18,\n          yScaleFactor: 0.18,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.36,\n            my: 0.44\n          }\n        });\n\n        var eventPath = drawPath(p, pathData, {\n          strokeWidth: 2,\n          fill: 'none'\n        });\n      }\n\n      if (type === 'Parallel') {\n\n        var pathData = pathMap.getScaledPath('GATEWAY_PARALLEL', {\n          xScaleFactor: 0.4,\n          yScaleFactor:0.4,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.474,\n            my: 0.296\n          }\n        });\n\n        var parallelPath = drawPath(p, pathData);\n        parallelPath.attr({\n          strokeWidth: 1,\n          fill: 'none'\n        });\n      } else if (type === 'Exclusive') {\n\n        if (!instantiate) {\n          var innerCircle = drawCircle(p, element.width, element.height, element.height * 0.26);\n          innerCircle.attr({\n            strokeWidth: 1,\n            fill: 'none'\n          });\n        }\n\n        drawEvent();\n      }\n\n\n      return diamond;\n    },\n    'bpmn:Gateway': function(p, element) {\n      return drawDiamond(p, element.width, element.height);\n    },\n    'bpmn:SequenceFlow': function(p, element) {\n      var pathData = createPathFromConnection(element);\n      var path = drawPath(p, pathData, {\n        markerEnd: marker('sequenceflow-end')\n      });\n\n      var sequenceFlow = getSemantic(element);\n      var source = element.source.businessObject;\n\n      // conditional flow marker\n      if (sequenceFlow.conditionExpression && source.$instanceOf('bpmn:Task')) {\n        path.attr({\n          markerStart: marker('conditional-flow-marker')\n        });\n      }\n\n      // default marker\n      if (source.default && source.$instanceOf('bpmn:Gateway') && source.default === sequenceFlow) {\n        path.attr({\n          markerStart: marker('conditional-default-flow-marker')\n        });\n      }\n\n      return path;\n    },\n    'bpmn:Association': function(p, element, attrs) {\n\n      attrs = _.extend({\n        strokeDasharray: '1,6',\n        strokeLinecap: 'round'\n      }, attrs || {});\n\n      // TODO(nre): style according to directed state\n      return drawLine(p, element.waypoints, attrs);\n    },\n    'bpmn:DataInputAssociation': function(p, element) {\n      return renderer('bpmn:Association')(p, element, {\n        markerEnd: marker('data-association-end')\n      });\n    },\n    'bpmn:DataOutputAssociation': function(p, element) {\n      return renderer('bpmn:Association')(p, element, {\n        markerEnd: marker('data-association-end')\n      });\n    },\n    'bpmn:MessageFlow': function(p, element) {\n\n      var di = getDi(element);\n\n      var pathData = createPathFromConnection(element);\n      var path = drawPath(p, pathData, {\n        markerEnd: marker('messageflow-end'),\n        markerStart: marker('messageflow-start'),\n        strokeDasharray: '10',\n        strokeLinecap: 'round',\n        strokeWidth: 1\n      });\n\n      if (!!di.messageVisibleKind) {\n        var midPoint = path.getPointAtLength(path.getTotalLength() / 2);\n\n        var markerPathData = pathMap.getScaledPath('MESSAGE_FLOW_MARKER', {\n          abspos: {\n            x: midPoint.x,\n            y: midPoint.y\n          }\n        });\n\n        var messageAttrs = { strokeWidth: 1 };\n\n        if (di.messageVisibleKind === 'initiating') {\n          messageAttrs.fill = 'white';\n          messageAttrs.stroke = 'black';\n        } else {\n          messageAttrs.fill = '#888';\n          messageAttrs.stroke = 'white';\n        }\n\n        drawPath(p, markerPathData, messageAttrs);\n      }\n\n      return path;\n    },\n    'bpmn:DataObject': function(p, element) {\n      var pathData = pathMap.getScaledPath('DATA_OBJECT_PATH', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.474,\n          my: 0.296\n        }\n      });\n\n      var elementObject = drawPath(p, pathData, { fill: 'white' });\n\n      var semantic = getSemantic(element);\n\n      if (isCollection(semantic)) {\n        renderDataItemCollection(p, element);\n      }\n\n      return elementObject;\n    },\n    'bpmn:DataObjectReference': as('bpmn:DataObject'),\n    'bpmn:DataInput': function(p, element) {\n\n      var arrowPathData = pathMap.getRawPath('DATA_ARROW');\n\n      // page\n      var elementObject = renderer('bpmn:DataObject')(p, element);\n\n      // arrow\n      var elementInput = drawPath(p, arrowPathData, { strokeWidth: 1 });\n\n      return elementObject;\n    },\n    'bpmn:DataOutput': function(p, element) {\n      var arrowPathData = pathMap.getRawPath('DATA_ARROW');\n\n      // page\n      var elementObject = renderer('bpmn:DataObject')(p, element);\n\n      // arrow\n      var elementInput = drawPath(p, arrowPathData, {\n        strokeWidth: 1,\n        fill: 'black'\n      });\n\n      return elementObject;\n    },\n    'bpmn:DataStoreReference': function(p, element) {\n      var DATA_STORE_PATH = pathMap.getScaledPath('DATA_STORE', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0,\n          my: 0.133\n        }\n      });\n\n      var elementStore = drawPath(p, DATA_STORE_PATH, {\n        strokeWidth: 2,\n        fill: 'white'\n      });\n\n      return elementStore;\n    },\n    'bpmn:BoundaryEvent': function(p, element) {\n\n      var semantic = getSemantic(element),\n          cancel = semantic.cancelActivity;\n\n      var attrs = {\n        strokeLinecap: 'round',\n        strokeWidth: 1\n      };\n\n      if (!cancel) {\n        attrs.strokeDasharray = '6';\n      }\n\n      var outer = renderer('bpmn:Event')(p, element, attrs);\n      var inner = drawCircle(p, element.width, element.height, INNER_OUTER_DIST, attrs);\n\n      renderEventContent(element, p);\n\n      return outer;\n    },\n    'bpmn:Group': function(p, element) {\n      return drawRect(p, element.width, element.height, TASK_BORDER_RADIUS, {\n        strokeWidth: 1,\n        strokeDasharray: '8,3,1,3',\n        fill: 'none',\n        pointerEvents: 'none'\n      });\n    },\n    'label': function(p, element) {\n      return renderExternalLabel(p, element, '');\n    },\n    'bpmn:TextAnnotation': function(p, element) {\n      var style = {\n        'fill': 'none',\n        'stroke': 'none'\n      };\n      var textElement = drawRect(p, element.width, element.width, 0, 0, style);\n      var textPathData = pathMap.getScaledPath('TEXT_ANNOTATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.0,\n          my: 0.0\n        }\n      });\n      drawPath(p, textPathData);\n\n      var text = getSemantic(element).text || '';\n      renderLabel(p, text, { box: element, align: 'left-middle', padding: 5 });\n\n      return textElement;\n    },\n    'ParticipantMultiplicityMarker': function(p, element) {\n      var subProcessPath = pathMap.getScaledPath('MARKER_PARALLEL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2) / element.width),\n          my: (element.height - 15) / element.height\n        }\n      });\n\n      drawPath(p, subProcessPath);\n    },\n    'SubProcessMarker': function(p, element) {\n      var markerRect = drawRect(p, 14, 14, 0, {\n        strokeWidth: 1\n      });\n\n      // Process marker is placed in the middle of the box\n      // therefore fixed values can be used here\n      markerRect.transform('translate(' + (element.width / 2 - 7.5) + ',' + (element.height - 20) + ')');\n\n      var subProcessPath = pathMap.getScaledPath('MARKER_SUB_PROCESS', {\n        xScaleFactor: 1.5,\n        yScaleFactor: 1.5,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: (element.width / 2 - 7.5) / element.width,\n          my: (element.height - 20) / element.height\n        }\n      });\n\n      drawPath(p, subProcessPath);\n    },\n    'ParallelMarker': function(p, element, position) {\n      var subProcessPath = pathMap.getScaledPath('MARKER_PARALLEL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.parallel) / element.width),\n          my: (element.height - 20) / element.height\n        }\n      });\n      drawPath(p, subProcessPath);\n    },\n    'SequentialMarker': function(p, element, position) {\n      var sequentialPath = pathMap.getScaledPath('MARKER_SEQUENTIAL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.seq) / element.width),\n          my: (element.height - 19) / element.height\n        }\n      });\n      drawPath(p, sequentialPath);\n    },\n    'CompensationMarker': function(p, element, position) {\n      var compensationPath = pathMap.getScaledPath('MARKER_COMPENSATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.compensation) / element.width),\n          my: (element.height - 13) / element.height\n        }\n      });\n      drawPath(p, compensationPath, { strokeWidth: 1 });\n    },\n    'LoopMarker': function(p, element, position) {\n      var loopPath = pathMap.getScaledPath('MARKER_LOOP', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.loop) / element.width),\n          my: (element.height - 7) / element.height\n        }\n      });\n\n      drawPath(p, loopPath, {\n        strokeWidth: 1,\n        fill: 'none',\n        strokeLinecap: 'round',\n        strokeMiterlimit: 0.5\n      });\n    },\n    'AdhocMarker': function(p, element, position) {\n      var loopPath = pathMap.getScaledPath('MARKER_ADHOC', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.adhoc) / element.width),\n          my: (element.height - 15) / element.height\n        }\n      });\n\n      drawPath(p, loopPath, {\n        strokeWidth: 1,\n        fill: 'black'\n      });\n    }\n  };\n\n  function attachTaskMarkers(p, element, taskMarkers) {\n    var obj = getSemantic(element);\n\n    var subprocess = _.contains(taskMarkers, 'SubProcessMarker');\n    var position;\n\n    if (subprocess) {\n      position = {\n        seq: -21,\n        parallel: -22,\n        compensation: -42,\n        loop: -18,\n        adhoc: 10\n      };\n    } else {\n      position = {\n        seq: -3,\n        parallel: -6,\n        compensation: -27,\n        loop: 0,\n        adhoc: 10\n      };\n    }\n\n    _.forEach(taskMarkers, function(marker) {\n      renderer(marker)(p, element, position);\n    });\n\n    if (obj.$type === 'bpmn:AdHocSubProcess') {\n      renderer('AdhocMarker')(p, element, position);\n    }\n    if (obj.loopCharacteristics && obj.loopCharacteristics.isSequential === undefined) {\n      renderer('LoopMarker')(p, element, position);\n      return;\n    }\n    if (obj.loopCharacteristics &&\n      obj.loopCharacteristics.isSequential !== undefined &&\n      !obj.loopCharacteristics.isSequential) {\n      renderer('ParallelMarker')(p, element, position);\n    }\n    if (obj.loopCharacteristics && !!obj.loopCharacteristics.isSequential) {\n      renderer('SequentialMarker')(p, element, position);\n    }\n    if (!!obj.isForCompensation) {\n      renderer('CompensationMarker')(p, element, position);\n    }\n  }\n\n  function drawShape(parent, element) {\n    var type = element.type;\n    var h = handlers[type];\n\n    /* jshint -W040 */\n    if (!h) {\n      return DefaultRenderer.prototype.drawShape.apply(this, [ parent, element ]);\n    } else {\n      return h(parent, element);\n    }\n  }\n\n  function drawConnection(parent, element) {\n    var type = element.type;\n    var h = handlers[type];\n\n    /* jshint -W040 */\n    if (!h) {\n      return DefaultRenderer.prototype.drawConnection.apply(this, [ parent, element ]);\n    } else {\n      return h(parent, element);\n    }\n  }\n\n  function renderDataItemCollection(p, element) {\n\n    var yPosition = (element.height - 16) / element.height;\n\n    var pathData = pathMap.getScaledPath('DATA_OBJECT_COLLECTION_PATH', {\n      xScaleFactor: 1,\n      yScaleFactor: 1,\n      containerWidth: element.width,\n      containerHeight: element.height,\n      position: {\n        mx: 0.451,\n        my: yPosition\n      }\n    });\n\n    var collectionPath = drawPath(p, pathData, {\n      strokeWidth: 2\n    });\n  }\n\n  function isCollection(element, filter) {\n    return element.isCollection ||\n           (element.elementObjectRef && element.elementObjectRef.isCollection);\n  }\n\n  function getDi(element) {\n    return element.businessObject.di;\n  }\n\n  function getSemantic(element) {\n    return element.businessObject;\n  }\n\n  /**\n   * Checks if eventDefinition of the given element matches with semantic type.\n   *\n   * @return {boolean} true if element is of the given semantic type\n   */\n  function isTypedEvent(event, eventDefinitionType, filter) {\n\n    function matches(definition, filter) {\n      return _.all(filter, function(val, key) {\n\n        // we want a == conversion here, to be able to catch\n        // undefined == false and friends\n        /* jshint -W116 */\n        return definition[key] == val;\n      });\n    }\n\n    return _.any(event.eventDefinitions, function(definition) {\n      return definition.$type === eventDefinitionType && matches(event, filter);\n    });\n  }\n\n  function isThrowEvent(event) {\n    return (event.$type === 'bpmn:IntermediateThrowEvent') || (event.$type === 'bpmn:EndEvent');\n  }\n\n  // hook onto canvas init event to initialize\n  // connection start/end markers on paper\n  events.on('canvas.init', function(event) {\n    var paper = event.paper;\n\n    initMarkers(paper);\n  });\n\n  this.drawShape = drawShape;\n  this.drawConnection = drawConnection;\n}\n\nBpmnRenderer.prototype = Object.create(DefaultRenderer.prototype);\n\n\nBpmnRenderer.$inject = [ 'eventBus', 'styles', 'pathMap' ];\n\nmodule.exports = BpmnRenderer;\n\n},{\"../util/Di\":11,\"diagram-js/lib/draw/Renderer\":51,\"diagram-js/lib/util/Text\":69}],4:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Map containing SVG paths needed by BpmnRenderer.\n */\n\nfunction PathMap(Snap) {\n\n  /**\n   * Contains a map of path elements\n   *\n   * <h1>Path definition</h1>\n   * A parameterized path is defined like this:\n   * <pre>\n   * 'GATEWAY_PARALLEL': {\n   *   d: 'm {mx},{my} {e.x0},0 0,{e.x1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} ' +\n          '-{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z',\n   *   height: 17.5,\n   *   width:  17.5,\n   *   heightElements: [2.5, 7.5],\n   *   widthElements: [2.5, 7.5]\n   * }\n   * </pre>\n   * <p>It's important to specify a correct <b>height and width</b> for the path as the scaling\n   * is based on the ratio between the specified height and width in this object and the\n   * height and width that is set as scale target (Note x,y coordinates will be scaled with\n   * individual ratios).</p>\n   * <p>The '<b>heightElements</b>' and '<b>widthElements</b>' array must contain the values that will be scaled.\n   * The scaling is based on the computed ratios.\n   * Coordinates on the y axis should be in the <b>heightElement</b>'s array, they will be scaled using\n   * the computed ratio coefficient.\n   * In the parameterized path the scaled values can be accessed through the 'e' object in {} brackets.\n   *   <ul>\n   *    <li>The values for the y axis can be accessed in the path string using {e.y0}, {e.y1}, ....</li>\n   *    <li>The values for the x axis can be accessed in the path string using {e.x0}, {e.x1}, ....</li>\n   *   </ul>\n   *   The numbers x0, x1 respectively y0, y1, ... map to the corresponding array index.\n   * </p>\n   */\n  this.pathMap = {\n    'EVENT_MESSAGE': {\n      d: 'm {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}',\n      height: 36,\n      width:  36,\n      heightElements: [6, 14],\n      widthElements: [10.5, 21]\n    },\n    'EVENT_SIGNAL': {\n      d: 'M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z',\n      height: 36,\n      width: 36,\n      heightElements: [18],\n      widthElements: [10, 20]\n    },\n    'EVENT_ESCALATION': {\n      d: 'm {mx},{my} c -{e.x1},{e.y0} -{e.x3},{e.y1} -{e.x5},{e.y4} {e.x1},-{e.y3} {e.x3},-{e.y5} {e.x5},-{e.y6} ' +\n        '{e.x0},{e.y3} {e.x2},{e.y5} {e.x4},{e.y6} -{e.x0},-{e.y0} -{e.x2},-{e.y1} -{e.x4},-{e.y4} z',\n      height: 36,\n      width: 36,\n      heightElements: [2.382, 4.764, 4.926, 6.589333, 7.146, 13.178667, 19.768],\n      widthElements: [2.463, 2.808, 4.926, 5.616, 7.389, 8.424]\n    },\n    'EVENT_CONDITIONAL': {\n      d: 'M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z ' +\n         'M {e.x2},{e.y3} l {e.x0},0 ' +\n         'M {e.x2},{e.y4} l {e.x0},0 ' +\n         'M {e.x2},{e.y5} l {e.x0},0 ' +\n         'M {e.x2},{e.y6} l {e.x0},0 ' +\n         'M {e.x2},{e.y7} l {e.x0},0 ' +\n         'M {e.x2},{e.y8} l {e.x0},0 ',\n      height: 36,\n      width:  36,\n      heightElements: [8.5, 14.5, 18, 11.5, 14.5, 17.5, 20.5, 23.5, 26.5],\n      widthElements:  [10.5, 14.5, 12.5]\n    },\n    'EVENT_LINK': {\n      d: 'm {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z',\n      height: 36,\n      width: 36,\n      heightElements: [4.4375, 6.75, 7.8125],\n      widthElements: [9.84375, 13.5]\n    },\n    'EVENT_ERROR': {\n      d: 'm {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z',\n      height: 36,\n      width: 36,\n      heightElements: [0.023, 8.737, 8.151, 16.564, 10.591, 8.714],\n      widthElements: [0.085, 6.672, 6.97, 4.273, 5.337, 6.636]\n    },\n    'EVENT_CANCEL_45': {\n      d: 'm {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 ' +\n        '0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z',\n      height: 36,\n      width: 36,\n      heightElements: [4.75, 8.5],\n      widthElements: [4.75, 8.5]\n    },\n    'EVENT_COMPENSATION': {\n      d: 'm {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x0},0 {e.x0},-{e.y0} 0,{e.y1} z',\n      height: 36,\n      width: 36,\n      heightElements: [5, 10],\n      widthElements: [10]\n    },\n    'EVENT_TIMER_WH': {\n      d: 'M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ',\n      height: 36,\n      width:  36,\n      heightElements: [10, 2],\n      widthElements: [3, 7]\n    },\n    'EVENT_TIMER_LINE': {\n      d:  'M {mx},{my} ' +\n          'm {e.x0},{e.y0} l -{e.x1},{e.y1} ',\n      height: 36,\n      width:  36,\n      heightElements: [10, 3],\n      widthElements: [0, 0]\n    },\n    'EVENT_MULTIPLE': {\n      d:'m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z',\n      height: 36,\n      width:  36,\n      heightElements: [6.28099, 12.56199],\n      widthElements: [3.1405, 9.42149, 12.56198]\n    },\n    'EVENT_PARALLEL_MULTIPLE': {\n      d:'m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} ' +\n        '-{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z',\n      height: 36,\n      width:  36,\n      heightElements: [2.56228, 7.68683],\n      widthElements: [2.56228, 7.68683]\n    },\n    'GATEWAY_EXCLUSIVE': {\n      d:'m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} ' +\n                    '{e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} ' +\n                    '{e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z',\n      height: 17.5,\n      width:  17.5,\n      heightElements: [8.5, 6.5312, -6.5312, -8.5],\n      widthElements:  [6.5, -6.5, 3, -3, 5, -5]\n    },\n    'GATEWAY_PARALLEL': {\n      d:'m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 ' +\n        '0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z',\n      height: 30,\n      width:  30,\n      heightElements: [5, 12.5],\n      widthElements: [5, 12.5]\n    },\n    'GATEWAY_EVENT_BASED': {\n      d:'m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z',\n      height: 11,\n      width:  11,\n      heightElements: [-6, 6, 12, -12],\n      widthElements: [9, -3, -12]\n    },\n    'GATEWAY_COMPLEX': {\n      d:'m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} ' +\n        '{e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} ' +\n        '{e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} ' +\n        '-{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z',\n      height: 17.125,\n      width:  17.125,\n      heightElements: [4.875, 3.4375, 2.125, 3],\n      widthElements: [3.4375, 2.125, 4.875, 3]\n    },\n    'DATA_OBJECT_PATH': {\n      d:'m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0',\n      height: 61,\n      width:  51,\n      heightElements: [10, 50, 60],\n      widthElements: [10, 40, 50, 60]\n    },\n    'DATA_OBJECT_COLLECTION_PATH': {\n      d:'m {mx}, {my} ' +\n        'm  0 15  l 0 -15 ' +\n        'm  4 15  l 0 -15 ' +\n        'm  4 15  l 0 -15 ',\n      height: 61,\n      width:  51,\n      heightElements: [12],\n      widthElements: [1, 6, 12, 15]\n    },\n    'DATA_ARROW': {\n      d:'m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z',\n      height: 61,\n      width:  51,\n      heightElements: [],\n      widthElements: []\n    },\n    'DATA_STORE': {\n      d:'m  {mx},{my} ' +\n        'l  0,{e.y2} ' +\n        'c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 ' +\n        'l  0,-{e.y2} ' +\n        'c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0' +\n        'c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 ' +\n        'm  -{e.x2},{e.y0}' +\n        'c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0' +\n        'm  -{e.x2},{e.y0}' +\n        'c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0',\n      height: 61,\n      width:  61,\n      heightElements: [7, 10, 45],\n      widthElements:  [2, 58, 60]\n    },\n    'TEXT_ANNOTATION': {\n      d: 'm {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0',\n      height: 30,\n      width: 10,\n      heightElements: [30],\n      widthElements: [10]\n    },\n    'MARKER_SUB_PROCESS': {\n      d: 'm{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0',\n      height: 10,\n      width: 10,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_PARALLEL': {\n      d: 'm{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10',\n      height: 10,\n      width: 10,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_SEQUENTIAL': {\n      d: 'm{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0',\n      height: 10,\n      width: 10,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_COMPENSATION': {\n      d: 'm {mx},{my} 8,-5 0,10 z m 9,0 8,-5 0,10 z',\n      height: 10,\n      width: 21,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_LOOP': {\n      d: 'm {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 ' +\n        '-6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 ' +\n        '0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 ' +\n        'l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902',\n      height: 13.9,\n      width: 13.7,\n      heightElements: [],\n      widthElements: []\n    },\n    'MARKER_ADHOC': {\n      d: 'm {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 ' +\n        '3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 ' +\n        '1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 ' +\n        '-3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 ' +\n        '-2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z',\n      height: 4,\n      width: 15,\n      heightElements: [],\n      widthElements: []\n    },\n    'TASK_TYPE_SEND': {\n      d: 'm {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}',\n      height: 14,\n      width:  21,\n      heightElements: [6, 14],\n      widthElements: [10.5, 21]\n    },\n    'TASK_TYPE_SCRIPT': {\n      d: 'm {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 ' +\n        'c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z ' +\n        'm -7,-12 l 5,0 ' +\n        'm -4.5,3 l 4.5,0 ' +\n        'm -3,3 l 5,0' +\n        'm -4,3 l 5,0',\n      height: 15,\n      width:  12.6,\n      heightElements: [6, 14],\n      widthElements: [10.5, 21]\n    },\n    'TASK_TYPE_USER_1': {\n      d: 'm {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 ' +\n        '-4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 ' +\n        '0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 ' +\n        'h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 z' +\n        'm -8,6 l 0,5.5 m 11,0 l 0,-5'\n    },\n    'TASK_TYPE_USER_2': {\n      d: 'm {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 ' +\n        '-2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 '\n    },\n    'TASK_TYPE_USER_3': {\n      d: 'm {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 ' +\n        '4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 ' +\n        '-4.20799998,3.36699999 -4.20699998,4.34799999 z'\n    },\n    'TASK_TYPE_MANUAL': {\n      d: 'm {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 ' +\n        '-0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 ' +\n        '0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 ' +\n        '-1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 ' +\n        '0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 ' +\n        '-10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 ' +\n        '2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 ' +\n        '-0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 ' +\n        '-1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 ' +\n        '-0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 ' +\n        '0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 ' +\n        '-5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z'\n    },\n    'TASK_TYPE_INSTANTIATING_SEND': {\n      d: 'm {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6'\n    },\n    'TASK_TYPE_SERVICE': {\n      d: 'm {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 ' +\n        '0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 ' +\n        '-1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 ' +\n        'v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 ' +\n        '-0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 ' +\n        '-1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 ' +\n        'h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 ' +\n        '-0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 ' +\n        'c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 ' +\n        'l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 ' +\n        '0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 ' +\n        'c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z ' +\n        'm 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 ' +\n        '0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 ' +\n        '0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z'\n    },\n    'TASK_TYPE_SERVICE_FILL': {\n      d: 'm {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 ' +\n        '0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 ' +\n        '0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z'\n    },\n    'TASK_TYPE_BUSINESS_RULE_HEADER': {\n      d: 'm {mx},{my} 0,4 20,0 0,-4 z'\n    },\n    'TASK_TYPE_BUSINESS_RULE_MAIN': {\n      d: 'm {mx},{my} 0,12 20,0 0,-12 z' +\n        'm 0,8 l 20,0 ' +\n        'm -13,-4 l 0,8'\n    },\n    'MESSAGE_FLOW_MARKER': {\n      d: 'm {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6'\n    }\n  };\n\n  this.getRawPath = function getRawPath(pathId) {\n    return this.pathMap[pathId].d;\n  };\n\n  /**\n   * Scales the path to the given height and width.\n   * <h1>Use case</h1>\n   * <p>Use case is to scale the content of elements (event, gateways) based\n   * on the element bounding box's size.\n   * </p>\n   * <h1>Why not transform</h1>\n   * <p>Scaling a path with transform() will also scale the stroke and IE does not support\n   * the option 'non-scaling-stroke' to prevent this.\n   * Also there are use cases where only some parts of a path should be\n   * scaled.</p>\n   *\n   * @param {String} pathId The ID of the path.\n   * @param {Object} param <p>\n   *   Example param object scales the path to 60% size of the container (data.width, data.height).\n   *   <pre>\n   *   {\n   *     xScaleFactor: 0.6,\n   *     yScaleFactor:0.6,\n   *     containerWidth: data.width,\n   *     containerHeight: data.height,\n   *     position: {\n   *       mx: 0.46,\n   *       my: 0.2,\n   *     }\n   *   }\n   *   </pre>\n   *   <ul>\n   *    <li>targetpathwidth = xScaleFactor * containerWidth</li>\n   *    <li>targetpathheight = yScaleFactor * containerHeight</li>\n   *    <li>Position is used to set the starting coordinate of the path. M is computed:\n    *    <ul>\n    *      <li>position.x * containerWidth</li>\n    *      <li>position.y * containerHeight</li>\n    *    </ul>\n    *    Center of the container <pre> position: {\n   *       mx: 0.5,\n   *       my: 0.5,\n   *     }</pre>\n   *     Upper left corner of the container\n   *     <pre> position: {\n   *       mx: 0.0,\n   *       my: 0.0,\n   *     }</pre>\n   *    </li>\n   *   </ul>\n   * </p>\n   *\n   */\n  this.getScaledPath = function getScaledPath(pathId, param) {\n    var rawPath = this.pathMap[pathId];\n\n    // positioning\n    // compute the start point of the path\n    var mx, my;\n\n    if(!!param.abspos) {\n      mx = param.abspos.x;\n      my = param.abspos.y;\n    } else {\n      mx = param.containerWidth * param.position.mx;\n      my = param.containerHeight * param.position.my;\n    }\n\n    var coordinates = {}; //map for the scaled coordinates\n    if(param.position) {\n\n      // path\n      var heightRatio = (param.containerHeight / rawPath.height) * param.yScaleFactor;\n      var widthRatio = (param.containerWidth / rawPath.width) * param.xScaleFactor;\n\n\n      //Apply height ratio\n      for (var heightIndex = 0; heightIndex < rawPath.heightElements.length; heightIndex++) {\n        coordinates['y' + heightIndex] = rawPath.heightElements[heightIndex] * heightRatio;\n      }\n\n      //Apply width ratio\n      for (var widthIndex = 0; widthIndex < rawPath.widthElements.length; widthIndex++) {\n        coordinates['x' + widthIndex] = rawPath.widthElements[widthIndex] * widthRatio;\n      }\n    }\n\n    //Apply value to raw path\n    var path = Snap.format(\n      rawPath.d, {\n        mx: mx,\n        my: my,\n        e: coordinates\n      }\n    );\n    return path;\n  };\n}\n\n\nPathMap.$inject = [ 'snap' ];\n\nmodule.exports = PathMap;\n\n},{}],5:[function(_dereq_,module,exports){\nmodule.exports = {\n  renderer: [ 'type', _dereq_('./BpmnRenderer') ],\n  pathMap: [ 'type', _dereq_('./PathMap') ]\n};\n},{\"./BpmnRenderer\":3,\"./PathMap\":4}],6:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar LabelUtil = _dereq_('../util/Label');\n\nvar hasExternalLabel = LabelUtil.hasExternalLabel,\n    getExternalLabelBounds = LabelUtil.getExternalLabelBounds,\n    isExpanded = _dereq_('../util/Di').isExpanded,\n    elementToString = _dereq_('./Util').elementToString;\n\n\nfunction elementData(semantic, attrs) {\n  return _.extend({\n    id: semantic.id,\n    type: semantic.$type,\n    businessObject: semantic\n  }, attrs);\n}\n\nfunction collectWaypoints(waypoints) {\n  return _.collect(waypoints, function(p) {\n    return { x: p.x, y: p.y };\n  });\n}\n\n\n/**\n * An importer that adds bpmn elements to the canvas\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {ElementFactory} elementFactory\n * @param {ElementRegistry} elementRegistry\n */\nfunction BpmnImporter(eventBus, canvas, elementFactory, elementRegistry) {\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n\n  this._elementFactory = elementFactory;\n  this._elementRegistry = elementRegistry;\n}\n\nBpmnImporter.$inject = [ 'eventBus', 'canvas', 'elementFactory', 'elementRegistry' ];\n\nmodule.exports = BpmnImporter;\n\n\n/**\n * Add bpmn element (semantic) to the canvas onto the\n * specified parent shape.\n */\nBpmnImporter.prototype.add = function(semantic, parentElement) {\n\n  var di = semantic.di,\n      element;\n\n  // ROOT ELEMENT\n  // handle the special case that we deal with a\n  // invisible root element (process or collaboration)\n  if (di.$instanceOf('bpmndi:BPMNPlane')) {\n\n    // add a virtual element (not being drawn)\n    element = this._elementFactory.createRoot(elementData(semantic));\n  }\n\n  // SHAPE\n  else if (di.$instanceOf('bpmndi:BPMNShape')) {\n\n    var collapsed = !isExpanded(semantic);\n    var hidden = parentElement && (parentElement.hidden || parentElement.collapsed);\n\n    var bounds = semantic.di.bounds;\n\n    element = this._elementFactory.createShape(elementData(semantic, {\n      collapsed: collapsed,\n      hidden: hidden,\n      x: bounds.x,\n      y: bounds.y,\n      width: bounds.width,\n      height: bounds.height\n    }));\n\n    this._canvas.addShape(element, parentElement);\n  }\n\n  // CONNECTION\n  else if (di.$instanceOf('bpmndi:BPMNEdge')) {\n\n    var source = this._getSource(semantic),\n        target = this._getTarget(semantic);\n\n    element = this._elementFactory.createConnection(elementData(semantic, {\n      source: source,\n      target: target,\n      waypoints: collectWaypoints(semantic.di.waypoint)\n    }));\n\n    this._canvas.addConnection(element, parentElement);\n  } else {\n    throw new Error('unknown di ' + elementToString(di) + ' for element ' + elementToString(semantic));\n  }\n\n  // (optional) LABEL\n  if (hasExternalLabel(semantic)) {\n    this.addLabel(semantic, element);\n  }\n\n  this._eventBus.fire('bpmnElement.added', { element: element });\n\n  return element;\n};\n\n\n/**\n * add label for an element\n */\nBpmnImporter.prototype.addLabel = function(semantic, element) {\n  var bounds = getExternalLabelBounds(semantic, element);\n\n  var label = this._elementFactory.createLabel(elementData(semantic, {\n    id: semantic.id + '_label',\n    labelTarget: element,\n    type: 'label',\n    hidden: element.hidden,\n    x: bounds.x,\n    y: bounds.y,\n    width: bounds.width,\n    height: bounds.height\n  }));\n\n  return this._canvas.addShape(label, element.parent);\n};\n\n/**\n * Return the drawn connection end based on the given side.\n *\n * @throws {Error} if the end is not yet drawn\n */\nBpmnImporter.prototype._getEnd = function(semantic, side) {\n\n  var element,\n      refSemantic,\n      refIsParent,\n      type = semantic.$type;\n\n  refSemantic = semantic[side + 'Ref'];\n\n  // handle mysterious isMany DataAssociation#sourceRef\n  if (side === 'source' && type === 'bpmn:DataInputAssociation') {\n    refSemantic = refSemantic && refSemantic[0];\n  }\n\n  // fix source / target for DataInputAssociation / DataOutputAssociation\n  if (side === 'source' && type === 'bpmn:DataOutputAssociation' ||\n      side === 'target' && type === 'bpmn:DataInputAssociation') {\n\n    refSemantic = semantic.$parent;\n  }\n\n  element = refSemantic && this._getElement(refSemantic);\n\n  if (element) {\n    return element;\n  }\n\n  if (refSemantic) {\n    throw new Error(\n      'element ' + elementToString(refSemantic) + ' referenced by ' +\n      elementToString(semantic) + '#' + side + 'Ref not yet drawn');\n  } else {\n    throw new Error(elementToString(semantic) + '#' + side + 'Ref not specified');\n  }\n};\n\nBpmnImporter.prototype._getSource = function(semantic) {\n  return this._getEnd(semantic, 'source');\n};\n\nBpmnImporter.prototype._getTarget = function(semantic) {\n  return this._getEnd(semantic, 'target');\n};\n\n\nBpmnImporter.prototype._getElement = function(semantic) {\n  return this._elementRegistry.getById(semantic.id);\n};\n},{\"../util/Di\":11,\"../util/Label\":12,\"./Util\":9}],7:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Refs = _dereq_('object-refs');\n\nvar elementToString = _dereq_('./Util').elementToString;\n\nvar diRefs = new Refs({ name: 'bpmnElement', enumerable: true }, { name: 'di' });\n\n\n/**\n * Find a suitable display candidate for definitions where the DI does not\n * correctly specify one.\n */\nfunction findDisplayCandidate(definitions) {\n  return _.find(definitions.rootElements, function(e) {\n    return e.$instanceOf('bpmn:Process') || e.$instanceOf('bpmn:Collaboration');\n  });\n}\n\n\nfunction BpmnTreeWalker(handler) {\n\n  // list of containers already walked\n  var handledProcesses = [];\n\n  // list of elements to handle deferred to ensure\n  // prerequisites are drawn\n  var deferred = [];\n\n  ///// Helpers /////////////////////////////////\n\n  function contextual(fn, ctx) {\n    return function(e) {\n      fn(e, ctx);\n    };\n  }\n\n  function is(element, type) {\n    return element.$instanceOf(type);\n  }\n\n  function visit(element, ctx) {\n\n    var gfx = element.gfx;\n\n    // avoid multiple rendering of elements\n    if (gfx) {\n      throw new Error('already rendered ' + elementToString(element));\n    }\n\n    // call handler\n    return handler.element(element, ctx);\n  }\n\n  function visitRoot(element, diagram) {\n    return handler.root(element, diagram);\n  }\n\n  function visitIfDi(element, ctx) {\n    try {\n      return element.di && visit(element, ctx);\n    } catch (e) {\n      logError(e.message, { element: element, error: e });\n    }\n  }\n\n  function logError(message, context) {\n    handler.error(message, context);\n  }\n\n  ////// DI handling ////////////////////////////\n\n  function registerDi(di) {\n    var bpmnElement = di.bpmnElement;\n\n    if (bpmnElement) {\n      diRefs.bind(bpmnElement, 'di');\n      bpmnElement.di = di;\n    } else {\n      logError('no bpmnElement referenced in ' + elementToString(di), { element: di });\n    }\n  }\n\n  function handleDiagram(diagram) {\n    handlePlane(diagram.plane);\n  }\n\n  function handlePlane(plane) {\n    registerDi(plane);\n\n    _.forEach(plane.planeElement, handlePlaneElement);\n  }\n\n  function handlePlaneElement(planeElement) {\n    registerDi(planeElement);\n  }\n\n\n  ////// Semantic handling //////////////////////\n\n  function handleDefinitions(definitions, diagram) {\n    // make sure we walk the correct bpmnElement\n\n    var diagrams = definitions.diagrams;\n\n    if (diagram && diagrams.indexOf(diagram) === -1) {\n      throw new Error('diagram not part of bpmn:Definitions');\n    }\n\n    if (!diagram && diagrams && diagrams.length) {\n      diagram = diagrams[0];\n    }\n\n    // no diagram -> nothing to import\n    if (!diagram) {\n      return;\n    }\n\n    // load DI from selected diagram only\n    handleDiagram(diagram);\n\n\n    var plane = diagram.plane;\n\n    if (!plane) {\n      throw new Error('no plane for ' + elementToString(diagram));\n    }\n\n\n    var rootElement = plane.bpmnElement;\n\n    // ensure we default to a suitable display candidate (process or collaboration),\n    // even if non is specified in DI\n    if (!rootElement) {\n      rootElement = findDisplayCandidate(definitions);\n\n      if (!rootElement) {\n        throw new Error('do not know what to display');\n      } else {\n\n        logError('correcting missing bpmnElement on ' + elementToString(plane) + ' to ' + elementToString(rootElement));\n\n        // correct DI on the fly\n        plane.bpmnElement = rootElement;\n        registerDi(plane);\n      }\n    }\n\n\n    var ctx = visitRoot(rootElement, plane);\n\n    if (is(rootElement, 'bpmn:Process')) {\n      handleProcess(rootElement, ctx);\n    } else if (is(rootElement, 'bpmn:Collaboration')) {\n      handleCollaboration(rootElement, ctx);\n\n      // force drawing of everything not yet drawn that is part of the target DI\n      handleUnhandledProcesses(definitions.rootElements, ctx);\n    } else {\n      throw new Error('unsupported bpmnElement for ' + elementToString(plane) + ' : ' + elementToString(rootElement));\n    }\n\n    // handle all deferred elements\n    handleDeferred(deferred);\n  }\n\n  function handleDeferred(deferred) {\n    _.forEach(deferred, function(d) { d(); });\n  }\n\n  function handleProcess(process, context) {\n    handleFlowElementsContainer(process, context);\n    handleIoSpecification(process.ioSpecification, context);\n\n    handleArtifacts(process.artifacts, context);\n\n    // log process handled\n    handledProcesses.push(process);\n  }\n\n  function handleUnhandledProcesses(rootElements) {\n\n    // walk through all processes that have not yet been drawn and draw them\n    // if they contain lanes with DI information.\n    // we do this to pass the free-floating lane test cases in the MIWG test suite\n    var processes = _.filter(rootElements, function(e) {\n      return is(e, 'bpmn:Process') && e.laneSets && handledProcesses.indexOf(e) === -1;\n    });\n\n    processes.forEach(contextual(handleProcess));\n  }\n\n  function handleMessageFlow(messageFlow, context) {\n    visitIfDi(messageFlow, context);\n  }\n\n  function handleMessageFlows(messageFlows, context) {\n    _.forEach(messageFlows, contextual(handleMessageFlow, context));\n  }\n\n  function handleDataAssociation(association, context) {\n    visitIfDi(association, context);\n  }\n\n  function handleDataInput(dataInput, context) {\n    visitIfDi(dataInput, context);\n  }\n\n  function handleDataOutput(dataOutput, context) {\n    visitIfDi(dataOutput, context);\n  }\n\n  function handleArtifact(artifact, context) {\n\n    // bpmn:TextAnnotation\n    // bpmn:Group\n    // bpmn:Association\n\n    visitIfDi(artifact, context);\n  }\n\n  function handleArtifacts(artifacts, context) {\n\n    _.forEach(artifacts, function(e) {\n      if (is(e, 'bpmn:Association')) {\n        deferred.push(function() {\n          handleArtifact(e, context);\n        });\n      } else {\n        handleArtifact(e, context);\n      }\n    });\n  }\n\n  function handleIoSpecification(ioSpecification, context) {\n\n    if (!ioSpecification) {\n      return;\n    }\n\n    _.forEach(ioSpecification.dataInputs, contextual(handleDataInput, context));\n    _.forEach(ioSpecification.dataOutputs, contextual(handleDataOutput, context));\n  }\n\n  function handleSubProcess(subProcess, context) {\n    handleFlowElementsContainer(subProcess, context);\n    handleArtifacts(subProcess.artifacts, context);\n  }\n\n  function handleFlowNode(flowNode, context) {\n    var childCtx = visitIfDi(flowNode, context);\n\n    if (is(flowNode, 'bpmn:SubProcess')) {\n      handleSubProcess(flowNode, childCtx || context);\n    }\n  }\n\n  function handleSequenceFlow(sequenceFlow, context) {\n    visitIfDi(sequenceFlow, context);\n  }\n\n  function handleDataElement(dataObject, context) {\n    visitIfDi(dataObject, context);\n  }\n\n  function handleBoundaryEvent(dataObject, context) {\n    visitIfDi(dataObject, context);\n  }\n\n  function handleLane(lane, context) {\n    var newContext = visitIfDi(lane, context);\n\n    if (lane.childLaneSet) {\n      handleLaneSet(lane.childLaneSet, newContext || context);\n    } else {\n      var filterList = _.filter(lane.flowNodeRef, function(e) {\n        return e.$type !== 'bpmn:BoundaryEvent';\n      });\n      handleFlowElements(filterList, newContext || context);\n    }\n  }\n\n  function handleLaneSet(laneSet, context) {\n    _.forEach(laneSet.lanes, contextual(handleLane, context));\n  }\n\n  function handleLaneSets(laneSets, context) {\n    _.forEach(laneSets, contextual(handleLaneSet, context));\n  }\n\n  function handleFlowElementsContainer(container, context) {\n\n    if (container.laneSets) {\n      handleLaneSets(container.laneSets, context);\n      handleNonFlowNodes(container.flowElements);\n    } else {\n      handleFlowElements(container.flowElements, context);\n    }\n  }\n\n  function handleNonFlowNodes(flowElements, context) {\n    _.forEach(flowElements, function(e) {\n      if (is(e, 'bpmn:SequenceFlow')) {\n        deferred.push(function() {\n          handleSequenceFlow(e, context);\n        });\n      } else if (is(e, 'bpmn:BoundaryEvent')) {\n        deferred.unshift(function() {\n          handleBoundaryEvent(e, context);\n        });\n      } else if (is(e, 'bpmn:DataObject')) {\n        // SKIP (assume correct referencing via DataObjectReference)\n      } else if (is(e, 'bpmn:DataStoreReference')) {\n        handleDataElement(e, context);\n      } else if (is(e, 'bpmn:DataObjectReference')) {\n        handleDataElement(e, context);\n      }\n    });\n  }\n\n  function handleFlowElements(flowElements, context) {\n    _.forEach(flowElements, function(e) {\n      if (is(e, 'bpmn:SequenceFlow')) {\n        deferred.push(function() {\n          handleSequenceFlow(e, context);\n        });\n      } else if (is(e, 'bpmn:BoundaryEvent')) {\n        deferred.unshift(function() {\n          handleBoundaryEvent(e, context);\n        });\n      } else if (is(e, 'bpmn:FlowNode')) {\n        handleFlowNode(e, context);\n\n        if (is(e, 'bpmn:Activity')) {\n\n          handleIoSpecification(e.ioSpecification, context);\n\n          // defer handling of associations\n          deferred.push(function() {\n            _.forEach(e.dataInputAssociations, contextual(handleDataAssociation, context));\n            _.forEach(e.dataOutputAssociations, contextual(handleDataAssociation, context));\n          });\n        }\n      } else if (is(e, 'bpmn:DataObject')) {\n        // SKIP (assume correct referencing via DataObjectReference)\n      } else if (is(e, 'bpmn:DataStoreReference')) {\n        handleDataElement(e, context);\n      } else if (is(e, 'bpmn:DataObjectReference')) {\n        handleDataElement(e, context);\n      } else {\n        logError(\n          'unrecognized flowElement ' + elementToString(e) + ' in context ' +\n          (context ? elementToString(context.businessObject) : null),\n          { element: e, context: context });\n      }\n    });\n  }\n\n  function handleParticipant(participant, context) {\n    var newCtx = visitIfDi(participant, context);\n\n    var process = participant.processRef;\n    if (process) {\n      handleProcess(process, newCtx || context);\n    }\n  }\n\n  function handleCollaboration(collaboration) {\n\n    _.forEach(collaboration.participants, contextual(handleParticipant));\n\n    handleArtifacts(collaboration.artifacts);\n\n    handleMessageFlows(collaboration.messageFlows);\n  }\n\n\n  ///// API ////////////////////////////////\n\n  return {\n    handleDefinitions: handleDefinitions\n  };\n}\n\nmodule.exports = BpmnTreeWalker;\n},{\"./Util\":9,\"object-refs\":77}],8:[function(_dereq_,module,exports){\n'use strict';\n\nvar BpmnTreeWalker = _dereq_('./BpmnTreeWalker');\n\n\n/**\n * Import the definitions into a diagram.\n *\n * Errors and warnings are reported through the specified callback.\n *\n * @param  {Diagram} diagram\n * @param  {ModdleElement} definitions\n * @param  {Function} done the callback, invoked with (err, [ warning ]) once the import is done\n */\nfunction importBpmnDiagram(diagram, definitions, done) {\n\n  var importer = diagram.get('bpmnImporter'),\n      eventBus = diagram.get('eventBus');\n\n  var error,\n      warnings = [];\n\n  function parse(definitions) {\n\n    var visitor = {\n\n      root: function(element) {\n        return importer.add(element);\n      },\n\n      element: function(element, parentShape) {\n        return importer.add(element, parentShape);\n      },\n\n      error: function(message, context) {\n        warnings.push({ message: message, context: context });\n      }\n    };\n\n    var walker = new BpmnTreeWalker(visitor);\n\n    // import\n    walker.handleDefinitions(definitions);\n  }\n\n  eventBus.fire('import.start');\n\n  try {\n    parse(definitions);\n  } catch (e) {\n    error = e;\n  }\n\n  eventBus.fire(error ? 'import.error' : 'import.success', { error: error, warnings: warnings });\n  done(error, warnings);\n}\n\nmodule.exports.importBpmnDiagram = importBpmnDiagram;\n},{\"./BpmnTreeWalker\":7}],9:[function(_dereq_,module,exports){\nmodule.exports.elementToString = function(e) {\n  if (!e) {\n    return '<null>';\n  }\n\n  return '<' + e.$type + (e.id ? ' id=\"' + e.id : '') + '\" />';\n};\n},{}],10:[function(_dereq_,module,exports){\nmodule.exports = {\n  bpmnImporter: [ 'type', _dereq_('./BpmnImporter') ]\n};\n},{\"./BpmnImporter\":6}],11:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports.isExpandedPool = function(semantic) {\n  return !!semantic.processRef;\n};\n\nmodule.exports.isExpanded = function(semantic) {\n\n  // Is type expanded by default?\n  var isDefaultExpanded = !(semantic.$instanceOf('bpmn:SubProcess') || semantic.$instanceOf('bpmn:CallActivity'));\n\n  // For non default expanded types -> evaluate the expanded flag\n  var isExpanded = isDefaultExpanded || semantic.di.isExpanded;\n\n  return isExpanded;\n};\n\n},{}],12:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\n\nvar DEFAULT_LABEL_SIZE = module.exports.DEFAULT_LABEL_SIZE = {\n  width: 90,\n  height: 20\n};\n\n\n/**\n * Returns true if the given semantic has an external label\n *\n * @param {BpmnElement} semantic\n * @return {Boolean} true if has label\n */\nmodule.exports.hasExternalLabel = function(semantic) {\n\n  return semantic.$instanceOf('bpmn:Event') ||\n         semantic.$instanceOf('bpmn:Gateway') ||\n         semantic.$instanceOf('bpmn:DataStoreReference') ||\n         semantic.$instanceOf('bpmn:DataObjectReference') ||\n         semantic.$instanceOf('bpmn:SequenceFlow') ||\n         semantic.$instanceOf('bpmn:MessageFlow');\n};\n\n\n/**\n * Get the middle of a number of waypoints\n *\n * @param  {Array<Point>} waypoints\n * @return {Point} the mid point\n */\nvar getWaypointsMid = module.exports.getWaypointsMid = function(waypoints) {\n\n  var mid = waypoints.length / 2 - 1;\n\n  var first = waypoints[Math.floor(mid)];\n  var second = waypoints[Math.ceil(mid + 0.01)];\n\n  return {\n    x: first.x + (second.x - first.x) / 2,\n    y: first.y + (second.y - first.y) / 2\n  };\n};\n\n\nvar getExternalLabelMid = module.exports.getExternalLabelMid = function(element) {\n\n  if (element.waypoints) {\n    return getWaypointsMid(element.waypoints);\n  } else {\n    return {\n      x: element.x + element.width / 2,\n      y: element.y + element.height + DEFAULT_LABEL_SIZE.height / 2\n    };\n  }\n};\n\n/**\n * Returns the bounds of an elements label, parsed from the elements DI or\n * generated from its bounds.\n *\n * @param {BpmnElement} semantic\n * @param {djs.model.Base} element\n */\nmodule.exports.getExternalLabelBounds = function(semantic, element) {\n\n  var mid,\n      size,\n      bounds,\n      di = semantic.di,\n      label = di.label;\n\n  if (label && label.bounds) {\n    bounds = label.bounds;\n\n    size = {\n      width: Math.max(DEFAULT_LABEL_SIZE.width, bounds.width),\n      height: bounds.height\n    };\n\n    mid = {\n      x: bounds.x + bounds.width / 2,\n      y: bounds.y + bounds.height / 2\n    };\n  } else {\n\n    mid = getExternalLabelMid(element);\n\n    size = DEFAULT_LABEL_SIZE;\n  }\n\n  return _.extend({\n    x: mid.x - size.width / 2,\n    y: mid.y - size.height / 2\n  }, size);\n};\n},{}],13:[function(_dereq_,module,exports){\nmodule.exports = _dereq_('./lib/simple');\n},{\"./lib/simple\":15}],14:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Moddle = _dereq_('moddle'),\n    ModdleXml = _dereq_('moddle-xml');\n\n\nfunction createModel(packages) {\n  return new Moddle(packages);\n}\n\n/**\n * A sub class of {@link Moddle} with support for import and export of BPMN 2.0 xml files.\n *\n * @class BpmnModdle\n * @extends Moddle\n *\n * @param {Object|Array} packages to use for instantiating the model\n * @param {Object} [options] additional options to pass over\n */\nfunction BpmnModdle(packages, options) {\n  Moddle.call(this, packages, options);\n}\n\nBpmnModdle.prototype = Object.create(Moddle.prototype);\n\nmodule.exports = BpmnModdle;\n\n\n/**\n * Instantiates a BPMN model tree from a given xml string.\n *\n * @param {String}   xmlStr\n * @param {String}   [typeName]   name of the root element, defaults to 'bpmn:Definitions'\n * @param {Object}   [options]    options to pass to the underlying reader\n * @param {Function} done         callback that is invoked with (err, result, parseContext) once the import completes\n */\nBpmnModdle.prototype.fromXML = function(xmlStr, typeName, options, done) {\n\n  if (!_.isString(typeName)) {\n    done = options;\n    options = typeName;\n    typeName = 'bpmn:Definitions';\n  }\n\n  if (_.isFunction(options)) {\n    done = options;\n    options = {};\n  }\n\n  var reader = new ModdleXml.Reader(this, options);\n  var rootHandler = reader.handler(typeName);\n\n  reader.fromXML(xmlStr, rootHandler, done);\n};\n\n\n/**\n * Serializes a BPMN 2.0 object tree to XML.\n *\n * @param {String}   element    the root element, typically an instance of `bpmn:Definitions`\n * @param {Object}   [options]  to pass to the underlying writer\n * @param {Function} done       callback invoked with (err, xmlStr) once the import completes\n */\nBpmnModdle.prototype.toXML = function(element, options, done) {\n\n  if (_.isFunction(options)) {\n    done = options;\n    options = {};\n  }\n\n  var writer = new ModdleXml.Writer(options);\n  try {\n    var result = writer.toXML(element);\n    done(null, result);\n  } catch (e) {\n    done(e);\n  }\n};\n\n},{\"moddle\":30,\"moddle-xml\":16}],15:[function(_dereq_,module,exports){\nvar BpmnModdle = _dereq_('./bpmn-moddle');\n\nvar packages = {\n  bpmn: _dereq_('../resources/bpmn/json/bpmn.json'),\n  bpmndi: _dereq_('../resources/bpmn/json/bpmndi.json'),\n  dc: _dereq_('../resources/bpmn/json/dc.json'),\n  di: _dereq_('../resources/bpmn/json/di.json')\n};\n\nmodule.exports = function() {\n  return new BpmnModdle(packages);\n};\n},{\"../resources/bpmn/json/bpmn.json\":39,\"../resources/bpmn/json/bpmndi.json\":40,\"../resources/bpmn/json/dc.json\":41,\"../resources/bpmn/json/di.json\":42,\"./bpmn-moddle\":14}],16:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports.Reader = _dereq_('./lib/Reader');\nmodule.exports.Writer = _dereq_('./lib/Writer');\n},{\"./lib/Reader\":17,\"./lib/Writer\":18}],17:[function(_dereq_,module,exports){\n'use strict';\n\nvar sax = (window.sax),\n    _ = (window._);\n\nvar common = _dereq_('./common'),\n    Types = _dereq_('moddle').types,\n    Stack = _dereq_('tiny-stack'),\n    parseNameNs = _dereq_('moddle').ns.parseName,\n    aliasToName = common.aliasToName;\n\n\nfunction parseNodeAttributes(node) {\n  var nodeAttrs = node.attributes;\n\n  return _.reduce(nodeAttrs, function(result, v, k) {\n    var name, ns;\n\n    if (!v.local) {\n      name = v.prefix;\n    } else {\n      ns = parseNameNs(v.name, v.prefix);\n      name = ns.name;\n    }\n\n    result[name] = v.value;\n    return result;\n  }, {});\n}\n\n/**\n * Normalizes namespaces for a node given an optional default namespace and a\n * number of mappings from uris to default prefixes.\n *\n * @param  {XmlNode} node\n * @param  {Model} model the model containing all registered namespaces\n * @param  {Uri} defaultNsUri\n */\nfunction normalizeNamespaces(node, model, defaultNsUri) {\n  var uri, childUri, prefix;\n\n  uri = node.uri || defaultNsUri;\n\n  if (uri) {\n    var pkg = model.getPackage(uri);\n\n    if (pkg) {\n      prefix = pkg.prefix;\n    } else {\n      prefix = node.prefix;\n    }\n\n    node.prefix = prefix;\n    node.uri = uri;\n  }\n\n  _.forEach(node.attributes, function(attr) {\n    normalizeNamespaces(attr, model, null);\n  });\n}\n\n/**\n * A parse context.\n *\n * @class\n *\n * @param {ElementHandler} parseRoot the root handler for parsing a document\n */\nfunction Context(parseRoot) {\n\n  var elementsById = {};\n  var references = [];\n\n  var warnings = [];\n\n  this.addReference = function(reference) {\n    references.push(reference);\n  };\n\n  this.addElement = function(id, element) {\n\n    if (!id || !element) {\n      throw new Error('[xml-reader] id or ctx must not be null');\n    }\n\n    elementsById[id] = element;\n  };\n\n  this.addWarning = function (w) {\n    warnings.push(w);\n  };\n\n  this.warnings = warnings;\n  this.references = references;\n\n  this.elementsById = elementsById;\n\n  this.parseRoot = parseRoot;\n}\n\n\nfunction BaseHandler() {}\n\nBaseHandler.prototype.handleEnd = function() {};\nBaseHandler.prototype.handleText = function() {};\nBaseHandler.prototype.handleNode = function() {};\n\nfunction BodyHandler() {}\n\nBodyHandler.prototype = new BaseHandler();\n\nBodyHandler.prototype.handleText = function(text) {\n  this.body = (this.body || '') + text;\n};\n\nfunction ReferenceHandler(property, context) {\n  this.property = property;\n  this.context = context;\n}\n\nReferenceHandler.prototype = new BodyHandler();\n\nReferenceHandler.prototype.handleNode = function(node) {\n\n  if (this.element) {\n    throw new Error('expected no sub nodes');\n  } else {\n    this.element = this.createReference(node);\n  }\n\n  return this;\n};\n\nReferenceHandler.prototype.handleEnd = function() {\n  this.element.id = this.body;\n};\n\nReferenceHandler.prototype.createReference = function() {\n  return {\n    property: this.property.ns.name,\n    id: ''\n  };\n};\n\nfunction ValueHandler(propertyDesc, element) {\n  this.element = element;\n  this.propertyDesc = propertyDesc;\n}\n\nValueHandler.prototype = new BodyHandler();\n\nValueHandler.prototype.handleEnd = function() {\n\n  var value = this.body,\n      element = this.element,\n      propertyDesc = this.propertyDesc;\n\n  value = Types.coerceType(propertyDesc.type, value);\n\n  if (propertyDesc.isMany) {\n    element.get(propertyDesc.name).push(value);\n  } else {\n    element.set(propertyDesc.name, value);\n  }\n};\n\n\nfunction BaseElementHandler() {}\n\nBaseElementHandler.prototype = Object.create(BodyHandler.prototype);\n\nBaseElementHandler.prototype.handleNode = function(node) {\n  var parser = this;\n\n  if (!this.element) {\n    this.element = this.createElement(node);\n    var id = this.element.id;\n\n    if (id) {\n      this.context.addElement(id, this.element);\n    }\n  } else {\n    parser = this.handleChild(node);\n  }\n\n  return parser;\n};\n\n/**\n * @class XMLReader.ElementHandler\n *\n */\nfunction ElementHandler(model, type, context) {\n  this.model = model;\n  this.type = model.getType(type);\n  this.context = context;\n}\n\nElementHandler.prototype = new BaseElementHandler();\n\nElementHandler.prototype.addReference = function(reference) {\n  this.context.addReference(reference);\n};\n\nElementHandler.prototype.handleEnd = function() {\n\n  var value = this.body,\n      element = this.element,\n      descriptor = element.$descriptor,\n      bodyProperty = descriptor.bodyProperty;\n\n  if (bodyProperty && value !== undefined) {\n    value = Types.coerceType(bodyProperty.type, value);\n    element.set(bodyProperty.name, value);\n  }\n};\n\n/**\n * Create an instance of the model from the given node.\n *\n * @param  {Element} node the xml node\n */\nElementHandler.prototype.createElement = function(node) {\n  var attributes = parseNodeAttributes(node),\n      Type = this.type,\n      descriptor = Type.$descriptor,\n      context = this.context,\n      instance = new Type({});\n\n  _.forEach(attributes, function(value, name) {\n\n    var prop = descriptor.propertiesByName[name];\n\n    if (prop && prop.isReference) {\n      context.addReference({\n        element: instance,\n        property: prop.ns.name,\n        id: value\n      });\n    } else {\n      if (prop) {\n        value = Types.coerceType(prop.type, value);\n      }\n\n      instance.set(name, value);\n    }\n  });\n\n  return instance;\n};\n\nElementHandler.prototype.getPropertyForElement = function(nameNs) {\n  if (_.isString(nameNs)) {\n    nameNs = parseNameNs(nameNs);\n  }\n\n  var type = this.type,\n      model = this.model,\n      descriptor = type.$descriptor;\n\n  var propertyName = nameNs.name;\n\n  var property = descriptor.propertiesByName[propertyName];\n\n  // search for properties by name first\n  if (property) {\n    return property;\n  }\n\n  var pkg = model.getPackage(nameNs.prefix);\n\n  if (pkg) {\n    var typeName = nameNs.prefix + ':' + aliasToName(nameNs.localName, descriptor.$pkg),\n        elementType = model.getType(typeName);\n\n    // search for collection members later\n    property = _.find(descriptor.properties, function(p) {\n      return !p.isVirtual && !p.isReference && !p.isAttribute && elementType.hasType(p.type);\n    });\n\n    if (property) {\n      return _.extend({}, property, { effectiveType: elementType.$descriptor.name });\n    }\n  } else {\n    // parse unknown element (maybe extension)\n    property = _.find(descriptor.properties, function(p) {\n      return !p.isReference && !p.isAttribute && p.type === 'Element';\n    });\n\n    if (property) {\n      return property;\n    }\n  }\n\n  throw new Error('unrecognized element <' + nameNs.name + '>');\n};\n\nElementHandler.prototype.toString = function() {\n  return 'ElementDescriptor[' + this.type.$descriptor.name + ']';\n};\n\nElementHandler.prototype.valueHandler = function(propertyDesc, element) {\n  return new ValueHandler(propertyDesc, element);\n};\n\nElementHandler.prototype.referenceHandler = function(propertyDesc) {\n  return new ReferenceHandler(propertyDesc, this.context);\n};\n\nElementHandler.prototype.handler = function(type) {\n  if (type === 'Element') {\n    return new GenericElementHandler(this.model, type, this.context);\n  } else {\n    return new ElementHandler(this.model, type, this.context);\n  }\n};\n\n/**\n * Handle the child element parsing\n *\n * @param  {Element} node the xml node\n */\nElementHandler.prototype.handleChild = function(node) {\n  var nameNs = parseNameNs(node.local, node.prefix);\n\n  var propertyDesc, type, element, childHandler;\n\n  propertyDesc = this.getPropertyForElement(nameNs);\n  element = this.element;\n\n  type = propertyDesc.effectiveType || propertyDesc.type;\n\n  if (Types.isSimple(propertyDesc.type)) {\n    return this.valueHandler(propertyDesc, element);\n  }\n\n  if (propertyDesc.isReference) {\n    childHandler = this.referenceHandler(propertyDesc).handleNode(node);\n  } else {\n    childHandler = this.handler(type).handleNode(node);\n  }\n\n  var newElement = childHandler.element;\n\n  // child handles may decide to skip elements\n  // by not returning anything\n  if (newElement !== undefined) {\n\n    if (propertyDesc.isMany) {\n      element.get(propertyDesc.name).push(newElement);\n    } else {\n      element.set(propertyDesc.name, newElement);\n    }\n\n    if (propertyDesc.isReference) {\n      _.extend(newElement, {\n        element: element\n      });\n\n      this.context.addReference(newElement);\n    } else {\n      // establish child -> parent relationship\n      newElement.$parent = element;\n    }\n  }\n\n  return childHandler;\n};\n\n\nfunction GenericElementHandler(model, type, context) {\n  this.model = model;\n  this.context = context;\n}\n\nGenericElementHandler.prototype = Object.create(BaseElementHandler.prototype);\n\nGenericElementHandler.prototype.createElement = function(node) {\n\n  var name = node.name,\n      prefix = node.prefix,\n      uri = node.ns[prefix],\n      attributes = node.attributes;\n\n  return this.model.createAny(name, uri, attributes);\n};\n\nGenericElementHandler.prototype.handleChild = function(node) {\n\n  var handler = new GenericElementHandler(this.model, 'Element', this.context).handleNode(node),\n      element = this.element;\n\n  var newElement = handler.element,\n      children;\n\n  if (newElement !== undefined) {\n    children = element.$children = element.$children || [];\n    children.push(newElement);\n\n    // establish child -> parent relationship\n    newElement.$parent = element;\n  }\n\n  return handler;\n};\n\nGenericElementHandler.prototype.handleText = function(text) {\n  this.body = this.body || '' + text;\n};\n\nGenericElementHandler.prototype.handleEnd = function() {\n  if (this.body) {\n    this.element.$body = this.body;\n  }\n};\n\n/**\n * A reader for a meta-model\n *\n * @class XMLReader\n *\n * @param {Model} model used to read xml files\n */\nfunction XMLReader(model) {\n  this.model = model;\n}\n\n\nXMLReader.prototype.fromXML = function(xml, rootHandler, done) {\n\n  var context = new Context(rootHandler);\n\n  var parser = sax.parser(true, { xmlns: true, trim: true }),\n      stack = new Stack();\n\n  var model = this.model,\n      self = this;\n\n  rootHandler.context = context;\n\n  // push root handler\n  stack.push(rootHandler);\n\n\n  function resolveReferences() {\n\n    var elementsById = context.elementsById;\n    var references = context.references;\n\n    var i, r;\n\n    for (i = 0; !!(r = references[i]); i++) {\n      var element = r.element;\n      var reference = elementsById[r.id];\n      var property = element.$descriptor.propertiesByName[r.property];\n\n      if (!reference) {\n        context.addWarning({\n          message: 'unresolved reference <' + r.id + '>',\n          element: r.element,\n          property: r.property,\n          value: r.id\n        });\n      }\n\n      if (property.isMany) {\n        var collection = element.get(property.name),\n            idx = collection.indexOf(r);\n\n        if (!reference) {\n          // remove unresolvable reference\n          collection.splice(idx, 1);\n        } else {\n          // update reference\n          collection[idx] = reference;\n        }\n      } else {\n        element.set(property.name, reference);\n      }\n    }\n  }\n\n  function handleClose(tagName) {\n    stack.pop().handleEnd();\n  }\n\n  function handleOpen(node) {\n    var handler = stack.peek();\n\n    normalizeNamespaces(node, model);\n\n    try {\n      stack.push(handler.handleNode(node));\n    } catch (e) {\n\n      var line = this.line,\n          column = this.column;\n\n      throw new Error(\n        'unparsable content <' + node.name + '> detected\\n\\t' +\n          'line: ' + line + '\\n\\t' +\n          'column: ' + column + '\\n\\t' +\n          'nested error: ' + e.message);\n    }\n  }\n\n  function handleText(text) {\n    stack.peek().handleText(text);\n  }\n\n  parser.onopentag = handleOpen;\n  parser.oncdata = parser.ontext = handleText;\n  parser.onclosetag = handleClose;\n  parser.onend = resolveReferences;\n\n  // deferred parse XML to make loading really ascnchronous\n  // this ensures the execution environment (node or browser)\n  // is kept responsive and that certain optimization strategies\n  // can kick in\n  _.defer(function() {\n    var error;\n\n    try {\n      parser.write(xml).close();\n    } catch (e) {\n      error = e;\n    }\n\n    done(error, error ? undefined : rootHandler.element, context);\n  });\n};\n\nXMLReader.prototype.handler = function(name) {\n  return new ElementHandler(this.model, name);\n};\n\nmodule.exports = XMLReader;\nmodule.exports.ElementHandler = ElementHandler;\n},{\"./common\":19,\"moddle\":20,\"tiny-stack\":29}],18:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Types = _dereq_('moddle').types,\n    common = _dereq_('./common'),\n    parseNameNs = _dereq_('moddle').ns.parseName,\n    nameToAlias = common.nameToAlias;\n\nvar XML_PREAMBLE = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n';\n\nvar CDATA_ESCAPE = /[<>\"&]+/;\n\nvar DEFAULT_NS_MAP = common.DEFAULT_NS_MAP;\n\n\nfunction nsName(ns) {\n  if (_.isString(ns)) {\n    return ns;\n  } else {\n    return (ns.prefix ? ns.prefix + ':' : '') + ns.localName;\n  }\n}\n\nfunction getElementNs(ns, descriptor) {\n  if (descriptor.isGeneric) {\n    return descriptor.name;\n  } else {\n    return _.extend({ localName: nameToAlias(descriptor.ns.localName, descriptor.$pkg) }, ns);\n  }\n}\n\nfunction getPropertyNs(ns, descriptor) {\n  return _.extend({ localName: descriptor.ns.localName }, ns);\n}\n\nfunction getSerializableProperties(element) {\n  var descriptor = element.$descriptor;\n\n  return _.filter(descriptor.properties, function(p) {\n    var name = p.name;\n\n    // do not serialize defaults\n    if (!element.hasOwnProperty(name)) {\n      return false;\n    }\n\n    var value = element[name];\n\n    // do not serialize default equals\n    if (value === p.default) {\n      return false;\n    }\n\n    return p.isMany ? value.length : true;\n  });\n}\n\n/**\n * Escape a string attribute to not contain any bad values (line breaks, '\"', ...)\n *\n * @param {String} str the string to escape\n * @return {String} the escaped string\n */\nfunction escapeAttr(str) {\n  var escapeMap = {\n    '\\n': '&#10;',\n    '\\n\\r': '&#10;',\n    '\"': '&quot;'\n  };\n\n  // ensure we are handling strings here\n  str = _.isString(str) ? str : '' + str;\n\n  return str.replace(/(\\n|\\n\\r|\")/g, function(str) {\n    return escapeMap[str];\n  });\n}\n\nfunction filterAttributes(props) {\n  return _.filter(props, function(p) { return p.isAttr; });\n}\n\nfunction filterContained(props) {\n  return _.filter(props, function(p) { return !p.isAttr; });\n}\n\n\nfunction ReferenceSerializer(parent, ns) {\n  this.ns = ns;\n}\n\nReferenceSerializer.prototype.build = function(element) {\n  this.element = element;\n  return this;\n};\n\nReferenceSerializer.prototype.serializeTo = function(writer) {\n  writer\n    .appendIndent()\n    .append('<' + nsName(this.ns) + '>' + this.element.id + '</' + nsName(this.ns) + '>')\n    .appendNewLine();\n};\n\nfunction BodySerializer() {}\n\nBodySerializer.prototype.serializeValue = BodySerializer.prototype.serializeTo = function(writer) {\n  var value = this.value,\n      escape = this.escape;\n\n  if (escape) {\n    writer.append('<![CDATA[');\n  }\n\n  writer.append(this.value);\n\n  if (escape) {\n    writer.append(']]>');\n  }\n};\n\nBodySerializer.prototype.build = function(prop, value) {\n  this.value = value;\n\n  if (prop.type === 'String' && CDATA_ESCAPE.test(value)) {\n    this.escape = true;\n  }\n\n  return this;\n};\n\nfunction ValueSerializer(ns) {\n  this.ns = ns;\n}\n\nValueSerializer.prototype = new BodySerializer();\n\nValueSerializer.prototype.serializeTo = function(writer) {\n\n  writer\n    .appendIndent()\n    .append('<' + nsName(this.ns) + '>');\n\n  this.serializeValue(writer);\n\n  writer\n    .append( '</' + nsName(this.ns) + '>')\n    .appendNewLine();\n};\n\nfunction ElementSerializer(parent, ns) {\n  this.body = [];\n  this.attrs = [];\n\n  this.parent = parent;\n  this.ns = ns;\n}\n\nElementSerializer.prototype.build = function(element) {\n  this.element = element;\n\n  var otherAttrs = this.parseNsAttributes(element);\n\n  if (!this.ns) {\n    this.ns = this.nsTagName(element.$descriptor);\n  }\n\n  if (element.$descriptor.isGeneric) {\n    this.parseGeneric(element);\n  } else {\n    var properties = getSerializableProperties(element);\n\n    this.parseAttributes(filterAttributes(properties));\n    this.parseContainments(filterContained(properties));\n\n    this.parseGenericAttributes(element, otherAttrs);\n  }\n\n  return this;\n};\n\nElementSerializer.prototype.nsTagName = function(descriptor) {\n  var effectiveNs = this.logNamespaceUsed(descriptor.ns);\n  return getElementNs(effectiveNs, descriptor);\n};\n\nElementSerializer.prototype.nsPropertyTagName = function(descriptor) {\n  var effectiveNs = this.logNamespaceUsed(descriptor.ns);\n  return getPropertyNs(effectiveNs, descriptor);\n};\n\nElementSerializer.prototype.isLocalNs = function(ns) {\n  return ns.uri === this.ns.uri;\n};\n\nElementSerializer.prototype.nsAttributeName = function(element) {\n\n  var ns;\n\n  if (_.isString(element)) {\n    ns = parseNameNs(element);\n  } else\n  if (element.ns) {\n    ns = element.ns;\n  }\n\n  var effectiveNs = this.logNamespaceUsed(ns);\n\n  // strip prefix if same namespace like parent\n  if (this.isLocalNs(effectiveNs)) {\n    return { localName: ns.localName };\n  } else {\n    return _.extend({ localName: ns.localName }, effectiveNs);\n  }\n};\n\nElementSerializer.prototype.parseGeneric = function(element) {\n\n  var self = this,\n      body = this.body,\n      attrs = this.attrs;\n\n  _.forEach(element, function(val, key) {\n\n    if (key === '$body') {\n      body.push(new BodySerializer().build({ type: 'String' }, val));\n    } else\n    if (key === '$children') {\n      _.forEach(val, function(child) {\n        body.push(new ElementSerializer(self).build(child));\n      });\n    } else\n    if (key.indexOf('$') !== 0) {\n      attrs.push({ name: key, value: escapeAttr(val) });\n    }\n  });\n};\n\n/**\n * Parse namespaces and return a list of left over generic attributes\n *\n * @param  {Object} element\n * @return {Array<Object>}\n */\nElementSerializer.prototype.parseNsAttributes = function(element) {\n  var self = this;\n\n  var genericAttrs = element.$attrs;\n\n  var attributes = [];\n\n  // parse namespace attributes first\n  // and log them. push non namespace attributes to a list\n  // and process them later\n  _.forEach(genericAttrs, function(value, name) {\n    var nameNs = parseNameNs(name);\n\n    if (nameNs.prefix === 'xmlns') {\n      self.logNamespace({ prefix: nameNs.localName, uri: value });\n    } else\n    if (!nameNs.prefix && nameNs.localName === 'xmlns') {\n      self.logNamespace({ uri: value });\n    } else {\n      attributes.push({ name: name, value: value });\n    }\n  });\n\n  return attributes;\n};\n\nElementSerializer.prototype.parseGenericAttributes = function(element, attributes) {\n\n  var self = this;\n\n  _.forEach(attributes, function(attr) {\n    try {\n      self.addAttribute(self.nsAttributeName(attr.name), attr.value);\n    } catch (e) {\n      console.warn('[writer] missing namespace information for ', attr.name, '=', attr.value, 'on', element, e);\n    }\n  });\n};\n\nElementSerializer.prototype.parseContainments = function(properties) {\n\n  var self = this,\n      body = this.body,\n      element = this.element,\n      typeDesc = element.$descriptor;\n\n  _.forEach(properties, function(p) {\n    var value = element.get(p.name),\n        isReference = p.isReference,\n        isMany = p.isMany;\n\n    var ns = self.nsPropertyTagName(p);\n\n    if (!isMany) {\n      value = [ value ];\n    }\n\n    if (p.isBody) {\n      body.push(new BodySerializer().build(p, value[0]));\n    } else\n    if (Types.isSimple(p.type)) {\n      _.forEach(value, function(v) {\n        body.push(new ValueSerializer(ns).build(p, v));\n      });\n    } else\n    if (isReference) {\n      _.forEach(value, function(v) {\n        body.push(new ReferenceSerializer(self, ns).build(v));\n      });\n    } else {\n      // allow serialization via type\n      // rather than element name\n      var asType = p.serialize === 'xsi:type';\n\n      _.forEach(value, function(v) {\n        var serializer;\n\n        if (asType) {\n          serializer = new TypeSerializer(self, ns);\n        } else {\n          serializer = new ElementSerializer(self);\n        }\n\n        body.push(serializer.build(v));\n      });\n    }\n  });\n};\n\nElementSerializer.prototype.getNamespaces = function() {\n  if (!this.parent) {\n    if (!this.namespaces) {\n      this.namespaces = {\n        prefixMap: {},\n        uriMap: {},\n        used: {}\n      };\n    }\n  } else {\n    this.namespaces = this.parent.getNamespaces();\n  }\n\n  return this.namespaces;\n};\n\nElementSerializer.prototype.logNamespace = function(ns) {\n  var namespaces = this.getNamespaces();\n\n  var existing = namespaces.uriMap[ns.uri];\n\n  if (!existing) {\n    namespaces.uriMap[ns.uri] = ns;\n  }\n\n  namespaces.prefixMap[ns.prefix] = ns.uri;\n\n  return ns;\n};\n\nElementSerializer.prototype.logNamespaceUsed = function(ns) {\n  var element = this.element,\n      model = element.$model,\n      namespaces = this.getNamespaces();\n\n  // ns may be\n  //\n  //   * prefix only\n  //   * prefix:uri\n\n  var prefix = ns.prefix;\n  var uri = ns.uri || DEFAULT_NS_MAP[prefix] ||\n            namespaces.prefixMap[prefix] || (model ? (model.getPackage(prefix) || {}).uri : null);\n\n  if (!uri) {\n    throw new Error('no namespace uri given for prefix <' + ns.prefix + '>');\n  }\n\n  ns = namespaces.uriMap[uri];\n\n  if (!ns) {\n    ns = this.logNamespace({ prefix: prefix, uri: uri });\n  }\n\n  if (!namespaces.used[ns.uri]) {\n    namespaces.used[ns.uri] = ns;\n  }\n\n  return ns;\n};\n\nElementSerializer.prototype.parseAttributes = function(properties) {\n  var self = this,\n      element = this.element;\n\n  _.forEach(properties, function(p) {\n    self.logNamespaceUsed(p.ns);\n\n    var value = element.get(p.name);\n\n    if (p.isReference) {\n      value = value.id;\n    }\n\n    self.addAttribute(self.nsAttributeName(p), value);\n  });\n};\n\nElementSerializer.prototype.addAttribute = function(name, value) {\n  var attrs = this.attrs;\n\n  if (_.isString(value)) {\n    value = escapeAttr(value);\n  }\n\n  attrs.push({ name: name, value: value });\n};\n\nElementSerializer.prototype.serializeAttributes = function(writer) {\n  var element = this.element,\n      attrs = this.attrs,\n      root = !this.parent,\n      namespaces = this.namespaces;\n\n  function collectNsAttrs() {\n    return _.collect(namespaces.used, function(ns) {\n      var name = 'xmlns' + (ns.prefix ? ':' + ns.prefix : '');\n      return { name: name, value: ns.uri };\n    });\n  }\n\n  if (root) {\n    attrs = collectNsAttrs().concat(attrs);\n  }\n\n  _.forEach(attrs, function(a) {\n    writer\n      .append(' ')\n      .append(nsName(a.name)).append('=\"').append(a.value).append('\"');\n  });\n};\n\nElementSerializer.prototype.serializeTo = function(writer) {\n  var hasBody = this.body.length;\n\n  writer\n    .appendIndent()\n    .append('<' + nsName(this.ns));\n\n  this.serializeAttributes(writer);\n\n  writer\n    .append(hasBody ? '>' : ' />')\n    .appendNewLine();\n\n  writer.indent();\n\n  _.forEach(this.body, function(b) {\n    b.serializeTo(writer);\n  });\n\n  writer.unindent();\n\n  if (hasBody) {\n    writer\n      .appendIndent()\n      .append('</' + nsName(this.ns) + '>')\n      .appendNewLine();\n  }\n};\n\n/**\n * A serializer for types that handles serialization of data types\n */\nfunction TypeSerializer(parent, ns) {\n  ElementSerializer.call(this, parent, ns);\n}\n\nTypeSerializer.prototype = new ElementSerializer();\n\nTypeSerializer.prototype.build = function(element) {\n  this.element = element;\n  this.typeNs = this.nsTagName(element.$descriptor);\n\n  return ElementSerializer.prototype.build.call(this, element);\n};\n\nTypeSerializer.prototype.isLocalNs = function(ns) {\n  return ns.uri === this.typeNs.uri;\n};\n\nfunction SavingWriter() {\n  this.value = '';\n\n  this.write = function(str) {\n    this.value += str;\n  };\n}\n\nfunction FormatingWriter(out, format) {\n\n  var indent = [''];\n\n  this.append = function(str) {\n    out.write(str);\n\n    return this;\n  };\n\n  this.appendNewLine = function() {\n    if (format) {\n      out.write('\\n');\n    }\n\n    return this;\n  };\n\n  this.appendIndent = function() {\n    if (format) {\n      out.write(indent.join('  '));\n    }\n\n    return this;\n  };\n\n  this.indent = function() {\n    indent.push('');\n    return this;\n  };\n\n  this.unindent = function() {\n    indent.pop();\n    return this;\n  };\n}\n\n/**\n * A writer for meta-model backed document trees\n *\n * @class XMLWriter\n */\nfunction XMLWriter(options) {\n\n  options = _.extend({ format: false, preamble: true }, options || {});\n\n  function toXML(tree, writer) {\n    var internalWriter = writer || new SavingWriter();\n    var formatingWriter = new FormatingWriter(internalWriter, options.format);\n\n    if (options.preamble) {\n      formatingWriter.append(XML_PREAMBLE);\n    }\n\n    new ElementSerializer().build(tree).serializeTo(formatingWriter);\n\n    if (!writer) {\n      return internalWriter.value;\n    }\n  }\n\n  return {\n    toXML: toXML\n  };\n}\n\nmodule.exports = XMLWriter;\n},{\"./common\":19,\"moddle\":20}],19:[function(_dereq_,module,exports){\n'use strict';\n\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nfunction lower(string) {\n  return string.charAt(0).toLowerCase() + string.slice(1);\n}\n\nfunction hasLowerCaseAlias(pkg) {\n  return pkg.xml && pkg.xml.alias === 'lowerCase';\n}\n\n\nmodule.exports.aliasToName = function(alias, pkg) {\n  if (hasLowerCaseAlias(pkg)) {\n    return capitalize(alias);\n  } else {\n    return alias;\n  }\n};\n\nmodule.exports.nameToAlias = function(name, pkg) {\n  if (hasLowerCaseAlias(pkg)) {\n    return lower(name);\n  } else {\n    return name;\n  }\n};\n\nmodule.exports.DEFAULT_NS_MAP = {\n  'xsi': 'http://www.w3.org/2001/XMLSchema-instance'\n};\n},{}],20:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = _dereq_('./lib/moddle');\n\nmodule.exports.types = _dereq_('./lib/types');\n\nmodule.exports.ns = _dereq_('./lib/ns');\n},{\"./lib/moddle\":24,\"./lib/ns\":25,\"./lib/types\":28}],21:[function(_dereq_,module,exports){\n'use strict';\n\nfunction Base() { }\n\nBase.prototype.get = function(name) {\n  return this.$model.properties.get(this, name);\n};\n\nBase.prototype.set = function(name, value) {\n  this.$model.properties.set(this, name, value);\n};\n\n\nmodule.exports = Base;\n},{}],22:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar parseNameNs = _dereq_('./ns').parseName;\n\n\nfunction DescriptorBuilder(nameNs) {\n  this.ns = nameNs;\n  this.name = nameNs.name;\n  this.allTypes = [];\n  this.properties = [];\n  this.propertiesByName = {};\n}\n\nmodule.exports = DescriptorBuilder;\n\n\nDescriptorBuilder.prototype.build = function() {\n  return _.pick(this, [ 'ns', 'name', 'allTypes', 'properties', 'propertiesByName', 'bodyProperty' ]);\n};\n\nDescriptorBuilder.prototype.addProperty = function(p, idx) {\n  this.addNamedProperty(p, true);\n\n  var properties = this.properties;\n\n  if (idx !== undefined) {\n    properties.splice(idx, 0, p);\n  } else {\n    properties.push(p);\n  }\n};\n\n\nDescriptorBuilder.prototype.replaceProperty = function(oldProperty, newProperty) {\n  var oldNameNs = oldProperty.ns;\n\n  var props = this.properties,\n      propertiesByName = this.propertiesByName;\n\n  if (oldProperty.isBody) {\n\n    if (!newProperty.isBody) {\n      throw new Error(\n        'property <' + newProperty.ns.name + '> must be body property ' +\n        'to refine <' + oldProperty.ns.name + '>');\n    }\n\n    // TODO: Check compatibility\n    this.setBodyProperty(newProperty, false);\n  }\n\n  this.addNamedProperty(newProperty, true);\n\n  // replace old property at index with new one\n  var idx = props.indexOf(oldProperty);\n  if (idx === -1) {\n    throw new Error('property <' + oldNameNs.name + '> not found in property list');\n  }\n\n  props[idx] = newProperty;\n\n  // replace propertiesByName entry with new property\n  propertiesByName[oldNameNs.name] = propertiesByName[oldNameNs.localName] = newProperty;\n};\n\n\nDescriptorBuilder.prototype.redefineProperty = function(p) {\n\n  var nsPrefix = p.ns.prefix;\n  var parts = p.redefines.split('#');\n\n  var name = parseNameNs(parts[0], nsPrefix);\n  var attrName = parseNameNs(parts[1], name.prefix).name;\n\n  var redefinedProperty = this.propertiesByName[attrName];\n  if (!redefinedProperty) {\n    throw new Error('refined property <' + attrName + '> not found');\n  } else {\n    this.replaceProperty(redefinedProperty, p);\n  }\n\n  delete p.redefines;\n};\n\nDescriptorBuilder.prototype.addNamedProperty = function(p, validate) {\n  var ns = p.ns,\n      propsByName = this.propertiesByName;\n\n  if (validate) {\n    this.assertNotDefined(p, ns.name);\n    this.assertNotDefined(p, ns.localName);\n  }\n\n  propsByName[ns.name] = propsByName[ns.localName] = p;\n};\n\nDescriptorBuilder.prototype.removeNamedProperty = function(p) {\n  var ns = p.ns,\n      propsByName = this.propertiesByName;\n\n  delete propsByName[ns.name];\n  delete propsByName[ns.localName];\n};\n\nDescriptorBuilder.prototype.setBodyProperty = function(p, validate) {\n\n  if (validate && this.bodyProperty) {\n    throw new Error(\n      'body property defined multiple times ' +\n      '(<' + this.bodyProperty.ns.name + '>, <' + p.ns.name + '>)');\n  }\n\n  this.bodyProperty = p;\n};\n\nDescriptorBuilder.prototype.addIdProperty = function(name) {\n  var nameNs = parseNameNs(name, this.ns.prefix);\n\n  var p = {\n    name: nameNs.localName,\n    type: 'String',\n    isAttr: true,\n    ns: nameNs\n  };\n\n  // ensure that id is always the first attribute (if present)\n  this.addProperty(p, 0);\n};\n\nDescriptorBuilder.prototype.assertNotDefined = function(p, name) {\n  var propertyName = p.name,\n      definedProperty = this.propertiesByName[propertyName];\n\n  if (definedProperty) {\n    throw new Error(\n      'property <' + propertyName + '> already defined; ' +\n      'override of <' + definedProperty.definedBy.ns.name + '#' + definedProperty.ns.name + '> by ' +\n      '<' + p.definedBy.ns.name + '#' + p.ns.name + '> not allowed without redefines');\n  }\n};\n\nDescriptorBuilder.prototype.hasProperty = function(name) {\n  return this.propertiesByName[name];\n};\n\nDescriptorBuilder.prototype.addTrait = function(t) {\n\n  var allTypes = this.allTypes;\n\n  if (allTypes.indexOf(t) !== -1) {\n    return;\n  }\n\n  _.forEach(t.properties, function(p) {\n\n    // clone property to allow extensions\n    p = _.extend({}, p, {\n      name: p.ns.localName\n    });\n\n    Object.defineProperty(p, 'definedBy', {\n      value: t\n    });\n\n    // add redefine support\n    if (p.redefines) {\n      this.redefineProperty(p);\n    } else {\n      if (p.isBody) {\n        this.setBodyProperty(p);\n      }\n      this.addProperty(p);\n    }\n  }, this);\n\n  allTypes.push(t);\n};\n\n},{\"./ns\":25}],23:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Base = _dereq_('./base');\n\n\nfunction Factory(model, properties) {\n  this.model = model;\n  this.properties = properties;\n}\n\nmodule.exports = Factory;\n\n\nFactory.prototype.createType = function(descriptor) {\n\n  var model = this.model;\n\n  var props = this.properties,\n      prototype = Object.create(Base.prototype);\n\n  // initialize default values\n  _.forEach(descriptor.properties, function(p) {\n    if (!p.isMany && p.default !== undefined) {\n      prototype[p.name] = p.default;\n    }\n  });\n\n  props.defineModel(prototype, model);\n  props.defineDescriptor(prototype, descriptor);\n\n  var name = descriptor.ns.name;\n\n  /**\n   * The new type constructor\n   */\n  function ModdleElement(attrs) {\n    props.define(this, '$type', { value: name, enumerable: true });\n    props.define(this, '$attrs', { value: {} });\n    props.define(this, '$parent', { writable: true });\n\n    _.forEach(attrs, function(val, key) {\n      this.set(key, val);\n    }, this);\n  }\n\n  ModdleElement.prototype = prototype;\n\n  ModdleElement.hasType = prototype.$instanceOf = this.model.hasType;\n\n  // static links\n  props.defineModel(ModdleElement, model);\n  props.defineDescriptor(ModdleElement, descriptor);\n\n  return ModdleElement;\n};\n},{\"./base\":21}],24:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Types = _dereq_('./types'),\n    Factory = _dereq_('./factory'),\n    Registry = _dereq_('./registry'),\n    Properties = _dereq_('./properties');\n\nvar parseNameNs = _dereq_('./ns').parseName;\n\n\n//// Moddle implementation /////////////////////////////////////////////////\n\n/**\n * @class Moddle\n *\n * A model that can be used to create elements of a specific type.\n *\n * @example\n *\n * var Moddle = require('moddle');\n *\n * var pkg = {\n *   name: 'mypackage',\n *   prefix: 'my',\n *   types: [\n *     { name: 'Root' }\n *   ]\n * };\n *\n * var moddle = new Moddle([pkg]);\n *\n * @param {Array<Package>} packages  the packages to contain\n * @param {Object} options  additional options to pass to the model\n */\nfunction Moddle(packages, options) {\n\n  options = options || {};\n\n  this.properties = new Properties(this);\n\n  this.factory = new Factory(this, this.properties);\n  this.registry = new Registry(packages, this.properties, options);\n\n  this.typeCache = {};\n}\n\nmodule.exports = Moddle;\n\n\n/**\n * Create an instance of the specified type.\n *\n * @method Moddle#create\n *\n * @example\n *\n * var foo = moddle.create('my:Foo');\n * var bar = moddle.create('my:Bar', { id: 'BAR_1' });\n *\n * @param  {String|Object} descriptor the type descriptor or name know to the model\n * @param  {Object} attrs   a number of attributes to initialize the model instance with\n * @return {Object}         model instance\n */\nModdle.prototype.create = function(descriptor, attrs) {\n  var Type = this.getType(descriptor);\n\n  if (!Type) {\n    throw new Error('unknown type <' + descriptor + '>');\n  }\n\n  return new Type(attrs);\n};\n\n\n/**\n * Returns the type representing a given descriptor\n *\n * @method Moddle#getType\n *\n * @example\n *\n * var Foo = moddle.getType('my:Foo');\n * var foo = new Foo({ 'id' : 'FOO_1' });\n *\n * @param  {String|Object} descriptor the type descriptor or name know to the model\n * @return {Object}         the type representing the descriptor\n */\nModdle.prototype.getType = function(descriptor) {\n\n  var cache = this.typeCache;\n\n  var name = _.isString(descriptor) ? descriptor : descriptor.ns.name;\n\n  var type = cache[name];\n\n  if (!type) {\n    descriptor = this.registry.getEffectiveDescriptor(name);\n    type = cache[descriptor.name] = this.factory.createType(descriptor);\n  }\n\n  return type;\n};\n\n\n/**\n * Creates an any-element type to be used within model instances.\n *\n * This can be used to create custom elements that lie outside the meta-model.\n * The created element contains all the meta-data required to serialize it\n * as part of meta-model elements.\n *\n * @method Moddle#createAny\n *\n * @example\n *\n * var foo = moddle.createAny('vendor:Foo', 'http://vendor', {\n *   value: 'bar'\n * });\n *\n * var container = moddle.create('my:Container', 'http://my', {\n *   any: [ foo ]\n * });\n *\n * // go ahead and serialize the stuff\n *\n *\n * @param  {String} name  the name of the element\n * @param  {String} nsUri the namespace uri of the element\n * @param  {Object} [properties] a map of properties to initialize the instance with\n * @return {Object} the any type instance\n */\nModdle.prototype.createAny = function(name, nsUri, properties) {\n\n  var nameNs = parseNameNs(name);\n\n  var element = {\n    $type: name\n  };\n\n  var descriptor = {\n    name: name,\n    isGeneric: true,\n    ns: {\n      prefix: nameNs.prefix,\n      localName: nameNs.localName,\n      uri: nsUri\n    }\n  };\n\n  this.properties.defineDescriptor(element, descriptor);\n  this.properties.defineModel(element, this);\n  this.properties.define(element, '$parent', { enumerable: false, writable: true });\n\n  _.forEach(properties, function(a, key) {\n    if (_.isObject(a) && a.value !== undefined) {\n      element[a.name] = a.value;\n    } else {\n      element[key] = a;\n    }\n  });\n\n  return element;\n};\n\n/**\n * Returns a registered package by uri or prefix\n *\n * @return {Object} the package\n */\nModdle.prototype.getPackage = function(uriOrPrefix) {\n  return this.registry.getPackage(uriOrPrefix);\n};\n\n/**\n * Returns a snapshot of all known packages\n *\n * @return {Object} the package\n */\nModdle.prototype.getPackages = function() {\n  return this.registry.getPackages();\n};\n\n/**\n * Returns the descriptor for an element\n */\nModdle.prototype.getElementDescriptor = function(element) {\n  return element.$descriptor;\n};\n\n/**\n * Returns true if the given descriptor or instance\n * represents the given type.\n *\n * May be applied to this, if element is omitted.\n */\nModdle.prototype.hasType = function(element, type) {\n  if (type === undefined) {\n    type = element;\n    element = this;\n  }\n\n  var descriptor = element.$model.getElementDescriptor(element);\n\n  return !!_.find(descriptor.allTypes, function(t) {\n    return t.name === type;\n  });\n};\n\n\n/**\n * Returns the descriptor of an elements named property\n */\nModdle.prototype.getPropertyDescriptor = function(element, property) {\n  return this.getElementDescriptor(element).propertiesByName[property];\n};\n\n},{\"./factory\":23,\"./ns\":25,\"./properties\":26,\"./registry\":27,\"./types\":28}],25:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Parses a namespaced attribute name of the form (ns:)localName to an object,\n * given a default prefix to assume in case no explicit namespace is given.\n *\n * @param {String} name\n * @param {String} [defaultPrefix] the default prefix to take, if none is present.\n *\n * @return {Object} the parsed name\n */\nmodule.exports.parseName = function(name, defaultPrefix) {\n  var parts = name.split(/:/),\n      localName, prefix;\n\n  // no prefix (i.e. only local name)\n  if (parts.length === 1) {\n    localName = name;\n    prefix = defaultPrefix;\n  } else\n  // prefix + local name\n  if (parts.length === 2) {\n    localName = parts[1];\n    prefix = parts[0];\n  } else {\n    throw new Error('expected <prefix:localName> or <localName>, got ' + name);\n  }\n\n  name = (prefix ? prefix + ':' : '') + localName;\n\n  return {\n    name: name,\n    prefix: prefix,\n    localName: localName\n  };\n};\n},{}],26:[function(_dereq_,module,exports){\n'use strict';\n\n\n/**\n * A utility that gets and sets properties of model elements.\n *\n * @param {Model} model\n */\nfunction Properties(model) {\n  this.model = model;\n}\n\nmodule.exports = Properties;\n\n\n/**\n * Sets a named property on the target element\n *\n * @param {Object} target\n * @param {String} name\n * @param {Object} value\n */\nProperties.prototype.set = function(target, name, value) {\n\n  var property = this.model.getPropertyDescriptor(target, name);\n\n  if (!property) {\n    target.$attrs[name] = value;\n  } else {\n    Object.defineProperty(target, property.name, {\n      enumerable: !property.isReference,\n      writable: true,\n      value: value\n    });\n  }\n};\n\n/**\n * Returns the named property of the given element\n *\n * @param  {Object} target\n * @param  {String} name\n *\n * @return {Object}\n */\nProperties.prototype.get = function(target, name) {\n\n  var property = this.model.getPropertyDescriptor(target, name);\n\n  if (!property) {\n    return target.$attrs[name];\n  }\n\n  var propertyName = property.name;\n\n  // check if access to collection property and lazily initialize it\n  if (!target[propertyName] && property.isMany) {\n    Object.defineProperty(target, propertyName, {\n      enumerable: !property.isReference,\n      writable: true,\n      value: []\n    });\n  }\n\n  return target[propertyName];\n};\n\n\n/**\n * Define a property on the target element\n *\n * @param  {Object} target\n * @param  {String} name\n * @param  {Object} options\n */\nProperties.prototype.define = function(target, name, options) {\n  Object.defineProperty(target, name, options);\n};\n\n\n/**\n * Define the descriptor for an element\n */\nProperties.prototype.defineDescriptor = function(target, descriptor) {\n  this.define(target, '$descriptor', { value: descriptor });\n};\n\n/**\n * Define the model for an element\n */\nProperties.prototype.defineModel = function(target, model) {\n  this.define(target, '$model', { value: model });\n};\n},{}],27:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Types = _dereq_('./types'),\n    DescriptorBuilder = _dereq_('./descriptor-builder');\n\nvar parseNameNs = _dereq_('./ns').parseName;\n\n\nfunction Registry(packages, properties, options) {\n  this.options = _.extend({ generateId: 'id' }, options || {});\n\n  this.packageMap = {};\n  this.typeMap = {};\n\n  this.packages = [];\n\n  this.properties = properties;\n\n  _.forEach(packages, this.registerPackage, this);\n}\n\nmodule.exports = Registry;\n\n\nRegistry.prototype.getPackage = function(uriOrPrefix) {\n  return this.packageMap[uriOrPrefix];\n};\n\nRegistry.prototype.getPackages = function() {\n  return this.packages;\n};\n\n\nRegistry.prototype.registerPackage = function(pkg) {\n\n  // register types\n  _.forEach(pkg.types, function(descriptor) {\n    this.registerType(descriptor, pkg);\n  }, this);\n\n  this.packageMap[pkg.uri] = this.packageMap[pkg.prefix] = pkg;\n  this.packages.push(pkg);\n};\n\n\n/**\n * Register a type from a specific package with us\n */\nRegistry.prototype.registerType = function(type, pkg) {\n\n  var ns = parseNameNs(type.name, pkg.prefix),\n      name = ns.name,\n      propertiesByName = {};\n\n  // parse properties\n  _.forEach(type.properties, function(p) {\n\n    // namespace property names\n    var propertyNs = parseNameNs(p.name, ns.prefix),\n        propertyName = propertyNs.name;\n\n    // namespace property types\n    if (!Types.isBuiltIn(p.type)) {\n      p.type = parseNameNs(p.type, propertyNs.prefix).name;\n    }\n\n    _.extend(p, {\n      ns: propertyNs,\n      name: propertyName\n    });\n\n    propertiesByName[propertyName] = p;\n  });\n\n  // update ns + name\n  _.extend(type, {\n    ns: ns,\n    name: name,\n    propertiesByName: propertiesByName\n  });\n\n  // link to package\n  this.definePackage(type, pkg);\n\n  // register\n  this.typeMap[name] = type;\n};\n\n\n/**\n * Traverse the type hierarchy from bottom to top.\n */\nRegistry.prototype.mapTypes = function(nsName, iterator) {\n\n  var type = this.typeMap[nsName.name];\n\n  if (!type) {\n    throw new Error('unknown type <' + nsName.name + '>');\n  }\n\n  _.forEach(type.superClass, function(cls) {\n    var parentNs = parseNameNs(cls, nsName.prefix);\n    this.mapTypes(parentNs, iterator);\n  }, this);\n\n  iterator(type);\n};\n\n\n/**\n * Returns the effective descriptor for a type.\n *\n * @param  {String} type the namespaced name (ns:localName) of the type\n *\n * @return {Descriptor} the resulting effective descriptor\n */\nRegistry.prototype.getEffectiveDescriptor = function(name) {\n\n  var options = this.options,\n      nsName = parseNameNs(name);\n\n  var builder = new DescriptorBuilder(nsName);\n\n  this.mapTypes(nsName, function(type) {\n    builder.addTrait(type);\n  });\n\n  // check we have an id assigned\n  var id = this.options.generateId;\n  if (id && !builder.hasProperty(id)) {\n    builder.addIdProperty(id);\n  }\n\n  var descriptor = builder.build();\n\n  // define package link\n  this.definePackage(descriptor, descriptor.allTypes[descriptor.allTypes.length - 1].$pkg);\n\n  return descriptor;\n};\n\n\nRegistry.prototype.definePackage = function(target, pkg) {\n  this.properties.define(target, '$pkg', { value: pkg });\n};\n},{\"./descriptor-builder\":22,\"./ns\":25,\"./types\":28}],28:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Built-in moddle types\n */\nvar BUILTINS = {\n  String: true,\n  Boolean: true,\n  Integer: true,\n  Real: true,\n  Element: true,\n};\n\n/**\n * Converters for built in types from string representations\n */\nvar TYPE_CONVERTERS = {\n  String: function(s) { return s; },\n  Boolean: function(s) { return s === 'true'; },\n  Integer: function(s) { return parseInt(s, 10); },\n  Real: function(s) { return parseFloat(s, 10); }\n};\n\n/**\n * Convert a type to its real representation\n */\nmodule.exports.coerceType = function(type, value) {\n\n  var converter = TYPE_CONVERTERS[type];\n\n  if (converter) {\n    return converter(value);\n  } else {\n    return value;\n  }\n};\n\n/**\n * Return whether the given type is built-in\n */\nmodule.exports.isBuiltIn = function(type) {\n  return !!BUILTINS[type];\n};\n\n/**\n * Return whether the given type is simple\n */\nmodule.exports.isSimple = function(type) {\n  return !!TYPE_CONVERTERS[type];\n};\n},{}],29:[function(_dereq_,module,exports){\n/**\n * Tiny stack for browser or server\n *\n * @author Jason Mulligan <jason.mulligan@avoidwork.com>\n * @copyright 2014 Jason Mulligan\n * @license BSD-3 <https://raw.github.com/avoidwork/tiny-stack/master/LICENSE>\n * @link http://avoidwork.github.io/tiny-stack\n * @module tiny-stack\n * @version 0.1.0\n */\n\n( function ( global ) {\n\n\"use strict\";\n\n/**\n * TinyStack\n *\n * @constructor\n */\nfunction TinyStack () {\n\tthis.data = [null];\n\tthis.top  = 0;\n}\n\n/**\n * Clears the stack\n *\n * @method clear\n * @memberOf TinyStack\n * @return {Object} {@link TinyStack}\n */\nTinyStack.prototype.clear = function clear () {\n\tthis.data = [null];\n\tthis.top  = 0;\n\n\treturn this;\n};\n\n/**\n * Gets the size of the stack\n *\n * @method length\n * @memberOf TinyStack\n * @return {Number} Size of stack\n */\nTinyStack.prototype.length = function length () {\n\treturn this.top;\n};\n\n/**\n * Gets the item at the top of the stack\n *\n * @method peek\n * @memberOf TinyStack\n * @return {Mixed} Item at the top of the stack\n */\nTinyStack.prototype.peek = function peek () {\n\treturn this.data[this.top];\n};\n\n/**\n * Gets & removes the item at the top of the stack\n *\n * @method pop\n * @memberOf TinyStack\n * @return {Mixed} Item at the top of the stack\n */\nTinyStack.prototype.pop = function pop () {\n\tif ( this.top > 0 ) {\n\t\tthis.top--;\n\n\t\treturn this.data.pop();\n\t}\n\telse {\n\t\treturn undefined;\n\t}\n};\n\n/**\n * Pushes an item onto the stack\n *\n * @method push\n * @memberOf TinyStack\n * @return {Object} {@link TinyStack}\n */\nTinyStack.prototype.push = function push ( arg ) {\n\tthis.data[++this.top] = arg;\n\n\treturn this;\n};\n\n/**\n * TinyStack factory\n *\n * @method factory\n * @return {Object} {@link TinyStack}\n */\nfunction factory () {\n\treturn new TinyStack();\n}\n\n// Node, AMD & window supported\nif ( typeof exports != \"undefined\" ) {\n\tmodule.exports = factory;\n}\nelse if ( typeof define == \"function\" ) {\n\tdefine( function () {\n\t\treturn factory;\n\t} );\n}\nelse {\n\tglobal.stack = factory;\n}\n} )( this );\n\n},{}],30:[function(_dereq_,module,exports){\nmodule.exports=_dereq_(20)\n},{\"./lib/moddle\":34,\"./lib/ns\":35,\"./lib/types\":38}],31:[function(_dereq_,module,exports){\nmodule.exports=_dereq_(21)\n},{}],32:[function(_dereq_,module,exports){\nmodule.exports=_dereq_(22)\n},{\"./ns\":35}],33:[function(_dereq_,module,exports){\nmodule.exports=_dereq_(23)\n},{\"./base\":31}],34:[function(_dereq_,module,exports){\nmodule.exports=_dereq_(24)\n},{\"./factory\":33,\"./ns\":35,\"./properties\":36,\"./registry\":37,\"./types\":38}],35:[function(_dereq_,module,exports){\nmodule.exports=_dereq_(25)\n},{}],36:[function(_dereq_,module,exports){\nmodule.exports=_dereq_(26)\n},{}],37:[function(_dereq_,module,exports){\nmodule.exports=_dereq_(27)\n},{\"./descriptor-builder\":32,\"./ns\":35,\"./types\":38}],38:[function(_dereq_,module,exports){\nmodule.exports=_dereq_(28)\n},{}],39:[function(_dereq_,module,exports){\nmodule.exports={\n  \"name\": \"BPMN20\",\n  \"uri\": \"http://www.omg.org/spec/BPMN/20100524/MODEL\",\n  \"associations\": [],\n  \"types\": [\n    {\n      \"name\": \"Interface\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"operations\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operations_interface\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"implementationRef\",\n          \"type\": \"String\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Operation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"inMessageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_inMessageRef_operation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outMessageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_outMessageRef_operation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"errorRefs\",\n          \"type\": \"Error\",\n          \"association\": \"A_errorRefs_operation\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"implementationRef\",\n          \"type\": \"String\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"EndPoint\",\n      \"superClass\": [\n        \"RootElement\"\n      ]\n    },\n    {\n      \"name\": \"Auditing\",\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"GlobalTask\",\n      \"superClass\": [\n        \"CallableElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"resources\",\n          \"type\": \"ResourceRole\",\n          \"association\": \"A_resources_globalTask\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Monitoring\",\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"Performer\",\n      \"superClass\": [\n        \"ResourceRole\"\n      ]\n    },\n    {\n      \"name\": \"Process\",\n      \"superClass\": [\n        \"FlowElementsContainer\",\n        \"CallableElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"processType\",\n          \"type\": \"ProcessType\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isClosed\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"auditing\",\n          \"type\": \"Auditing\",\n          \"association\": \"A_auditing_process\"\n        },\n        {\n          \"name\": \"monitoring\",\n          \"type\": \"Monitoring\",\n          \"association\": \"A_monitoring_process\"\n        },\n        {\n          \"name\": \"properties\",\n          \"type\": \"Property\",\n          \"association\": \"A_properties_process\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"supports\",\n          \"type\": \"Process\",\n          \"association\": \"A_supports_process\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"definitionalCollaborationRef\",\n          \"type\": \"Collaboration\",\n          \"association\": \"A_definitionalCollaborationRef_process\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"isExecutable\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"resources\",\n          \"type\": \"ResourceRole\",\n          \"association\": \"A_resources_process\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"artifacts\",\n          \"type\": \"Artifact\",\n          \"association\": \"A_artifacts_process\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"correlationSubscriptions\",\n          \"type\": \"CorrelationSubscription\",\n          \"association\": \"A_correlationSubscriptions_process\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"LaneSet\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"lanes\",\n          \"type\": \"Lane\",\n          \"association\": \"A_lanes_laneSet\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Lane\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"childLaneSet\",\n          \"type\": \"LaneSet\",\n          \"association\": \"A_childLaneSet_parentLane\"\n        },\n        {\n          \"name\": \"partitionElementRef\",\n          \"type\": \"BaseElement\",\n          \"association\": \"A_partitionElementRef_lane\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"flowNodeRef\",\n          \"type\": \"FlowNode\",\n          \"association\": \"A_flowNodeRefs_lanes\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"partitionElement\",\n          \"type\": \"BaseElement\",\n          \"association\": \"A_partitionElement_lane\"\n        }\n      ]\n    },\n    {\n      \"name\": \"GlobalManualTask\",\n      \"superClass\": [\n        \"GlobalTask\"\n      ]\n    },\n    {\n      \"name\": \"ManualTask\",\n      \"superClass\": [\n        \"Task\"\n      ]\n    },\n    {\n      \"name\": \"UserTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"renderings\",\n          \"type\": \"Rendering\",\n          \"association\": \"A_renderings_usertask\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Rendering\",\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"HumanPerformer\",\n      \"superClass\": [\n        \"Performer\"\n      ]\n    },\n    {\n      \"name\": \"PotentialOwner\",\n      \"superClass\": [\n        \"HumanPerformer\"\n      ]\n    },\n    {\n      \"name\": \"GlobalUserTask\",\n      \"superClass\": [\n        \"GlobalTask\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"renderings\",\n          \"type\": \"Rendering\",\n          \"association\": \"A_renderings_globalUserTask\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Gateway\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"FlowNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"gatewayDirection\",\n          \"type\": \"GatewayDirection\",\n          \"default\": \"Unspecified\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"EventBasedGateway\",\n      \"superClass\": [\n        \"Gateway\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"instantiate\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"eventGatewayType\",\n          \"type\": \"EventBasedGatewayType\",\n          \"isAttr\": true,\n          \"default\": \"Exclusive\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ComplexGateway\",\n      \"superClass\": [\n        \"Gateway\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"activationCondition\",\n          \"type\": \"Expression\",\n          \"association\": \"A_activationCondition_complexGateway\"\n        },\n        {\n          \"name\": \"default\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_default_complexGateway\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ExclusiveGateway\",\n      \"superClass\": [\n        \"Gateway\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"default\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_default_exclusiveGateway\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"InclusiveGateway\",\n      \"superClass\": [\n        \"Gateway\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"default\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_default_inclusiveGateway\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ParallelGateway\",\n      \"superClass\": [\n        \"Gateway\"\n      ]\n    },\n    {\n      \"name\": \"RootElement\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"Relationship\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"type\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"direction\",\n          \"type\": \"RelationshipDirection\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"sources\",\n          \"association\": \"A_sources_relationship\",\n          \"isMany\": true,\n          \"isReference\": true,\n          \"type\": \"Element\"\n        },\n        {\n          \"name\": \"targets\",\n          \"association\": \"A_targets_relationship\",\n          \"isMany\": true,\n          \"isReference\": true,\n          \"type\": \"Element\"\n        }\n      ]\n    },\n    {\n      \"name\": \"BaseElement\",\n      \"isAbstract\": true,\n      \"properties\": [\n        {\n          \"name\": \"id\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"extensionDefinitions\",\n          \"type\": \"ExtensionDefinition\",\n          \"association\": \"A_extensionDefinitions_baseElement\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"extensionElements\",\n          \"type\": \"ExtensionElements\",\n          \"association\": \"A_extensionElements_baseElement\"\n        },\n        {\n          \"name\": \"documentation\",\n          \"type\": \"Documentation\",\n          \"association\": \"A_documentation_baseElement\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Extension\",\n      \"properties\": [\n        {\n          \"name\": \"mustUnderstand\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"definition\",\n          \"type\": \"ExtensionDefinition\",\n          \"association\": \"A_definition_extension\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ExtensionDefinition\",\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"extensionAttributeDefinitions\",\n          \"type\": \"ExtensionAttributeDefinition\",\n          \"association\": \"A_extensionAttributeDefinitions_extensionDefinition\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ExtensionAttributeDefinition\",\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"type\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"isReference\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"extensionDefinition\",\n          \"type\": \"ExtensionDefinition\",\n          \"association\": \"A_extensionAttributeDefinitions_extensionDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ExtensionElements\",\n      \"properties\": [\n        {\n          \"name\": \"valueRef\",\n          \"association\": \"A_valueRef_extensionElements\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"Element\"\n        },\n        {\n          \"name\": \"values\",\n          \"association\": \"A_value_extensionElements\",\n          \"type\": \"Element\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"extensionAttributeDefinition\",\n          \"type\": \"ExtensionAttributeDefinition\",\n          \"association\": \"A_extensionAttributeDefinition_extensionElements\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Documentation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"text\",\n          \"type\": \"String\",\n          \"isBody\": true\n        },\n        {\n          \"name\": \"textFormat\",\n          \"default\": \"text/plain\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Event\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"FlowNode\",\n        \"InteractionNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"properties\",\n          \"type\": \"Property\",\n          \"association\": \"A_properties_event\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"IntermediateCatchEvent\",\n      \"superClass\": [\n        \"CatchEvent\"\n      ]\n    },\n    {\n      \"name\": \"IntermediateThrowEvent\",\n      \"superClass\": [\n        \"ThrowEvent\"\n      ]\n    },\n    {\n      \"name\": \"EndEvent\",\n      \"superClass\": [\n        \"ThrowEvent\"\n      ]\n    },\n    {\n      \"name\": \"StartEvent\",\n      \"superClass\": [\n        \"CatchEvent\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"isInterrupting\",\n          \"default\": true,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ThrowEvent\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Event\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"inputSet\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_inputSet_throwEvent\"\n        },\n        {\n          \"name\": \"eventDefinitionRefs\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_eventDefinitionRefs_throwEvent\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"dataInputAssociation\",\n          \"type\": \"DataInputAssociation\",\n          \"association\": \"A_dataInputAssociation_throwEvent\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"dataInputs\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_dataInputs_throwEvent\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"eventDefinitions\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_eventDefinitions_throwEvent\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CatchEvent\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Event\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"parallelMultiple\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\",\n          \"default\": false\n        },\n        {\n          \"name\": \"outputSet\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_outputSet_catchEvent\"\n        },\n        {\n          \"name\": \"eventDefinitionRefs\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_eventDefinitionRefs_catchEvent\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"dataOutputAssociation\",\n          \"type\": \"DataOutputAssociation\",\n          \"association\": \"A_dataOutputAssociation_catchEvent\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"dataOutputs\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_dataOutputs_catchEvent\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"eventDefinitions\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_eventDefinitions_catchEvent\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"BoundaryEvent\",\n      \"superClass\": [\n        \"CatchEvent\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"cancelActivity\",\n          \"default\": true,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"attachedToRef\",\n          \"type\": \"Activity\",\n          \"association\": \"A_boundaryEventRefs_attachedToRef\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"EventDefinition\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"RootElement\"\n      ]\n    },\n    {\n      \"name\": \"CancelEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ]\n    },\n    {\n      \"name\": \"ErrorEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"errorRef\",\n          \"type\": \"Error\",\n          \"association\": \"A_errorRef_errorEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"TerminateEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ]\n    },\n    {\n      \"name\": \"EscalationEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"escalationRef\",\n          \"type\": \"Escalation\",\n          \"association\": \"A_escalationRef_escalationEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Escalation\",\n      \"properties\": [\n        {\n          \"name\": \"structureRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_structureRef_escalation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"escalationCode\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ],\n      \"superClass\": [\n        \"RootElement\"\n      ]\n    },\n    {\n      \"name\": \"CompensateEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"waitForCompletion\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"activityRef\",\n          \"type\": \"Activity\",\n          \"association\": \"A_activityRef_compensateEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"TimerEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"timeDate\",\n          \"type\": \"Expression\",\n          \"association\": \"A_timeDate_timerEventDefinition\"\n        },\n        {\n          \"name\": \"timeCycle\",\n          \"type\": \"Expression\",\n          \"association\": \"A_timeCycle_timerEventDefinition\"\n        },\n        {\n          \"name\": \"timeDuration\",\n          \"type\": \"Expression\",\n          \"association\": \"A_timeDuration_timerEventDefinition\"\n        }\n      ]\n    },\n    {\n      \"name\": \"LinkEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"target\",\n          \"type\": \"LinkEventDefinition\",\n          \"association\": \"A_target_source\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"source\",\n          \"type\": \"LinkEventDefinition\",\n          \"association\": \"A_target_source\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"MessageEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"messageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_messageRef_messageEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"operationRef\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operationRef_messageEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ConditionalEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"condition\",\n          \"type\": \"Expression\",\n          \"association\": \"A_condition_conditionalEventDefinition\",\n          \"serialize\": \"xsi:type\"\n        }\n      ]\n    },\n    {\n      \"name\": \"SignalEventDefinition\",\n      \"superClass\": [\n        \"EventDefinition\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"signalRef\",\n          \"type\": \"Signal\",\n          \"association\": \"A_signalRef_signalEventDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Signal\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"structureRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_structureRef_signal\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ImplicitThrowEvent\",\n      \"superClass\": [\n        \"ThrowEvent\"\n      ]\n    },\n    {\n      \"name\": \"DataState\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ItemAwareElement\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"itemSubjectRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_itemSubjectRef_itemAwareElement\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"dataState\",\n          \"type\": \"DataState\",\n          \"association\": \"A_dataState_itemAwareElement\"\n        }\n      ]\n    },\n    {\n      \"name\": \"DataAssociation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"transformation\",\n          \"type\": \"FormalExpression\",\n          \"association\": \"A_transformation_dataAssociation\"\n        },\n        {\n          \"name\": \"assignment\",\n          \"type\": \"Assignment\",\n          \"association\": \"A_assignment_dataAssociation\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"sourceRef\",\n          \"type\": \"ItemAwareElement\",\n          \"association\": \"A_sourceRef_dataAssociation\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"targetRef\",\n          \"type\": \"ItemAwareElement\",\n          \"association\": \"A_targetRef_dataAssociation\",\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"DataInput\",\n      \"superClass\": [\n        \"ItemAwareElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"isCollection\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"inputSetRefs\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_dataInputRefs_inputSetRefs\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"inputSetWithOptional\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_optionalInputRefs_inputSetWithOptional\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"inputSetWithWhileExecuting\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_whileExecutingInputRefs_inputSetWithWhileExecuting\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"DataOutput\",\n      \"superClass\": [\n        \"ItemAwareElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"isCollection\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"outputSetRefs\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_dataOutputRefs_outputSetRefs\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outputSetWithOptional\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_outputSetWithOptional_optionalOutputRefs\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outputSetWithWhileExecuting\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_outputSetWithWhileExecuting_whileExecutingOutputRefs\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"InputSet\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"dataInputRefs\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_dataInputRefs_inputSetRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"optionalInputRefs\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_optionalInputRefs_inputSetWithOptional\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"whileExecutingInputRefs\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_whileExecutingInputRefs_inputSetWithWhileExecuting\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outputSetRefs\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_inputSetRefs_outputSetRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"OutputSet\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"dataOutputRefs\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_dataOutputRefs_outputSetRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"inputSetRefs\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_inputSetRefs_outputSetRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"optionalOutputRefs\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_outputSetWithOptional_optionalOutputRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"whileExecutingOutputRefs\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_outputSetWithWhileExecuting_whileExecutingOutputRefs\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Property\",\n      \"superClass\": [\n        \"ItemAwareElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"DataInputAssociation\",\n      \"superClass\": [\n        \"DataAssociation\"\n      ]\n    },\n    {\n      \"name\": \"DataOutputAssociation\",\n      \"superClass\": [\n        \"DataAssociation\"\n      ]\n    },\n    {\n      \"name\": \"InputOutputSpecification\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"inputSets\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_inputSets_inputOutputSpecification\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"outputSets\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_outputSets_inputOutputSpecification\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"dataInputs\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_dataInputs_inputOutputSpecification\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"dataOutputs\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_dataOutputs_inputOutputSpecification\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"DataObject\",\n      \"superClass\": [\n        \"FlowElement\",\n        \"ItemAwareElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"isCollection\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        }\n      ]\n    },\n    {\n      \"name\": \"InputOutputBinding\",\n      \"properties\": [\n        {\n          \"name\": \"inputDataRef\",\n          \"type\": \"InputSet\",\n          \"association\": \"A_inputDataRef_inputOutputBinding\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outputDataRef\",\n          \"type\": \"OutputSet\",\n          \"association\": \"A_outputDataRef_inputOutputBinding\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"operationRef\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operationRef_ioBinding\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Assignment\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"from\",\n          \"type\": \"Expression\",\n          \"association\": \"A_from_assignment\"\n        },\n        {\n          \"name\": \"to\",\n          \"type\": \"Expression\",\n          \"association\": \"A_to_assignment\"\n        }\n      ]\n    },\n    {\n      \"name\": \"DataStore\",\n      \"superClass\": [\n        \"RootElement\",\n        \"ItemAwareElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"capacity\",\n          \"isAttr\": true,\n          \"type\": \"Integer\"\n        },\n        {\n          \"name\": \"isUnlimited\",\n          \"default\": true,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        }\n      ]\n    },\n    {\n      \"name\": \"DataStoreReference\",\n      \"superClass\": [\n        \"ItemAwareElement\",\n        \"FlowElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"dataStoreRef\",\n          \"type\": \"DataStore\",\n          \"association\": \"A_dataStoreRef_dataStoreReference\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"DataObjectReference\",\n      \"superClass\": [\n        \"ItemAwareElement\",\n        \"FlowElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"dataObjectRef\",\n          \"type\": \"DataObject\",\n          \"association\": \"A_dataObjectRef_dataObject\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ConversationLink\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"sourceRef\",\n          \"type\": \"InteractionNode\",\n          \"association\": \"A_sourceRef_outgoingConversationLinks\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"targetRef\",\n          \"type\": \"InteractionNode\",\n          \"association\": \"A_targetRef_incomingConversationLinks\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ConversationAssociation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"innerConversationNodeRef\",\n          \"type\": \"ConversationNode\",\n          \"association\": \"A_innerConversationNodeRef_conversationAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outerConversationNodeRef\",\n          \"type\": \"ConversationNode\",\n          \"association\": \"A_outerConversationNodeRef_conversationAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CallConversation\",\n      \"superClass\": [\n        \"ConversationNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"calledCollaborationRef\",\n          \"type\": \"Collaboration\",\n          \"association\": \"A_calledCollaborationRef_callConversation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"participantAssociations\",\n          \"type\": \"ParticipantAssociation\",\n          \"association\": \"A_participantAssociations_callConversation\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Conversation\",\n      \"superClass\": [\n        \"ConversationNode\"\n      ]\n    },\n    {\n      \"name\": \"SubConversation\",\n      \"superClass\": [\n        \"ConversationNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"conversationNodes\",\n          \"type\": \"ConversationNode\",\n          \"association\": \"A_conversationNodes_subConversation\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ConversationNode\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"InteractionNode\",\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"participantRefs\",\n          \"type\": \"Participant\",\n          \"association\": \"A_participantRefs_conversationNode\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"messageFlowRefs\",\n          \"type\": \"MessageFlow\",\n          \"association\": \"A_messageFlowRefs_communication\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"correlationKeys\",\n          \"type\": \"CorrelationKey\",\n          \"association\": \"A_correlationKeys_conversationNode\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"GlobalConversation\",\n      \"superClass\": [\n        \"Collaboration\"\n      ]\n    },\n    {\n      \"name\": \"PartnerEntity\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"participantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_partnerEntityRef_participantRef\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"PartnerRole\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"participantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_partnerRoleRef_participantRef\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CorrelationProperty\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"correlationPropertyRetrievalExpression\",\n          \"type\": \"CorrelationPropertyRetrievalExpression\",\n          \"association\": \"A_correlationPropertyRetrievalExpression_correlationproperty\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"type\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_type_correlationProperty\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Error\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"structureRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_structureRef_error\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"errorCode\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"CorrelationKey\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"correlationPropertyRef\",\n          \"type\": \"CorrelationProperty\",\n          \"association\": \"A_correlationPropertyRef_correlationKey\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Expression\",\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"FormalExpression\",\n      \"superClass\": [\n        \"Expression\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"language\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"body\",\n          \"type\": \"Element\"\n        },\n        {\n          \"name\": \"evaluatesToTypeRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_evaluatesToTypeRef_formalExpression\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Message\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"itemRef\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_itemRef_message\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ItemDefinition\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"itemKind\",\n          \"type\": \"ItemKind\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"structureRef\",\n          \"type\": \"String\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isCollection\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"import\",\n          \"type\": \"Import\",\n          \"association\": \"A_import_itemDefinition\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"FlowElement\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"auditing\",\n          \"type\": \"Auditing\",\n          \"association\": \"A_auditing_flowElement\"\n        },\n        {\n          \"name\": \"monitoring\",\n          \"type\": \"Monitoring\",\n          \"association\": \"A_monitoring_flowElement\"\n        },\n        {\n          \"name\": \"categoryValueRef\",\n          \"type\": \"CategoryValue\",\n          \"association\": \"A_categorizedFlowElements_categoryValueRef\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"SequenceFlow\",\n      \"superClass\": [\n        \"FlowElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"isImmediate\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"conditionExpression\",\n          \"type\": \"Expression\",\n          \"association\": \"A_conditionExpression_sequenceFlow\"\n        },\n        {\n          \"name\": \"sourceRef\",\n          \"type\": \"FlowNode\",\n          \"association\": \"A_sourceRef_outgoing_flow\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"targetRef\",\n          \"type\": \"FlowNode\",\n          \"association\": \"A_targetRef_incoming_flow\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"FlowElementsContainer\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"laneSets\",\n          \"type\": \"LaneSet\",\n          \"association\": \"A_laneSets_flowElementsContainer\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"flowElements\",\n          \"type\": \"FlowElement\",\n          \"association\": \"A_flowElements_container\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CallableElement\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"ioSpecification\",\n          \"type\": \"InputOutputSpecification\",\n          \"association\": \"A_ioSpecification_callableElement\"\n        },\n        {\n          \"name\": \"supportedInterfaceRefs\",\n          \"type\": \"Interface\",\n          \"association\": \"A_supportedInterfaceRefs_callableElements\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"ioBinding\",\n          \"type\": \"InputOutputBinding\",\n          \"association\": \"A_ioBinding_callableElement\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"FlowNode\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"FlowElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"incoming\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_targetRef_incoming_flow\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outgoing\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_sourceRef_outgoing_flow\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"lanes\",\n          \"type\": \"Lane\",\n          \"association\": \"A_flowNodeRefs_lanes\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CorrelationPropertyRetrievalExpression\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"messagePath\",\n          \"type\": \"FormalExpression\",\n          \"association\": \"A_messagePath_correlationset\"\n        },\n        {\n          \"name\": \"messageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_messageRef_correlationPropertyRetrievalExpression\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CorrelationPropertyBinding\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"dataPath\",\n          \"type\": \"FormalExpression\",\n          \"association\": \"A_dataPath_correlationPropertyBinding\"\n        },\n        {\n          \"name\": \"correlationPropertyRef\",\n          \"type\": \"CorrelationProperty\",\n          \"association\": \"A_correlationPropertyRef_correlationPropertyBinding\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Resource\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"resourceParameters\",\n          \"type\": \"ResourceParameter\",\n          \"association\": \"A_resourceParameters_resource\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ResourceParameter\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"isRequired\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"type\",\n          \"type\": \"ItemDefinition\",\n          \"association\": \"A_type_resourceParameter\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CorrelationSubscription\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"correlationKeyRef\",\n          \"type\": \"CorrelationKey\",\n          \"association\": \"A_correlationKeyRef_correlationSubscription\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"correlationPropertyBinding\",\n          \"type\": \"CorrelationPropertyBinding\",\n          \"association\": \"A_correlationPropertyBinding_correlationSubscription\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"MessageFlow\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"sourceRef\",\n          \"type\": \"InteractionNode\",\n          \"association\": \"A_sourceRef_messageFlow\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"targetRef\",\n          \"type\": \"InteractionNode\",\n          \"association\": \"A_targetRef_messageFlow\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"messageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_messageRef_messageFlow\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"MessageFlowAssociation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"innerMessageFlowRef\",\n          \"type\": \"MessageFlow\",\n          \"association\": \"A_innerMessageFlowRef_messageFlowAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outerMessageFlowRef\",\n          \"type\": \"MessageFlow\",\n          \"association\": \"A_outerMessageFlowRef_messageFlowAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"InteractionNode\",\n      \"isAbstract\": true,\n      \"properties\": [\n        {\n          \"name\": \"incomingConversationLinks\",\n          \"type\": \"ConversationLink\",\n          \"association\": \"A_targetRef_incomingConversationLinks\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outgoingConversationLinks\",\n          \"type\": \"ConversationLink\",\n          \"association\": \"A_sourceRef_outgoingConversationLinks\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Participant\",\n      \"superClass\": [\n        \"InteractionNode\",\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"interfaceRefs\",\n          \"type\": \"Interface\",\n          \"association\": \"A_interfaceRefs_participant\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"participantMultiplicity\",\n          \"type\": \"ParticipantMultiplicity\",\n          \"association\": \"A_participantMultiplicity_participant\"\n        },\n        {\n          \"name\": \"endPointRefs\",\n          \"type\": \"EndPoint\",\n          \"association\": \"A_endPointRefs_participant\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"processRef\",\n          \"type\": \"Process\",\n          \"association\": \"A_processRef_participant\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ParticipantAssociation\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"innerParticipantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_innerParticipantRef_participantAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"outerParticipantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_outerParticipantRef_participantAssociation\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ParticipantMultiplicity\",\n      \"properties\": [\n        {\n          \"name\": \"minimum\",\n          \"default\": 0,\n          \"isAttr\": true,\n          \"type\": \"Integer\"\n        },\n        {\n          \"name\": \"maximum\",\n          \"default\": 1,\n          \"isAttr\": true,\n          \"type\": \"Integer\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Collaboration\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"isClosed\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"choreographyRef\",\n          \"type\": \"Choreography\",\n          \"association\": \"A_choreographyRef_collaboration\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"artifacts\",\n          \"type\": \"Artifact\",\n          \"association\": \"A_artifacts_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"participantAssociations\",\n          \"type\": \"ParticipantAssociation\",\n          \"association\": \"A_participantAssociations_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"messageFlowAssociations\",\n          \"type\": \"MessageFlowAssociation\",\n          \"association\": \"A_messageFlowAssociations_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"conversationAssociations\",\n          \"type\": \"ConversationAssociation\",\n          \"association\": \"A_conversationAssociations_converstaionAssociations\"\n        },\n        {\n          \"name\": \"participants\",\n          \"type\": \"Participant\",\n          \"association\": \"A_participants_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"messageFlows\",\n          \"type\": \"MessageFlow\",\n          \"association\": \"A_messageFlows_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"correlationKeys\",\n          \"type\": \"CorrelationKey\",\n          \"association\": \"A_correlationKeys_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"conversations\",\n          \"type\": \"ConversationNode\",\n          \"association\": \"A_conversations_collaboration\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"conversationLinks\",\n          \"type\": \"ConversationLink\",\n          \"association\": \"A_conversationLinks_collaboration\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ChoreographyActivity\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"FlowNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"participantRefs\",\n          \"type\": \"Participant\",\n          \"association\": \"A_participantRefs_choreographyActivity\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"initiatingParticipantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_initiatingParticipantRef_choreographyActivity\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"correlationKeys\",\n          \"type\": \"CorrelationKey\",\n          \"association\": \"A_correlationKeys_choreographyActivity\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"loopType\",\n          \"type\": \"ChoreographyLoopType\",\n          \"default\": \"None\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"CallChoreography\",\n      \"superClass\": [\n        \"ChoreographyActivity\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"calledChoreographyRef\",\n          \"type\": \"Choreography\",\n          \"association\": \"A_calledChoreographyRef_callChoreographyActivity\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"participantAssociations\",\n          \"type\": \"ParticipantAssociation\",\n          \"association\": \"A_participantAssociations_callChoreographyActivity\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"SubChoreography\",\n      \"superClass\": [\n        \"ChoreographyActivity\",\n        \"FlowElementsContainer\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"artifacts\",\n          \"type\": \"Artifact\",\n          \"association\": \"A_artifacts_subChoreography\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ChoreographyTask\",\n      \"superClass\": [\n        \"ChoreographyActivity\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"messageFlowRef\",\n          \"type\": \"MessageFlow\",\n          \"association\": \"A_messageFlowRef_choreographyTask\",\n          \"isMany\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Choreography\",\n      \"superClass\": [\n        \"FlowElementsContainer\",\n        \"Collaboration\"\n      ]\n    },\n    {\n      \"name\": \"GlobalChoreographyTask\",\n      \"superClass\": [\n        \"Choreography\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"initiatingParticipantRef\",\n          \"type\": \"Participant\",\n          \"association\": \"A_initiatingParticipantRef_globalChoreographyTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"TextAnnotation\",\n      \"superClass\": [\n        \"Artifact\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"text\",\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"textFormat\",\n          \"default\": \"text/plain\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Group\",\n      \"superClass\": [\n        \"Artifact\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"categoryValueRef\",\n          \"type\": \"CategoryValue\",\n          \"association\": \"A_categoryValueRef_categoryValueRef\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Association\",\n      \"superClass\": [\n        \"Artifact\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"associationDirection\",\n          \"type\": \"AssociationDirection\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"sourceRef\",\n          \"type\": \"BaseElement\",\n          \"association\": \"A_sourceRef_outgoing_association\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"targetRef\",\n          \"type\": \"BaseElement\",\n          \"association\": \"A_targetRef_incoming_association\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Category\",\n      \"superClass\": [\n        \"RootElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"categoryValue\",\n          \"type\": \"CategoryValue\",\n          \"association\": \"A_categoryValue_category\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Artifact\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"CategoryValue\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"categorizedFlowElements\",\n          \"type\": \"FlowElement\",\n          \"association\": \"A_categorizedFlowElements_categoryValueRef\",\n          \"isVirtual\": true,\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"value\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Activity\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"FlowNode\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"isForCompensation\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"loopCharacteristics\",\n          \"type\": \"LoopCharacteristics\",\n          \"association\": \"A_loopCharacteristics_activity\"\n        },\n        {\n          \"name\": \"resources\",\n          \"type\": \"ResourceRole\",\n          \"association\": \"A_resources_activity\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"default\",\n          \"type\": \"SequenceFlow\",\n          \"association\": \"A_default_activity\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"properties\",\n          \"type\": \"Property\",\n          \"association\": \"A_properties_activity\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"ioSpecification\",\n          \"type\": \"InputOutputSpecification\",\n          \"association\": \"A_ioSpecification_activity\"\n        },\n        {\n          \"name\": \"boundaryEventRefs\",\n          \"type\": \"BoundaryEvent\",\n          \"association\": \"A_boundaryEventRefs_attachedToRef\",\n          \"isMany\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"dataInputAssociations\",\n          \"type\": \"DataInputAssociation\",\n          \"association\": \"A_dataInputAssociations_activity\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"dataOutputAssociations\",\n          \"type\": \"DataOutputAssociation\",\n          \"association\": \"A_dataOutputAssociations_activity\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"startQuantity\",\n          \"default\": 1,\n          \"isAttr\": true,\n          \"type\": \"Integer\"\n        },\n        {\n          \"name\": \"completionQuantity\",\n          \"default\": 1,\n          \"isAttr\": true,\n          \"type\": \"Integer\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ServiceTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"operationRef\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operationRef_serviceTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"SubProcess\",\n      \"superClass\": [\n        \"Activity\",\n        \"FlowElementsContainer\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"triggeredByEvent\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"artifacts\",\n          \"type\": \"Artifact\",\n          \"association\": \"A_artifacts_subProcess\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"LoopCharacteristics\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"BaseElement\"\n      ]\n    },\n    {\n      \"name\": \"MultiInstanceLoopCharacteristics\",\n      \"superClass\": [\n        \"LoopCharacteristics\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"isSequential\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"behavior\",\n          \"type\": \"MultiInstanceBehavior\",\n          \"default\": \"All\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"loopCardinality\",\n          \"type\": \"Expression\",\n          \"association\": \"A_loopCardinality_multiInstanceLoopCharacteristics\"\n        },\n        {\n          \"name\": \"loopDataInputRef\",\n          \"type\": \"ItemAwareElement\",\n          \"association\": \"A_loopDataInputRef_multiInstanceLoopCharacteristics\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"loopDataOutputRef\",\n          \"type\": \"ItemAwareElement\",\n          \"association\": \"A_loopDataOutputRef_multiInstanceLoopCharacteristics\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"inputDataItem\",\n          \"type\": \"DataInput\",\n          \"association\": \"A_inputDataItem_multiInstanceLoopCharacteristics\"\n        },\n        {\n          \"name\": \"outputDataItem\",\n          \"type\": \"DataOutput\",\n          \"association\": \"A_outputDataItem_multiInstanceLoopCharacteristics\"\n        },\n        {\n          \"name\": \"completionCondition\",\n          \"type\": \"Expression\",\n          \"association\": \"A_completionCondition_multiInstanceLoopCharacteristics\"\n        },\n        {\n          \"name\": \"complexBehaviorDefinition\",\n          \"type\": \"ComplexBehaviorDefinition\",\n          \"association\": \"A_complexBehaviorDefinition_multiInstanceLoopCharacteristics\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"oneBehaviorEventRef\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_oneBehaviorEventRef_multiInstanceLoopCharacteristics\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"noneBehaviorEventRef\",\n          \"type\": \"EventDefinition\",\n          \"association\": \"A_noneBehaviorEventRef_multiInstanceLoopCharacteristics\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"StandardLoopCharacteristics\",\n      \"superClass\": [\n        \"LoopCharacteristics\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"testBefore\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"loopCondition\",\n          \"type\": \"Expression\",\n          \"association\": \"A_loopCondition_standardLoopCharacteristics\"\n        },\n        {\n          \"name\": \"loopMaximum\",\n          \"type\": \"Expression\",\n          \"association\": \"A_loopMaximum_standardLoopCharacteristics\"\n        }\n      ]\n    },\n    {\n      \"name\": \"CallActivity\",\n      \"superClass\": [\n        \"Activity\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"calledElement\",\n          \"type\": \"String\",\n          \"association\": \"A_calledElementRef_callActivity\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Task\",\n      \"superClass\": [\n        \"Activity\",\n        \"InteractionNode\"\n      ]\n    },\n    {\n      \"name\": \"SendTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"operationRef\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operationRef_sendTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"messageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_messageRef_sendTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ReceiveTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"instantiate\",\n          \"default\": false,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"operationRef\",\n          \"type\": \"Operation\",\n          \"association\": \"A_operationRef_receiveTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"messageRef\",\n          \"type\": \"Message\",\n          \"association\": \"A_messageRef_receiveTask\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ScriptTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"scriptFormat\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"script\",\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"BusinessRuleTask\",\n      \"superClass\": [\n        \"Task\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"AdHocSubProcess\",\n      \"superClass\": [\n        \"SubProcess\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"completionCondition\",\n          \"type\": \"Expression\",\n          \"association\": \"A_completionCondition_adHocSubProcess\"\n        },\n        {\n          \"name\": \"ordering\",\n          \"type\": \"AdHocOrdering\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"cancelRemainingInstances\",\n          \"default\": true,\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Transaction\",\n      \"superClass\": [\n        \"SubProcess\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"protocol\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"method\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"GlobalScriptTask\",\n      \"superClass\": [\n        \"GlobalTask\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"scriptLanguage\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"script\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"GlobalBusinessRuleTask\",\n      \"superClass\": [\n        \"GlobalTask\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"implementation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ComplexBehaviorDefinition\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"condition\",\n          \"type\": \"FormalExpression\",\n          \"association\": \"A_condition_complexBehaviorDefinition\"\n        },\n        {\n          \"name\": \"event\",\n          \"type\": \"ImplicitThrowEvent\",\n          \"association\": \"A_event_complexBehaviorDefinition\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ResourceRole\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"resourceRef\",\n          \"type\": \"Resource\",\n          \"association\": \"A_resourceRef_activityResource\",\n          \"isAttr\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"resourceParameterBindings\",\n          \"type\": \"ResourceParameterBinding\",\n          \"association\": \"A_resourceParameterBindings_activityResource\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"resourceAssignmentExpression\",\n          \"type\": \"ResourceAssignmentExpression\",\n          \"association\": \"A_resourceAssignmentExpression_activityResource\"\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ResourceParameterBinding\",\n      \"properties\": [\n        {\n          \"name\": \"expression\",\n          \"type\": \"Expression\",\n          \"association\": \"A_expression_resourceParameterBinding\"\n        },\n        {\n          \"name\": \"parameterRef\",\n          \"type\": \"ResourceParameter\",\n          \"association\": \"A_parameterRef_resourceParameterBinding\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"ResourceAssignmentExpression\",\n      \"properties\": [\n        {\n          \"name\": \"expression\",\n          \"type\": \"Expression\",\n          \"association\": \"A_expression_resourceAssignmentExpression\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Import\",\n      \"properties\": [\n        {\n          \"name\": \"importType\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"location\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"namespace\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Definitions\",\n      \"superClass\": [\n        \"BaseElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"targetNamespace\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"expressionLanguage\",\n          \"default\": \"http://www.w3.org/1999/XPath\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"typeLanguage\",\n          \"default\": \"http://www.w3.org/2001/XMLSchema\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"imports\",\n          \"type\": \"Import\",\n          \"association\": \"A_imports_definition\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"extensions\",\n          \"type\": \"Extension\",\n          \"association\": \"A_extensions_definitions\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"relationships\",\n          \"type\": \"Relationship\",\n          \"association\": \"A_relationships_definition\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"rootElements\",\n          \"type\": \"RootElement\",\n          \"association\": \"A_rootElements_definition\",\n          \"isMany\": true\n        },\n        {\n          \"name\": \"diagrams\",\n          \"association\": \"A_diagrams_definitions\",\n          \"isMany\": true,\n          \"type\": \"bpmndi:BPMNDiagram\"\n        },\n        {\n          \"name\": \"exporter\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"exporterVersion\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        }\n      ]\n    }\n  ],\n  \"emumerations\": [\n    {\n      \"name\": \"ProcessType\",\n      \"literalValues\": [\n        {\n          \"name\": \"None\"\n        },\n        {\n          \"name\": \"Public\"\n        },\n        {\n          \"name\": \"Private\"\n        }\n      ]\n    },\n    {\n      \"name\": \"GatewayDirection\",\n      \"literalValues\": [\n        {\n          \"name\": \"Unspecified\"\n        },\n        {\n          \"name\": \"Converging\"\n        },\n        {\n          \"name\": \"Diverging\"\n        },\n        {\n          \"name\": \"Mixed\"\n        }\n      ]\n    },\n    {\n      \"name\": \"EventBasedGatewayType\",\n      \"literalValues\": [\n        {\n          \"name\": \"Parallel\"\n        },\n        {\n          \"name\": \"Exclusive\"\n        }\n      ]\n    },\n    {\n      \"name\": \"RelationshipDirection\",\n      \"literalValues\": [\n        {\n          \"name\": \"None\"\n        },\n        {\n          \"name\": \"Forward\"\n        },\n        {\n          \"name\": \"Backward\"\n        },\n        {\n          \"name\": \"Both\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ItemKind\",\n      \"literalValues\": [\n        {\n          \"name\": \"Physical\"\n        },\n        {\n          \"name\": \"Information\"\n        }\n      ]\n    },\n    {\n      \"name\": \"ChoreographyLoopType\",\n      \"literalValues\": [\n        {\n          \"name\": \"None\"\n        },\n        {\n          \"name\": \"Standard\"\n        },\n        {\n          \"name\": \"MultiInstanceSequential\"\n        },\n        {\n          \"name\": \"MultiInstanceParallel\"\n        }\n      ]\n    },\n    {\n      \"name\": \"AssociationDirection\",\n      \"literalValues\": [\n        {\n          \"name\": \"None\"\n        },\n        {\n          \"name\": \"One\"\n        },\n        {\n          \"name\": \"Both\"\n        }\n      ]\n    },\n    {\n      \"name\": \"MultiInstanceBehavior\",\n      \"literalValues\": [\n        {\n          \"name\": \"None\"\n        },\n        {\n          \"name\": \"One\"\n        },\n        {\n          \"name\": \"All\"\n        },\n        {\n          \"name\": \"Complex\"\n        }\n      ]\n    },\n    {\n      \"name\": \"AdHocOrdering\",\n      \"literalValues\": [\n        {\n          \"name\": \"Parallel\"\n        },\n        {\n          \"name\": \"Sequential\"\n        }\n      ]\n    }\n  ],\n  \"prefix\": \"bpmn\",\n  \"xml\": {\n    \"alias\": \"lowerCase\"\n  }\n}\n},{}],40:[function(_dereq_,module,exports){\nmodule.exports={\n  \"name\": \"BPMNDI\",\n  \"uri\": \"http://www.omg.org/spec/BPMN/20100524/DI\",\n  \"types\": [\n    {\n      \"name\": \"BPMNDiagram\",\n      \"properties\": [\n        {\n          \"name\": \"plane\",\n          \"type\": \"BPMNPlane\",\n          \"association\": \"A_plane_diagram\",\n          \"redefines\": \"di:Diagram#rootElement\"\n        },\n        {\n          \"name\": \"labelStyle\",\n          \"type\": \"BPMNLabelStyle\",\n          \"association\": \"A_labelStyle_diagram\",\n          \"isMany\": true\n        }\n      ],\n      \"superClass\": [\n        \"di:Diagram\"\n      ]\n    },\n    {\n      \"name\": \"BPMNPlane\",\n      \"properties\": [\n        {\n          \"name\": \"bpmnElement\",\n          \"association\": \"A_bpmnElement_plane\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"bpmn:BaseElement\",\n          \"redefines\": \"di:DiagramElement#modelElement\"\n        }\n      ],\n      \"superClass\": [\n        \"di:Plane\"\n      ]\n    },\n    {\n      \"name\": \"BPMNShape\",\n      \"properties\": [\n        {\n          \"name\": \"bpmnElement\",\n          \"association\": \"A_bpmnElement_shape\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"bpmn:BaseElement\",\n          \"redefines\": \"di:DiagramElement#modelElement\"\n        },\n        {\n          \"name\": \"isHorizontal\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"isExpanded\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"isMarkerVisible\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"label\",\n          \"type\": \"BPMNLabel\",\n          \"association\": \"A_label_shape\"\n        },\n        {\n          \"name\": \"isMessageVisible\",\n          \"isAttr\": true,\n          \"type\": \"Boolean\"\n        },\n        {\n          \"name\": \"participantBandKind\",\n          \"type\": \"ParticipantBandKind\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"choreographyActivityShape\",\n          \"type\": \"BPMNShape\",\n          \"association\": \"A_choreographyActivityShape_participantBandShape\",\n          \"isAttr\": true,\n          \"isReference\": true\n        }\n      ],\n      \"superClass\": [\n        \"di:LabeledShape\"\n      ]\n    },\n    {\n      \"name\": \"BPMNEdge\",\n      \"properties\": [\n        {\n          \"name\": \"label\",\n          \"type\": \"BPMNLabel\",\n          \"association\": \"A_label_edge\"\n        },\n        {\n          \"name\": \"bpmnElement\",\n          \"association\": \"A_bpmnElement_edge\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"bpmn:BaseElement\",\n          \"redefines\": \"di:DiagramElement#modelElement\"\n        },\n        {\n          \"name\": \"sourceElement\",\n          \"association\": \"A_sourceElement_sourceEdge\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"di:DiagramElement\",\n          \"redefines\": \"di:Edge#source\"\n        },\n        {\n          \"name\": \"targetElement\",\n          \"association\": \"A_targetElement_targetEdge\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"type\": \"di:DiagramElement\",\n          \"redefines\": \"di:Edge#target\"\n        },\n        {\n          \"name\": \"messageVisibleKind\",\n          \"type\": \"MessageVisibleKind\",\n          \"isAttr\": true,\n          \"default\": \"initiating\"\n        }\n      ],\n      \"superClass\": [\n        \"di:LabeledEdge\"\n      ]\n    },\n    {\n      \"name\": \"BPMNLabel\",\n      \"properties\": [\n        {\n          \"name\": \"labelStyle\",\n          \"type\": \"BPMNLabelStyle\",\n          \"association\": \"A_labelStyle_label\",\n          \"isAttr\": true,\n          \"isReference\": true,\n          \"redefines\": \"di:DiagramElement#style\"\n        }\n      ],\n      \"superClass\": [\n        \"di:Label\"\n      ]\n    },\n    {\n      \"name\": \"BPMNLabelStyle\",\n      \"properties\": [\n        {\n          \"name\": \"font\",\n          \"type\": \"dc:Font\"\n        }\n      ],\n      \"superClass\": [\n        \"di:Style\"\n      ]\n    }\n  ],\n  \"emumerations\": [\n    {\n      \"name\": \"ParticipantBandKind\",\n      \"literalValues\": [\n        {\n          \"name\": \"top_initiating\"\n        },\n        {\n          \"name\": \"middle_initiating\"\n        },\n        {\n          \"name\": \"bottom_initiating\"\n        },\n        {\n          \"name\": \"top_non_initiating\"\n        },\n        {\n          \"name\": \"middle_non_initiating\"\n        },\n        {\n          \"name\": \"bottom_non_initiating\"\n        }\n      ]\n    },\n    {\n      \"name\": \"MessageVisibleKind\",\n      \"literalValues\": [\n        {\n          \"name\": \"initiating\"\n        },\n        {\n          \"name\": \"non_initiating\"\n        }\n      ]\n    }\n  ],\n  \"associations\": [],\n  \"prefix\": \"bpmndi\"\n}\n},{}],41:[function(_dereq_,module,exports){\nmodule.exports={\n  \"name\": \"DC\",\n  \"uri\": \"http://www.omg.org/spec/DD/20100524/DC\",\n  \"types\": [\n    {\n      \"name\": \"Boolean\"\n    },\n    {\n      \"name\": \"Integer\"\n    },\n    {\n      \"name\": \"Real\"\n    },\n    {\n      \"name\": \"String\"\n    },\n    {\n      \"name\": \"Font\",\n      \"properties\": [\n        {\n          \"name\": \"name\",\n          \"type\": \"String\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"size\",\n          \"type\": \"Real\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isBold\",\n          \"type\": \"Boolean\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isItalic\",\n          \"type\": \"Boolean\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isUnderline\",\n          \"type\": \"Boolean\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"isStrikeThrough\",\n          \"type\": \"Boolean\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Point\",\n      \"properties\": [\n        {\n          \"name\": \"x\",\n          \"type\": \"Real\",\n          \"default\": \"0\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"y\",\n          \"type\": \"Real\",\n          \"default\": \"0\",\n          \"isAttr\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Bounds\",\n      \"properties\": [\n        {\n          \"name\": \"x\",\n          \"type\": \"Real\",\n          \"default\": \"0\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"y\",\n          \"type\": \"Real\",\n          \"default\": \"0\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"width\",\n          \"type\": \"Real\",\n          \"isAttr\": true\n        },\n        {\n          \"name\": \"height\",\n          \"type\": \"Real\",\n          \"isAttr\": true\n        }\n      ]\n    }\n  ],\n  \"prefix\": \"dc\",\n  \"associations\": []\n}\n},{}],42:[function(_dereq_,module,exports){\nmodule.exports={\n  \"name\": \"DI\",\n  \"uri\": \"http://www.omg.org/spec/DD/20100524/DI\",\n  \"types\": [\n    {\n      \"name\": \"DiagramElement\",\n      \"isAbstract\": true,\n      \"properties\": [\n        {\n          \"name\": \"owningDiagram\",\n          \"type\": \"Diagram\",\n          \"isReadOnly\": true,\n          \"association\": \"A_rootElement_owningDiagram\",\n          \"isVirtual\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"owningElement\",\n          \"type\": \"DiagramElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_ownedElement_owningElement\",\n          \"isVirtual\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"modelElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_modelElement_diagramElement\",\n          \"isVirtual\": true,\n          \"isReference\": true,\n          \"type\": \"Element\"\n        },\n        {\n          \"name\": \"style\",\n          \"type\": \"Style\",\n          \"isReadOnly\": true,\n          \"association\": \"A_style_diagramElement\",\n          \"isVirtual\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"ownedElement\",\n          \"type\": \"DiagramElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_ownedElement_owningElement\",\n          \"isVirtual\": true,\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Node\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"DiagramElement\"\n      ]\n    },\n    {\n      \"name\": \"Edge\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"DiagramElement\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"source\",\n          \"type\": \"DiagramElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_source_sourceEdge\",\n          \"isVirtual\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"target\",\n          \"type\": \"DiagramElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_target_targetEdge\",\n          \"isVirtual\": true,\n          \"isReference\": true\n        },\n        {\n          \"name\": \"waypoint\",\n          \"isUnique\": false,\n          \"isMany\": true,\n          \"type\": \"dc:Point\",\n          \"serialize\": \"xsi:type\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Diagram\",\n      \"isAbstract\": true,\n      \"properties\": [\n        {\n          \"name\": \"rootElement\",\n          \"type\": \"DiagramElement\",\n          \"isReadOnly\": true,\n          \"association\": \"A_rootElement_owningDiagram\",\n          \"isVirtual\": true\n        },\n        {\n          \"name\": \"name\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"documentation\",\n          \"isAttr\": true,\n          \"type\": \"String\"\n        },\n        {\n          \"name\": \"resolution\",\n          \"isAttr\": true,\n          \"type\": \"Real\"\n        },\n        {\n          \"name\": \"ownedStyle\",\n          \"type\": \"Style\",\n          \"isReadOnly\": true,\n          \"association\": \"A_ownedStyle_owningDiagram\",\n          \"isVirtual\": true,\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Shape\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Node\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"bounds\",\n          \"type\": \"dc:Bounds\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Plane\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Node\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"planeElement\",\n          \"type\": \"DiagramElement\",\n          \"subsettedProperty\": \"DiagramElement-ownedElement\",\n          \"association\": \"A_planeElement_plane\",\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"LabeledEdge\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Edge\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"ownedLabel\",\n          \"type\": \"Label\",\n          \"isReadOnly\": true,\n          \"subsettedProperty\": \"DiagramElement-ownedElement\",\n          \"association\": \"A_ownedLabel_owningEdge\",\n          \"isVirtual\": true,\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"LabeledShape\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Shape\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"ownedLabel\",\n          \"type\": \"Label\",\n          \"isReadOnly\": true,\n          \"subsettedProperty\": \"DiagramElement-ownedElement\",\n          \"association\": \"A_ownedLabel_owningShape\",\n          \"isVirtual\": true,\n          \"isMany\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"Label\",\n      \"isAbstract\": true,\n      \"superClass\": [\n        \"Node\"\n      ],\n      \"properties\": [\n        {\n          \"name\": \"bounds\",\n          \"type\": \"dc:Bounds\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Style\",\n      \"isAbstract\": true\n    }\n  ],\n  \"associations\": [],\n  \"prefix\": \"di\"\n}\n},{}],43:[function(_dereq_,module,exports){\nmodule.exports = _dereq_('./lib/Diagram');\n},{\"./lib/Diagram\":44}],44:[function(_dereq_,module,exports){\n'use strict';\n\nvar di = _dereq_('didi');\n\n/**\n * @namespace djs\n */\n\n/**\n * Bootstrap an injector from a list of modules, instantiating a number of default components\n *\n * @ignore\n * @param {Array<didi.Module>} bootstrapModules\n *\n * @return {didi.Injector} a injector to use to access the components\n */\nfunction bootstrap(bootstrapModules) {\n\n  var modules = [],\n      components = [];\n\n  function hasModule(m) {\n    return modules.indexOf(m) >= 0;\n  }\n\n  function addModule(m) {\n    modules.push(m);\n  }\n\n  function visit(m) {\n    if (hasModule(m)) {\n      return;\n    }\n\n    (m.__depends__ || []).forEach(visit);\n\n    if (hasModule(m)) {\n      return;\n    }\n\n    addModule(m);\n\n    (m.__init__ || []).forEach(function(c) {\n      components.push(c);\n    });\n  }\n\n  bootstrapModules.forEach(visit);\n\n  var injector = new di.Injector(modules);\n\n  components.forEach(function(c) {\n\n    // eagerly resolve component (fn or string)\n    injector[typeof c === 'string' ? 'get' : 'invoke'](c);\n  });\n\n  return injector;\n}\n\n/**\n * Creates an injector from passed options.\n *\n * @ignore\n * @param  {Object} options\n * @return {didi.Injector}\n */\nfunction createInjector(options) {\n\n  options = options || {};\n\n  var configModule = {\n    'config': ['value', options]\n  };\n\n  var coreModule = _dereq_('./core');\n\n  var modules = [ configModule, coreModule ].concat(options.modules || []);\n\n  return bootstrap(modules);\n}\n\n\n/**\n * The main diagram-js entry point that bootstraps the diagram with the given\n * configuration. To register extensions with the diagram, pass them as Array<didi.Module> to the constructor.\n *\n * @class djs.Diagram\n * @memberOf djs\n * @constructor\n *\n * @example\n *\n * <caption>Creating a plug-in that logs whenever a shape is added to the canvas.</caption>\n *\n * // plug-in implemenentation\n * function MyLoggingPlugin(eventBus) {\n *   eventBus.on('shape.added', function(event) {\n *     console.log('shape ', event.shape, ' was added to the diagram');\n *   });\n * }\n *\n * // export as module\n * module.exports = {\n *   __init__: [ 'myLoggingPlugin' ],\n *     myLoggingPlugin: [ 'type', MyLoggingPlugin ]\n * };\n *\n *\n * // instantiate the diagram with the new plug-in\n *\n * var diagram = new Diagram({ modules: [ require('path-to-my-logging-plugin') ] });\n *\n * diagram.invoke([ 'canvas', function(canvas) {\n *   // add shape to drawing canvas\n *   canvas.addShape({ x: 10, y: 10 });\n * });\n *\n * // 'shape ... was added to the diagram' logged to console\n *\n * @param {Object} options\n * @param {Array<didi.Module>} [options.modules] external modules to instantiate with the diagram\n * @param {didi.Injector} [injector] an (optional) injector to bootstrap the diagram with\n */\nfunction Diagram(options, injector) {\n\n  // create injector unless explicitly specified\n  this.injector = injector = injector || createInjector(options);\n\n  // API\n\n  /**\n   * Resolves a diagram service\n   *\n   * @method Diagram#get\n   *\n   * @param {String} name the name of the diagram service to be retrieved\n   * @param {Object} [locals] a number of locals to use to resolve certain dependencies\n   */\n  this.get = injector.get;\n\n  /**\n   * Executes a function into which diagram services are injected\n   *\n   * @method Diagram#invoke\n   *\n   * @param {Function|Object[]} fn the function to resolve\n   * @param {Object} locals a number of locals to use to resolve certain dependencies\n   */\n  this.invoke = injector.invoke;\n\n  // init\n\n  // indicate via event\n\n\n  /**\n   * An event indicating that all plug-ins are loaded.\n   *\n   * Use this event to fire other events to interested plug-ins\n   *\n   * @memberOf Diagram\n   *\n   * @event diagram.init\n   *\n   * @example\n   *\n   * events.on('diagram.init', function() {\n   *   events.fire('my-custom-event', { foo: 'BAR' });\n   * });\n   *\n   * @type {Object}\n   */\n  this.get('eventBus').fire('diagram.init');\n}\n\nmodule.exports = Diagram;\n\n\n/**\n * Destroys the diagram\n *\n * @method  Diagram#destroy\n */\nDiagram.prototype.destroy = function() {\n  this.get('eventBus').fire('diagram.destroy');\n};\n},{\"./core\":50,\"didi\":71}],45:[function(_dereq_,module,exports){\n'use strict';\n\n\nvar _ = (window._);\n\nvar remove = _dereq_('../util/Collections').remove;\n\n\nfunction round(number, resolution) {\n  return Math.round(number * resolution) / resolution;\n}\n\nfunction ensurePx(number) {\n  return _.isNumber(number) ? number + 'px' : number;\n}\n\n/**\n * Creates a HTML container element for a SVG element with\n * the given configuration\n *\n * @param  {Object} options\n * @return {HTMLElement} the container element\n */\nfunction createContainer(options) {\n\n  options = _.extend({}, { width: '100%', height: '100%' }, options);\n\n  var container = options.container || document.body;\n\n  // create a <div> around the svg element with the respective size\n  // this way we can always get the correct container size\n  // (this is impossible for <svg> elements at the moment)\n  var parent = document.createElement('div');\n  parent.setAttribute('class', 'djs-container');\n\n  _.extend(parent.style, {\n    position: 'relative',\n    width: ensurePx(options.width),\n    height: ensurePx(options.height)\n  });\n\n  container.appendChild(parent);\n\n  return parent;\n}\n\nfunction createGroup(parent, cls) {\n  return parent.group().attr({ 'class' : cls });\n}\n\nvar BASE_LAYER = 'base';\n\n\n/**\n * The main drawing canvas.\n *\n * @class\n * @constructor\n *\n * @emits Canvas#canvas.init\n *\n * @param {Object} config\n * @param {EventBus} eventBus\n * @param {GraphicsFactory} graphicsFactory\n * @param {ElementRegistry} elementRegistry\n * @param {Snap} snap\n */\nfunction Canvas(config, eventBus, graphicsFactory, elementRegistry, snap) {\n\n  this._snap = snap;\n  this._eventBus = eventBus;\n  this._elementRegistry = elementRegistry;\n  this._graphicsFactory = graphicsFactory;\n\n  this._init(config || {});\n}\n\nCanvas.$inject = [ 'config.canvas', 'eventBus', 'graphicsFactory', 'elementRegistry', 'snap' ];\n\nmodule.exports = Canvas;\n\n\nCanvas.prototype._init = function(config) {\n\n  // Creates a <svg> element that is wrapped into a <div>.\n  // This way we are always able to correctly figure out the size of the svg element\n  // by querying the parent node.\n  //\n  // (It is not possible to get the size of a svg element cross browser @ 2014-04-01)\n  //\n  // <div class=\"djs-container\" style=\"width: {desired-width}, height: {desired-height}\">\n  //   <svg width=\"100%\" height=\"100%\">\n  //    ...\n  //   </svg>\n  // </div>\n\n  // html container\n  var container = this._container = createContainer(config);\n\n  // svg root\n  var paper = this._paper = this._graphicsFactory.createPaper({\n    container: container,\n    width: '100%', height: '100%'\n  });\n\n  // drawing root\n  var root = this._root = createGroup(paper, 'viewport');\n\n  // layers\n  this._layers = {};\n\n  var eventBus = this._eventBus;\n\n  eventBus.on('diagram.init', function(event) {\n\n    /**\n     * An event indicating that the canvas is ready to be drawn on.\n     *\n     * @memberOf Canvas\n     *\n     * @event canvas.init\n     *\n     * @type {Object}\n     * @property {snapsvg.Paper} paper the initialized drawing paper\n     */\n    eventBus.fire('canvas.init', { root: root, paper: paper });\n  });\n\n  var self = this;\n\n  eventBus.on('diagram.destroy', function() {\n\n    if (container) {\n      var parent = container.parentNode;\n      parent.removeChild(container);\n    }\n\n    self._paper.remove();\n\n    self._paper = self._root = self._layers = self._container = null;\n  });\n\n};\n\n\n/**\n * Ensure that an element has a valid, unique id\n *\n * @param {djs.model.Base} element\n */\nCanvas.prototype._ensureValidId = function(element) {\n  if (!element.id) {\n    throw new Error('element must have an id');\n  }\n\n  if (this._elementRegistry.getById(element.id)) {\n    throw new Error('element with id ' + element.id + ' already exists');\n  }\n};\n\n/**\n * Returns the root rendering context on which\n * all elements are drawn.\n *\n * @returns {snapsvg.Group}\n */\nCanvas.prototype.getRoot = function() {\n  return this._root;\n};\n\n\nCanvas.prototype.getLayer = function(name) {\n\n  var layer = this._layers[name || BASE_LAYER];\n  if (!layer) {\n    layer = this._layers[name] = createGroup(this._root, 'layer-' + name);\n  }\n\n  return layer;\n};\n\n\n/**\n * Returns the html element that encloses the\n * drawing canvas.\n *\n * @return {DOMNode}\n */\nCanvas.prototype.getContainer = function() {\n  return this._container;\n};\n\n\nCanvas.prototype._updateMarker = function(element, marker, add) {\n  var gfx;\n\n  if (_.isString(element)) {\n    element = this._elementRegistry.getById(element);\n  }\n\n  gfx = this.getGraphics(element);\n\n  var mode = add ? 'add' : 'remove';\n\n  // invoke either addClass or removeClass based on mode\n  gfx[add ? 'addClass' : 'removeClass'](marker);\n\n  /**\n   * An event indicating that a marker has been updated for an element\n   *\n   * @event element.marker.update\n   * @type {Object}\n   * @property {djs.model.Element} element the shape\n   * @property {Object} gfx the graphical representation of the shape\n   * @property {String} marker\n   * @property {Boolean} add true if the marker was added, false if it got removed\n   */\n  this._eventBus.fire('element.marker.update', { element: element,  gfx: gfx, marker: marker, add: !!add });\n};\n\n\n/**\n * Adds a marker to an element (basically a css class).\n *\n * Fires the element.marker.update event, making it possible to\n * integrate extension into the marker life-cycle, too.\n *\n * @example\n * canvas.addMarker('foo', 'some-marker');\n *\n * var fooGfx = canvas.getGraphics('foo');\n *\n * fooGfx; // <g class=\"... some-marker\"> ... </g>\n *\n * @param {String|djs.model.Base} element\n * @param {String} marker\n */\nCanvas.prototype.addMarker = function(element, marker) {\n  this._updateMarker(element, marker, true);\n};\n\n\n/**\n * Remove a marker from an element.\n *\n * Fires the element.marker.update event, making it possible to\n * integrate extension into the marker life-cycle, too.\n *\n * @param  {String|djs.model.Base} element\n * @param  {String} marker\n */\nCanvas.prototype.removeMarker = function(element, marker) {\n  this._updateMarker(element, marker, false);\n};\n\n\n/**\n * Adds a shape to the canvas\n *\n * @param {Object|djs.model.Shape} shape to add to the diagram\n *\n * @return {djs.model.Shape} the added shape\n */\nCanvas.prototype.addShape = function(shape, parent) {\n\n  this._ensureValidId(shape);\n\n  if (parent) {\n    parent.children.push(shape);\n    shape.parent = parent;\n  }\n\n  // create shape gfx\n  var gfx = this._graphicsFactory.createShape(this.getLayer(BASE_LAYER), shape);\n\n  /**\n   * An event indicating that a new shape is being added to the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event shape.add\n   * @type {Object}\n   * @property {djs.model.Shape} element the shape\n   * @property {Object} gfx the graphical representation of the shape\n   */\n  this._eventBus.fire('shape.add', { element: shape, gfx: gfx });\n\n  this._elementRegistry.add(shape, gfx);\n\n  // update its visual\n  this._graphicsFactory.updateShape(shape, gfx);\n\n  /**\n   * An event indicating that a new shape has been added to the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event shape.added\n   * @type {Object}\n   * @property {djs.model.Shape} element the shape\n   * @property {Object} gfx the graphical representation of the shape\n   */\n  this._eventBus.fire('shape.added', { element: shape, gfx: gfx });\n\n  return shape;\n};\n\n\n/**\n * Adds a connection to the canvas\n *\n * @param {djs.model.Connection} connection to add to the diagram\n *\n * @return {djs.model.Connection} the added connection\n */\nCanvas.prototype.addConnection = function(connection, parent) {\n\n  this._ensureValidId(connection);\n\n  if (parent) {\n    parent.children.push(connection);\n    connection.parent = parent;\n  }\n\n  // create connection gfx\n  var gfx = this._graphicsFactory.createConnection(this.getLayer(BASE_LAYER), connection);\n\n  /**\n   * An event indicating that a new connection is being added to the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event connection.add\n   * @type {Object}\n   * @property {djs.model.Connection} element the connection\n   * @property {Object} gfx the graphical representation of the connection\n   */\n  this._eventBus.fire('connection.add', { element: connection, gfx: gfx });\n\n  this._elementRegistry.add(connection, gfx);\n\n  // update its visual\n  this._graphicsFactory.updateConnection(connection, gfx);\n\n  /**\n   * An event indicating that a new connection has been added to the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event connection.added\n   * @type {Object}\n   * @property {djs.model.Connection} element the connection\n   * @property {Object} gfx the graphical representation of the connection\n   */\n  this._eventBus.fire('connection.added', { element: connection, gfx: gfx });\n\n  return connection;\n};\n\n\n/**\n * Internal remove element\n */\nCanvas.prototype._removeElement = function(element, type) {\n\n  if (_.isString(element)) {\n    element = this._elementRegistry.getById(element);\n  }\n\n  var gfx = this.getGraphics(element);\n\n  this._eventBus.fire(type + '.remove', { element: element, gfx: gfx });\n\n  if (gfx) {\n    gfx.remove();\n  }\n\n  // unset parent <-> child relationship\n  remove(element.parent && element.parent.children, element);\n  element.parent = null;\n\n  this._eventBus.fire(type + '.removed', { element: element, gfx: gfx });\n\n  this._elementRegistry.remove(element, gfx);\n\n  return element;\n};\n\n\n/**\n * Removes a shape from the canvas\n *\n * @param {String|djs.model.Shape} shape or shape id to be removed\n *\n * @return {djs.model.Shape} the removed shape\n */\nCanvas.prototype.removeShape = function(shape) {\n\n  /**\n   * An event indicating that a shape is about to be removed from the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event shape.remove\n   * @type {Object}\n   * @property {djs.model.Shape} element the shape descriptor\n   * @property {Object} gfx the graphical representation of the shape\n   */\n\n  /**\n   * An event indicating that a shape has been removed from the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event shape.removed\n   * @type {Object}\n   * @property {djs.model.Shape} element the shape descriptor\n   * @property {Object} gfx the graphical representation of the shape\n   */\n  return this._removeElement(shape, 'shape');\n};\n\n\n/**\n * Removes a connection from the canvas\n *\n * @param {String|djs.model.Connection} connection or connection id to be removed\n *\n * @return {djs.model.Connection} the removed connection\n */\nCanvas.prototype.removeConnection = function(connection) {\n\n  /**\n   * An event indicating that a connection is about to be removed from the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event connection.remove\n   * @type {Object}\n   * @property {djs.model.Connection} element the connection descriptor\n   * @property {Object} gfx the graphical representation of the connection\n   */\n\n  /**\n   * An event indicating that a connection has been removed from the canvas.\n   *\n   * @memberOf Canvas\n   *\n   * @event connection.removed\n   * @type {Object}\n   * @property {djs.model.Connection} element the connection descriptor\n   * @property {Object} gfx the graphical representation of the connection\n   */\n  return this._removeElement(connection, 'connection');\n};\n\n\n/**\n * Sends a shape to the front.\n *\n * This method takes parent / child relationships between shapes into account\n * and makes sure that children are properly handled, too.\n *\n * @param {djs.model.Shape} shape descriptor of the shape to be sent to front\n * @param {boolean} [bubble=true] whether to send parent shapes to front, too\n */\nCanvas.prototype.sendToFront = function(shape, bubble) {\n\n  if (bubble !== false) {\n    bubble = true;\n  }\n\n  if (bubble && shape.parent) {\n    this.sendToFront(shape.parent);\n  }\n\n  _.forEach(shape.children, function(child) {\n    this.sendToFront(child, false);\n  }, this);\n\n  var gfx = this.getGraphics(shape),\n      gfxParent = gfx.parent();\n\n  gfx.remove().appendTo(gfxParent);\n};\n\n\n/**\n * Return the graphical object underlaying a certain diagram element\n *\n * @param {String|djs.model.Base} element descriptor of the element\n */\nCanvas.prototype.getGraphics = function(element) {\n  return this._elementRegistry.getGraphicsByElement(element);\n};\n\n\nCanvas.prototype._fireViewboxChange = function(viewbox) {\n  this._eventBus.fire('canvas.viewbox.changed', { viewbox: viewbox || this.viewbox() });\n};\n\n\n/**\n * Gets or sets the view box of the canvas, i.e. the area that is currently displayed\n *\n * @param  {Object} [box] the new view box to set\n * @param  {Number} box.x the top left X coordinate of the canvas visible in view box\n * @param  {Number} box.y the top left Y coordinate of the canvas visible in view box\n * @param  {Number} box.width the visible width\n * @param  {Number} box.height\n *\n * @example\n *\n * canvas.viewbox({ x: 100, y: 100, width: 500, height: 500 })\n *\n * // sets the visible area of the diagram to (100|100) -> (600|100)\n * // and and scales it according to the diagram width\n *\n * @return {Object} the current view box\n */\nCanvas.prototype.viewbox = function(box) {\n\n  var root = this._root;\n\n  var innerBox,\n      outerBox = this.getSize(),\n      matrix,\n      scale,\n      x, y;\n\n  if (!box) {\n    innerBox = root.getBBox(true);\n\n    matrix = root.transform().localMatrix;\n    scale = round(matrix.a, 1000);\n\n    x = round(-matrix.e || 0, 1000);\n    y = round(-matrix.f || 0, 1000);\n\n    return {\n      x: x ? x / scale : 0,\n      y: y ? y / scale : 0,\n      width: outerBox.width / scale,\n      height: outerBox.height / scale,\n      scale: scale,\n      inner: {\n        width: innerBox.width,\n        height: innerBox.height,\n        x: innerBox.x,\n        y: innerBox.y\n      },\n      outer: outerBox\n    };\n  } else {\n    scale = Math.max(outerBox.width / box.width, outerBox.height / box.height);\n\n    matrix = new this._snap.Matrix().scale(scale).translate(-box.x, -box.y);\n    root.transform(matrix);\n\n    this._fireViewboxChange();\n  }\n\n  return box;\n};\n\n\n/**\n * Gets or sets the scroll of the canvas.\n *\n * @param {Object} [delta] the new scroll to apply.\n *\n * @param {Number} [delta.dx]\n * @param {Number} [delta.dy]\n */\nCanvas.prototype.scroll = function(delta) {\n\n  var node = this._root.node;\n  var matrix = node.getCTM();\n\n  if (delta) {\n    delta = _.extend({ dx: 0, dy: 0 }, delta || {});\n\n    matrix = this._paper.node.createSVGMatrix().translate(delta.dx, delta.dy).multiply(matrix);\n\n    setCTM(node, matrix);\n\n    this._fireViewboxChange();\n  }\n\n  return { x: matrix.e, y: matrix.f };\n};\n\n\n/**\n * Gets or sets the current zoom of the canvas, optionally zooming to the specified position.\n *\n * @param {String|Number} [newScale] the new zoom level, either a number, i.e. 0.9,\n *                                   or `fit-viewport` to adjust the size to fit the current viewport\n * @param {String|Point} [center] the reference point { x: .., y: ..} to zoom to, 'auto' to zoom into mid or null\n *\n * @return {Number} the current scale\n */\nCanvas.prototype.zoom = function(newScale, center) {\n\n  var vbox = this.viewbox();\n\n  if (newScale === undefined) {\n    return vbox.scale;\n  }\n\n  var outer = vbox.outer;\n\n  if (newScale === 'fit-viewport') {\n    newScale = Math.min(1,\n      outer.width / (vbox.inner.width + vbox.inner.x),\n      outer.height / (vbox.inner.height + vbox.inner.y));\n  }\n\n  if (center === 'auto') {\n    center = {\n      x: outer.width / 2,\n      y: outer.height / 2\n    };\n  }\n\n  var matrix = this._setZoom(newScale, center);\n\n  this._fireViewboxChange();\n\n  return round(matrix.a, 1000);\n};\n\nfunction setCTM(node, m) {\n  var mstr = 'matrix(' + m.a + ',' + m.b + ',' + m.c + ',' + m.d + ',' + m.e + ',' + m.f + ')';\n  node.setAttribute('transform', mstr);\n}\n\nCanvas.prototype._setZoom = function(scale, center) {\n\n  var svg = this._paper.node,\n      viewport = this._root.node;\n\n  var matrix = svg.createSVGMatrix();\n  var point = svg.createSVGPoint();\n\n  var centerPoint,\n      originalPoint,\n      currentMatrix,\n      scaleMatrix,\n      newMatrix;\n\n  currentMatrix = viewport.getCTM();\n\n\n  var currentScale = currentMatrix.a;\n\n  if (center) {\n    centerPoint = _.extend(point, center);\n\n    // revert applied viewport transformations\n    originalPoint = centerPoint.matrixTransform(currentMatrix.inverse());\n\n    // create scale matrix\n    scaleMatrix = matrix\n                    .translate(originalPoint.x, originalPoint.y)\n                    .scale(1 / currentScale * scale)\n                    .translate(-originalPoint.x, -originalPoint.y);\n\n    newMatrix = currentMatrix.multiply(scaleMatrix);\n  } else {\n    newMatrix = matrix.scale(scale);\n  }\n\n  setCTM(this._root.node, newMatrix);\n\n  return newMatrix;\n};\n\n\n/**\n * Returns the size of the canvas\n *\n * @return {Dimensions}\n */\nCanvas.prototype.getSize = function () {\n  return {\n    width: this._container.clientWidth,\n    height: this._container.clientHeight\n  };\n};\n\n\n/**\n * Return the absolute bounding box for the given element\n *\n * The absolute bounding box may be used to display overlays in the\n * callers (browser) coordinate system rather than the zoomed in/out\n * canvas coordinates.\n *\n * @param  {ElementDescriptor} element\n * @return {Bounds} the absolute bounding box\n */\nCanvas.prototype.getAbsoluteBBox = function(element) {\n  var vbox = this.viewbox();\n  var bbox;\n\n  // connection\n  // use svg bbox\n  if (element.waypoints) {\n    var gfx = this.getGraphics(element);\n\n    var transformBBox = gfx.getBBox(true);\n    bbox = gfx.getBBox();\n\n    bbox.x -= transformBBox.x;\n    bbox.y -= transformBBox.y;\n\n    bbox.width += 2 * transformBBox.x;\n    bbox.height +=  2 * transformBBox.y;\n  }\n  // shapes\n  // use data\n  else {\n    bbox = element;\n  }\n\n  var x = bbox.x * vbox.scale - vbox.x * vbox.scale;\n  var y = bbox.y * vbox.scale - vbox.y * vbox.scale;\n\n  var width = bbox.width * vbox.scale;\n  var height = bbox.height * vbox.scale;\n\n  return {\n    x: x,\n    y: y,\n    width: width,\n    height: height\n  };\n};\n},{\"../util/Collections\":66}],46:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\n\nvar Model = _dereq_('../model');\n\n\n/**\n * A factory for diagram-js shapes\n */\nfunction ElementFactory() {\n  this._uid = 12;\n}\n\nmodule.exports = ElementFactory;\n\n\nElementFactory.prototype.createRoot = function(attrs) {\n  return this.create('root', attrs);\n};\n\nElementFactory.prototype.createLabel = function(attrs) {\n  return this.create('label', attrs);\n};\n\nElementFactory.prototype.createShape = function(attrs) {\n  return this.create('shape', attrs);\n};\n\nElementFactory.prototype.createConnection = function(attrs) {\n  return this.create('connection', attrs);\n};\n\n/**\n * Create a model element with the given type and\n * a number of pre-set attributes.\n *\n * @param  {String} type\n * @param  {Object} attrs\n * @return {djs.model.Base} the newly created model instance\n */\nElementFactory.prototype.create = function(type, attrs) {\n\n  attrs = attrs || {};\n\n  if (!attrs.id) {\n    attrs.id = type + '_' + (this._uid++);\n  }\n\n  return Model.create(type, attrs);\n};\n},{\"../model\":65}],47:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\n\n/**\n * @class\n *\n * A registry that keeps track of all shapes in the diagram.\n *\n * @param {EventBus} eventBus the event bus\n */\nfunction ElementRegistry(eventBus) {\n\n  // mapping element.id -> container\n  this._elementMap = {};\n\n  // mapping gfx.id -> container\n  this._graphicsMap = {};\n\n\n  var self = this;\n\n  eventBus.on('diagram.destroy', function(event) {\n    self._elementMap = null;\n    self._graphicsMap = null;\n  });\n}\n\nElementRegistry.$inject = [ 'eventBus' ];\n\nmodule.exports = ElementRegistry;\n\n\nElementRegistry.prototype.add = function(element, gfx) {\n  if (!element.id) {\n    throw new Error('element has no id');\n  }\n\n  if (!gfx.id) {\n    throw new Error('graphics has no id');\n  }\n\n  if (this._graphicsMap[gfx.id]) {\n    throw new Error('graphics with id ' + gfx.id + ' already registered');\n  }\n\n  if (this._elementMap[element.id]) {\n    throw new Error('element with id ' + element.id + ' already added');\n  }\n\n  this._elementMap[element.id] = this._graphicsMap[gfx.id] = { element: element, gfx: gfx };\n};\n\nElementRegistry.prototype.remove = function(element) {\n  var gfx = this.getGraphicsByElement(element);\n\n  delete this._elementMap[element.id];\n  delete this._graphicsMap[gfx.id];\n};\n\n\n/**\n * @method ElementRegistry#getByGraphics\n */\nElementRegistry.prototype.getByGraphics = function(gfx) {\n  var id = gfx.id || gfx;\n\n  var container = this._graphicsMap[id];\n  return container && container.element;\n};\n\n\n/**\n * @method ElementRegistry#getById\n */\nElementRegistry.prototype.getById = function(id) {\n  var container = this._elementMap[id];\n  return container && container.element;\n};\n\n/**\n * @method ElementRegistry#getGraphicsByElement\n */\nElementRegistry.prototype.getGraphicsByElement = function(element) {\n  var id = element.id || element;\n\n  var container = this._elementMap[id];\n  return container && container.gfx;\n};\n\n/**\n * @method ElementRegistry#getRoot\n *\n */\nElementRegistry.prototype.getRoot = function() {\n\n  var root;\n  _.forEach(this._elementMap, function(e) {\n\n      if (e.element.parent && !e.element.parent.parent) {\n        root = e.element.parent;\n      }\n  });\n  return root;\n};\n\n},{}],48:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar DEFAULT_PRIORITY = 1000;\n\nfunction Event() { }\n\nEvent.prototype = {\n  stopPropagation: function() {\n    this.propagationStopped = true;\n  },\n  preventDefault: function() {\n    this.defaultPrevented = true;\n  },\n  isPropagationStopped: function() {\n    return !!this.propagationStopped;\n  },\n  isDefaultPrevented: function() {\n    return !!this.defaultPrevented;\n  }\n};\n\n\nfunction extendEvent(event, eventType) {\n  return _.extend(event, Event.prototype, { type: eventType });\n}\n\n\n/**\n * @class\n *\n * A general purpose event bus\n */\nfunction EventBus() {\n  this._listeners = {};\n\n  // cleanup on destroy\n\n  var self = this;\n\n  this.on('diagram.destroy', function() {\n    self._listeners = null;\n  });\n}\n\nmodule.exports = EventBus;\n\nmodule.exports.Event = Event;\n\n\n/**\n * Register an event listener for events with the given name.\n *\n * The callback will be invoked with `event, ...additionalArguments`\n * that have been passed to {@link EventBus#fire}.\n *\n * Returning false from a listener will prevent the events default action\n * (if any is specified). To stop an event from being processed further in\n * other listeners execute `event.stopPropagation();`.\n *\n * @param {String|Array<String>} events\n * @param {Number} [priority=1000] the priority in which this listener is called, larger is higher\n * @param {Function} callback\n */\nEventBus.prototype.on = function(events, priority, callback) {\n\n  events = _.isArray(events) ? events : [ events ];\n\n  if (_.isFunction(priority)) {\n    callback = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  if (!_.isNumber(priority)) {\n    throw new Error('priority needs to be a number');\n  }\n\n  var self = this,\n      listener = { priority: priority, callback: callback };\n\n  _.forEach(events, function(e) {\n    self._addListener(e, listener);\n  });\n};\n\n\n/**\n * Register an event listener that is executed only once.\n *\n * @param {String} event the event name to register for\n * @param {Function} callback the callback to execute\n */\nEventBus.prototype.once = function(event, callback) {\n\n  var self = this;\n  var wrappedCallback = function() {\n    var eventType = arguments[0].type;\n    callback.apply(self, arguments);\n    self.off(eventType, wrappedCallback);\n  };\n\n  this.on(event, wrappedCallback);\n};\n\n\n/**\n * Removes event listeners by event and callback.\n *\n * If no callback is given, all listeners for a given event name are being removed.\n *\n * @param {String} event\n * @param {Function} [callback]\n */\nEventBus.prototype.off = function(event, callback) {\n  var listeners = this._getListeners(event),\n      l, i;\n\n  if (callback) {\n\n    // move through listeners from back to front\n    // and remove matching listeners\n    for (i = listeners.length - 1; !!(l = listeners[i]); i--) {\n      if (l.callback === callback) {\n        listeners.splice(i, 1);\n      }\n    }\n  } else {\n    // clear listeners\n    listeners.length = 0;\n  }\n};\n\n\n/**\n * Fires a named event.\n *\n * @example\n *\n * // fire event by name\n * events.fire('foo');\n *\n * // fire event object with nested type\n * var event = { type: 'foo' };\n * events.fire(event);\n *\n * // fire event with explicit type\n * var event = { x: 10, y: 20 };\n * events.fire('element.moved', event);\n *\n * // pass additional arguments to the event\n * events.on('foo', function(event, bar) {\n *   alert(bar);\n * });\n *\n * events.fire({ type: 'foo' }, 'I am bar!');\n *\n * @param {String} [name] the optional event name\n * @param {Object} [event] the event object\n * @param {...Object} additional arguments to be passed to the callback functions\n *\n * @return {Boolean} false if default was prevented\n */\nEventBus.prototype.fire = function() {\n\n  var event, eventType,\n      listeners, i, l,\n      args;\n\n  args = Array.prototype.slice.call(arguments);\n\n  eventType = args[0];\n\n  if (_.isObject(eventType)) {\n    event = eventType;\n\n    // parse type from event\n    eventType = event.type;\n  } else {\n    // remove name parameter\n    args.shift();\n\n    event = args[0] || {};\n\n    if (!args.length) {\n      args.push(event);\n    }\n  }\n\n  listeners = this._listeners[eventType];\n\n  if (!listeners) {\n    return true;\n  }\n\n  event = extendEvent(event, eventType);\n\n  for (i = 0, l; i < listeners.length; i++) {\n\n    // handle stopped propagation\n    if (event.isPropagationStopped()) {\n      break;\n    }\n\n    try {\n      // handle listeher returning false\n      if (listeners[i].callback.apply(null, args) === false) {\n        event.preventDefault();\n      }\n    } catch (e) {\n      if (!this.handleError(e)) {\n        console.error('unhandled error in event listener', e);\n        throw e;\n      }\n    }\n  }\n\n  return !event.isDefaultPrevented();\n};\n\n\nEventBus.prototype.handleError = function(error) {\n  return !this.fire('error', { error: error });\n};\n\n\nEventBus.prototype._addListener = function(event, listener) {\n\n  var listeners = this._getListeners(event),\n      i, l;\n\n  // ensure we order listeners by priority from\n  // 0 (high) to n > 0 (low)\n  for (i = 0; !!(l = listeners[i]); i++) {\n    if (l.priority < listener.priority) {\n      listeners.splice(i, 0, listener);\n      return;\n    }\n  }\n\n  listeners.push(listener);\n};\n\n\nEventBus.prototype._getListeners = function(name) {\n  var listeners = this._listeners[name];\n\n  if (!listeners) {\n    this._listeners[name] = listeners = [];\n  }\n\n  return listeners;\n};\n},{}],49:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Creates a gfx container for shapes and connections\n *\n * The layout is as follows:\n *\n * <g data-element-id=\"element-1\" class=\"djs-group djs-(type=shape|connection)\">\n *   <g class=\"djs-visual\">\n *     <!-- the renderer draws in here -->\n *   </g>\n *\n *   <!-- extensions (overlays, click box, ...) goes here\n * </g>\n *\n * @param {Object} root\n * @param {String} type the type of the element, i.e. shape | connection\n */\nfunction createContainer(root, type) {\n  var gfxContainer = root.group();\n\n  gfxContainer\n    .addClass('djs-group')\n    .addClass('djs-' + type);\n\n  return gfxContainer;\n}\n\n/**\n * Clears the graphical representation of the element and returns the\n * cleared result (the <g class=\"djs-visual\" /> element).\n */\nfunction clearVisual(gfx) {\n\n  var oldVisual = gfx.select('.djs-visual'),\n      newVisual = gfx.group().addClass('djs-visual');\n\n  if (oldVisual) {\n    newVisual.after(oldVisual);\n    oldVisual.remove();\n  }\n\n  return newVisual;\n}\n\n\nfunction createContainerFactory(type) {\n  return function(root, data) {\n    return createContainer(root, type).attr('data-element-id', data.id);\n  };\n}\n\n\n/**\n * A factory that creates graphical elements\n *\n * @param {Renderer} renderer\n * @param {Snap} snap\n */\nfunction GraphicsFactory(renderer, snap) {\n  this._renderer = renderer;\n  this._snap = snap;\n}\n\nGraphicsFactory.prototype.createShape = createContainerFactory('shape');\n\nGraphicsFactory.prototype.createConnection = createContainerFactory('connection');\n\nGraphicsFactory.prototype.createPaper = function(options) {\n  return this._snap.createSnapAt(options.width, options.height, options.container);\n};\n\n\nGraphicsFactory.prototype.updateShape = function(element, gfx) {\n\n  // clear visual\n  var gfxGroup = clearVisual(gfx);\n\n  // redraw\n  this._renderer.drawShape(gfxGroup, element);\n\n  // update positioning\n  gfx.translate(element.x, element.y);\n\n  gfx.attr('display', element.hidden ? 'none' : 'block');\n};\n\n\nGraphicsFactory.prototype.updateConnection = function(element, gfx) {\n\n  // clear visual\n  var gfxGroup = clearVisual(gfx);\n  this._renderer.drawConnection(gfxGroup, element);\n\n  gfx.attr('display', element.hidden ? 'none' : 'block');\n};\n\n\nGraphicsFactory.$inject = [ 'renderer', 'snap' ];\n\nmodule.exports = GraphicsFactory;\n},{}],50:[function(_dereq_,module,exports){\nmodule.exports = {\n  __depends__: [ _dereq_('../draw') ],\n  __init__: [ 'canvas' ],\n  canvas: [ 'type', _dereq_('./Canvas') ],\n  elementRegistry: [ 'type', _dereq_('./ElementRegistry') ],\n  elementFactory: [ 'type', _dereq_('./ElementFactory') ],\n  eventBus: [ 'type', _dereq_('./EventBus') ],\n  graphicsFactory: [ 'type', _dereq_('./GraphicsFactory') ]\n};\n},{\"../draw\":54,\"./Canvas\":45,\"./ElementFactory\":46,\"./ElementRegistry\":47,\"./EventBus\":48,\"./GraphicsFactory\":49}],51:[function(_dereq_,module,exports){\n'use strict';\n\nvar Snap = _dereq_('./Snap');\n\n\n/**\n * @class Renderer\n *\n * The default renderer used for shapes and connections.\n *\n * @param {Styles} styles\n */\nfunction Renderer(styles) {\n  this.CONNECTION_STYLE = styles.style([ 'no-fill' ], { strokeWidth: 5, stroke: 'fuchsia' });\n  this.SHAPE_STYLE = styles.style({ fill: 'white', stroke: 'fuchsia', strokeWidth: 2 });\n}\n\nmodule.exports = Renderer;\n\nRenderer.$inject = ['styles'];\n\n\nRenderer.prototype.drawShape = function drawShape(gfxGroup, data) {\n  if (data.width === undefined ||\n      data.height === undefined) {\n\n    throw new Error('must specify width and height properties for new shape');\n  }\n\n  return gfxGroup.rect(0, 0, data.width, data.height, 10, 10).attr(this.SHAPE_STYLE);\n};\n\nRenderer.prototype.drawConnection = function drawConnection(gfxGroup, data) {\n  return createLine(data.waypoints, this.CONNECTION_STYLE).appendTo(gfxGroup);\n};\n\n\nfunction toSVGPoints(points) {\n  var result = '';\n\n  for (var i = 0, p; !!(p = points[i]); i++) {\n    result += p.x + ',' + p.y + ' ';\n  }\n\n  return result;\n}\n\nfunction createLine(points, attrs) {\n  return Snap.create('polyline', { points: toSVGPoints(points) }).attr(attrs || {});\n}\n\nfunction updateLine(gfx, points) {\n  return gfx.attr({ points: toSVGPoints(points) });\n}\n\nmodule.exports.createLine = createLine;\nmodule.exports.updateLine = updateLine;\n},{\"./Snap\":52}],52:[function(_dereq_,module,exports){\nvar snapsvg = (window.Snap);\n\n// require snapsvg extensions\n_dereq_('./snapsvg-extensions');\n\nmodule.exports = snapsvg;\n},{\"./snapsvg-extensions\":55}],53:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\n\n/**\n * A component that manages shape styles\n */\nfunction Styles() {\n\n  var defaultTraits = {\n\n    'no-fill': {\n      fill: 'none'\n    },\n    'no-border': {\n      strokeOpacity: 0.0\n    },\n    'no-events': {\n      pointerEvents: 'none'\n    }\n  };\n\n  /**\n   * Builds a style definition from a className, a list of traits and an object of additional attributes.\n   *\n   * @param  {String} className\n   * @param  {Array<String>} traits\n   * @param  {Object} additionalAttrs\n   *\n   * @return {Object} the style defintion\n   */\n  this.cls = function(className, traits, additionalAttrs) {\n    var attrs = this.style(traits, additionalAttrs);\n\n    return _.extend(attrs, { 'class': className });\n  };\n\n  /**\n   * Builds a style definition from a list of traits and an object of additional attributes.\n   *\n   * @param  {Array<String>} traits\n   * @param  {Object} additionalAttrs\n   *\n   * @return {Object} the style defintion\n   */\n  this.style = function(traits, additionalAttrs) {\n\n    if (!_.isArray(traits) && !additionalAttrs) {\n      additionalAttrs = traits;\n      traits = [];\n    }\n\n    var attrs = _.inject(traits, function(attrs, t) {\n      return _.extend(attrs, defaultTraits[t] || {});\n    }, {});\n\n    return additionalAttrs ? _.extend(attrs, additionalAttrs) : attrs;\n  };\n}\n\nmodule.exports = Styles;\n},{}],54:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  renderer: [ 'type', _dereq_('./Renderer') ],\n  snap: [ 'value', _dereq_('./Snap') ],\n  styles: [ 'type', _dereq_('./Styles') ]\n};\n},{\"./Renderer\":51,\"./Snap\":52,\"./Styles\":53}],55:[function(_dereq_,module,exports){\n'use strict';\n\nvar Snap = (window.Snap);\n\n/**\n * @module snapsvg/extensions\n */\n\n/**\n * @namespace snapsvg\n */\n\n/**\n * @class snapsvg.Element\n */\n\n/**\n * @class ClassPlugin\n *\n * Extends snapsvg with methods to add and remove classes\n */\nSnap.plugin(function (Snap, Element, Paper, global) {\n\n  function split(str) {\n    return str.split(/\\s+/);\n  }\n\n  function join(array) {\n    return array.join(' ');\n  }\n\n  function getClasses(e) {\n    return split(e.attr('class') || '');\n  }\n\n  function setClasses(e, classes) {\n    e.attr('class', join(classes));\n  }\n\n  /**\n   * @method snapsvg.Element#addClass\n   *\n   * @example\n   *\n   * e.attr('class', 'selector');\n   *\n   * e.addClass('foo bar'); // adds classes foo and bar\n   * e.attr('class'); // -> 'selector foo bar'\n   *\n   * e.addClass('fooBar');\n   * e.attr('class'); // -> 'selector foo bar fooBar'\n   *\n   * @param {String} cls classes to be added to the element\n   *\n   * @return {snapsvg.Element} the element (this)\n   */\n  Element.prototype.addClass = function(cls) {\n    var current = getClasses(this),\n        add = split(cls),\n        i, e;\n\n    for (i = 0, e; !!(e = add[i]); i++) {\n      if (current.indexOf(e) === -1) {\n        current.push(e);\n      }\n    }\n\n    setClasses(this, current);\n\n    return this;\n  };\n\n  /**\n   * @method snapsvg.Element#hasClass\n   *\n   * @param  {String}  cls the class to query for\n   * @return {Boolean} returns true if the element has the given class\n   */\n  Element.prototype.hasClass = function(cls) {\n    if (!cls) {\n      throw new Error('[snapsvg] syntax: hasClass(clsStr)');\n    }\n\n    return getClasses(this).indexOf(cls) !== -1;\n  };\n\n  /**\n   * @method snapsvg.Element#removeClass\n   *\n   * @example\n   *\n   * e.attr('class', 'foo bar');\n   *\n   * e.removeClass('foo');\n   * e.attr('class'); // -> 'bar'\n   *\n   * e.removeClass('foo bar'); // removes classes foo and bar\n   * e.attr('class'); // -> ''\n   *\n   * @param {String} cls classes to be removed from element\n   *\n   * @return {snapsvg.Element} the element (this)\n   */\n  Element.prototype.removeClass = function(cls) {\n    var current = getClasses(this),\n        remove = split(cls),\n        i, e, idx;\n\n    for (i = 0, e; !!(e = remove[i]); i++) {\n      idx = current.indexOf(e);\n\n      if (idx !== -1) {\n        // remove element from array\n        current.splice(idx, 1);\n      }\n    }\n\n    setClasses(this, current);\n\n    return this;\n  };\n\n});\n\n/**\n * @class TranslatePlugin\n *\n * Extends snapsvg with methods to translate elements\n */\nSnap.plugin(function (Snap, Element, Paper, global) {\n\n  /*\n   * @method snapsvg.Element#translate\n   *\n   * @example\n   *\n   * e.translate(10, 20);\n   *\n   * // sets transform matrix to translate(10, 20)\n   *\n   * @param {Number} x translation\n   * @param {Number} y translation\n   *\n   * @return {snapsvg.Element} the element (this)\n   */\n  Element.prototype.translate = function(x, y) {\n    var matrix = new Snap.Matrix();\n    matrix.translate(x, y);\n    return this.transform(matrix);\n  };\n});\n\n\n/**\n * @class CreatePlugin\n *\n * Create an svg element without attaching it to the dom\n */\nSnap.plugin(function(Snap) {\n\n  Snap.create = function(name, attrs) {\n    return Snap._.wrap(Snap._.$(name, attrs));\n  };\n});\n\n\n/**\n * @class CreatSnapAtPlugin\n *\n * Extends snap.svg with a method to create a SVG element\n * at a specific position in the DOM.\n */\nSnap.plugin(function(Snap, Element, Paper, global) {\n\n  /*\n   * @method snapsvg.createSnapAt\n   *\n   * @example\n   *\n   * snapsvg.createSnapAt(parentNode, 200, 200);\n   *\n   * @param {Number} width of svg\n   * @param {Number} height of svg\n   * @param {Object} parentNode svg Element will be child of this\n   *\n   * @return {snapsvg.Element} the newly created wrapped SVG element instance\n   */\n  Snap.createSnapAt = function(width, height, parentNode) {\n\n    var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute('width', width);\n    svg.setAttribute('height', height);\n    if (!parentNode) {\n      parentNode = document.body;\n    }\n    parentNode.appendChild(svg);\n\n    return new Snap(svg);\n  };\n});\n},{}],56:[function(_dereq_,module,exports){\n'use strict';\n\n\nvar _ = (window._);\n\nvar Snap = (window.Snap);\n\nvar GraphicsUtil = _dereq_('../../util/GraphicsUtil'),\n    createLine = _dereq_('../../draw/Renderer').createLine;\n\n\n/**\n * A plugin that provides interactivity in terms of events (mouse over and selection to a diagram).\n *\n * @class\n *\n * @param {EventBus} eventBus\n */\nfunction InteractionEvents(eventBus, elementRegistry, styles) {\n\n  var HIT_STYLE = styles.cls('djs-hit', [ 'no-fill', 'no-border' ], {\n    stroke: 'white',\n    strokeWidth: 10\n  });\n\n  function fire(event, baseEvent, eventName) {\n    var e = _.extend({}, baseEvent, event);\n    eventBus.fire(eventName, e);\n  }\n\n  function registerEvents(eventBus) {\n\n    eventBus.on('canvas.init', function(event) {\n      var root = event.root;\n\n      // implement direct canvas click\n      event.paper.click(function(event) {\n\n        /**\n         * An event indicating that the canvas has been directly clicked\n         *\n         * @memberOf InteractionEvents\n         *\n         * @event canvas.click\n         *\n         * @type {Object}\n         */\n        eventBus.fire('canvas.click', _.extend({}, event, { root: root }));\n      });\n    });\n\n\n    eventBus.on([ 'shape.added', 'connection.added' ], function(event) {\n      var element = event.element,\n          gfx = event.gfx,\n          visual = GraphicsUtil.getVisual(gfx),\n          baseEvent = { element: element, gfx: gfx };\n\n      var hit, type;\n\n      if (element.waypoints) {\n        hit = createLine(element.waypoints);\n        type = 'connection';\n      } else {\n        hit = Snap.create('rect', { x: 0, y: 0, width: element.width, height: element.height });\n        type = 'shape';\n      }\n\n\n      hit.attr(HIT_STYLE).appendTo(gfx.node);\n\n      gfx.hover(function(e) {\n\n        /**\n         * An event indicating that shape|connection has been hovered\n         *\n         * shape.hover, connection.hover\n         */\n        fire(e, baseEvent, type + '.hover');\n      }, function(e) {\n        fire(e, baseEvent, type + '.out');\n      });\n\n      hit.click(function(e) {\n        fire(e, baseEvent, type + '.click');\n      });\n\n      hit.dblclick(function(e) {\n        fire(e, baseEvent, type + '.dblclick');\n      });\n    });\n\n    // on shape resize apply changes to djs-hit\n    eventBus.on('shape.resized', function(event) {\n      var shape     = event.shape,\n          gfx       = elementRegistry.getGraphicsByElement(shape),\n          newWidth  = event.newBBox.width,\n          newHeight = event.newBBox.height;\n\n      var hit = gfx.select('.djs-hit');\n\n      hit.attr({\n        height: newHeight,\n        width:  newWidth\n      });\n    });\n\n    eventBus.on('commandStack.shape.resize.reverted', function(event) {\n\n      var shape     = event.context.shape,\n          gfx       = elementRegistry.getGraphicsByElement(shape),\n          oldWidth  = event.context.oldBBox.width,\n          oldHeight = event.context.oldBBox.height;\n\n      var hit = gfx.select('.djs-hit');\n\n      hit.attr({\n        height: oldHeight,\n        width:  oldWidth\n      });\n    });\n  }\n\n  registerEvents(eventBus);\n}\n\n\nInteractionEvents.$inject = [ 'eventBus', 'elementRegistry', 'styles' ];\n\nmodule.exports = InteractionEvents;\n\n},{\"../../draw/Renderer\":51,\"../../util/GraphicsUtil\":67}],57:[function(_dereq_,module,exports){\nmodule.exports = {\n  __init__: [ 'interactionEvents' ],\n  interactionEvents: [ 'type', _dereq_('./InteractionEvents') ]\n};\n},{\"./InteractionEvents\":56}],58:[function(_dereq_,module,exports){\n'use strict';\n\nvar Snap = (window.Snap);\n\nvar GraphicsUtil = _dereq_('../../util/GraphicsUtil');\n\n\n/**\n * @class\n *\n * A plugin that adds an outline to shapes and connections that may be activated and styled\n * via CSS classes.\n *\n * @param {EventBus} events the event bus\n */\nfunction Outline(eventBus, styles, elementRegistry) {\n\n  var OUTLINE_OFFSET = 5;\n\n  var OUTLINE_STYLE = styles.cls('djs-outline', [ 'no-fill' ]);\n\n  function createOutline(gfx, bounds) {\n    return Snap.create('rect', OUTLINE_STYLE).prependTo(gfx);\n  }\n\n  function updateOutline(outline, bounds) {\n\n    outline.attr({\n      x: -OUTLINE_OFFSET,\n      y: -OUTLINE_OFFSET,\n      width: bounds.width + OUTLINE_OFFSET * 2,\n      height: bounds.height + OUTLINE_OFFSET * 2\n    });\n  }\n\n  eventBus.on('shape.added', function(event) {\n    var element = event.element,\n        gfx     = event.gfx;\n\n    var outline = createOutline(gfx, element);\n\n    updateOutline(outline, element);\n  });\n\n  eventBus.on('shape.resized', function(event) {\n    var shape = event.shape,\n        gfx   = elementRegistry.getGraphicsByElement(shape);\n\n    var outline = gfx.select('.djs-outline');\n\n    updateOutline(outline, shape);\n  });\n\n  eventBus.on('commandStack.shape.resize.reverted', function(event) {\n    var shape = event.context.shape,\n        gfx   = elementRegistry.getGraphicsByElement(shape);\n\n    var outline = gfx.select('.djs-outline');\n\n    updateOutline(outline, shape);\n  });\n\n  eventBus.on('connection.change', function(event) {\n    // TODO: update connection outline box\n  });\n\n  eventBus.on('shape.change', function(event) {\n    // TODO: update shape outline box\n  });\n}\n\n\nOutline.$inject = ['eventBus', 'styles', 'elementRegistry'];\n\nmodule.exports = Outline;\n\n},{\"../../util/GraphicsUtil\":67}],59:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  __init__: [ 'outline' ],\n  outline: [ 'type', _dereq_('./Outline') ]\n};\n},{\"./Outline\":58}],60:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._),\n    $ = (window.$);\n\n// document wide unique overlay ids\nvar ids = new (_dereq_('../../util/IdGenerator'))('ov');\n\n\n/**\n * A plugin that allows users to attach overlays to diagram elements.\n *\n * The overlay service will take care of overlay positioning during updates.\n *\n * @class\n *\n * @example\n *\n * // add a pink badge on the top left of the shape\n * overlays.add(someShape, {\n *   position: {\n *     top: -5,\n *     left: -5\n *   }\n *   html: '<div style=\"width: 10px; background: fuchsia; color: white;\">0</div>'\n * });\n *\n * // or add via shape id\n *\n * overlays.add('some-element-id', {\n *   position: {\n *     top: -5,\n *     left: -5\n *   }\n *   html: '<div style=\"width: 10px; background: fuchsia; color: white;\">0</div>'\n * });\n *\n * // or add with optional type\n *\n * overlays.add(someShape, 'badge', {\n *   position: {\n *     top: -5,\n *     left: -5\n *   }\n *   html: '<div style=\"width: 10px; background: fuchsia; color: white;\">0</div>'\n * });\n *\n *\n * // remove an overlay\n *\n * var id = overlays.add(...);\n * overlays.remove(id);\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {ElementRegistry} elementRegistry\n */\nfunction Overlays(config, eventBus, canvas, elementRegistry) {\n\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n  this._elementRegistry = elementRegistry;\n\n  this._ids = ids;\n\n  this._overlayDefaults = {\n    show: {\n      trigger: 'automatic',\n      minZoom: 0.7,\n      maxZoom: 5.0\n    }\n  };\n\n  /**\n   * Mapping overlay-id > overlay\n   */\n  this._overlays = {};\n\n  /**\n   * Mapping element-id > overlay container\n   */\n  this._overlayContainers = {};\n\n  // root html element for all overlays\n  this._overlayRoot = $('<div class=\"djs-overlay-container\" />')\n                        .css({ position: 'absolute', width: 0, height: 0 })\n                        .prependTo(canvas.getContainer());\n\n  this._init(config);\n}\n\n\nOverlays.$inject = [ 'config.overlays', 'eventBus', 'canvas', 'elementRegistry' ];\n\nmodule.exports = Overlays;\n\n\n/**\n * Returns the overlay with the specified id or a list of overlays\n * for an element with a given type.\n *\n * @example\n *\n * // return the single overlay with the given id\n * overlays.get('some-id');\n *\n * // return all overlays for the shape\n * overlays.get({ element: someShape });\n *\n * // return all overlays on shape with type 'badge'\n * overlays.get({ element: someShape, type: 'badge' });\n *\n * // shape can also be specified as id\n * overlays.get({ element: 'element-id', type: 'badge' });\n *\n *\n * @param {Object} filter\n * @param {String} [filter.id]\n * @param {String|djs.model.Base} [filter.element]\n * @param {String} [filter.type]\n *\n * @return {Object|Array<Object>} the overlay(s)\n */\nOverlays.prototype.get = function(filter) {\n\n  if (_.isString(filter)) {\n    filter = { id: filter };\n  }\n\n  if (filter.element) {\n    var container = this._getOverlayContainer(filter.element, true);\n\n    // return a list of overlays when filtering by element (+type)\n    if (container) {\n      return filter.type ? _.filter(container.overlays, { type: filter.type }) : _.clone(container.overlays);\n    } else {\n      return [];\n    }\n  } else\n  if (filter.type) {\n    return _.filter(this._overlays, { type: filter.type });\n  } else {\n    // return single element when filtering by id\n    return filter.id ? this._overlays[filter.id] : null;\n  }\n};\n\n/**\n * Adds a HTML overlay to an element.\n *\n * @param {String|djs.model.Base}   element   attach overlay to this shape\n * @param {String}                  [type]    optional type to assign to the overlay\n * @param {Object}                  overlay   the overlay configuration\n *\n * @param {String|DOMElement}       overlay.html                      html element to use as an overlay\n * @param {Object}                  [overlay.show]                    show configuration\n * @param {Number}                  overlay.show.minZoom              minimal zoom level to show the overlay\n * @param {Number}                  overlay.show.maxZoom              maximum zoom level to show the overlay\n * @param {String}                  [overlay.show.trigger=automatic]  automatic or manual (user triggers show)\n * @param {Object}                  overlay.show.position             where to attach the overlay\n * @param {Number}                  [overlay.show.position.left]      relative to element bbox left attachment\n * @param {Number}                  [overlay.show.position.top]       relative to element bbox top attachment\n * @param {Number}                  [overlay.show.position.bottom]    relative to element bbox bottom attachment\n * @param {Number}                  [overlay.show.position.right]     relative to element bbox right attachment\n *\n * @return {String}                 id that may be used to reference the overlay for update or removal\n */\nOverlays.prototype.add = function(element, type, overlay) {\n\n  if (_.isObject(type)) {\n    overlay = type;\n    type = null;\n  }\n\n  if (_.isString(element)) {\n    element = this._elementRegistry.getById(element);\n  }\n\n  if (element.waypoints) {\n    throw new Error('overlays for connections are not supported');\n  }\n\n  if (!overlay.position) {\n    throw new Error('must specifiy overlay position');\n  }\n\n  if (!overlay.html) {\n    throw new Error('must specifiy overlay html');\n  }\n\n  if (!element) {\n    throw new Error('invalid element specified');\n  }\n\n  var id = this._ids.next();\n\n  overlay = _.extend({}, this._overlayDefaults, overlay, {\n    id: id,\n    type: type,\n    element: element,\n    html: $(overlay.html)\n  });\n\n  this._addOverlay(overlay);\n\n  return id;\n};\n\n\n/**\n * Remove an overlay with the given id or all overlays matching the given filter.\n *\n * @see Overlays#get for filter options.\n *\n * @param {String} [id]\n * @param {Object} [filter]\n */\nOverlays.prototype.remove = function(filter) {\n\n  var overlays = this.get(filter) || [];\n\n  if (!_.isArray(overlays)) {\n    overlays = [ overlays ];\n  }\n\n  var self = this;\n\n  _.forEach(overlays, function(overlay) {\n\n    var container = self._getOverlayContainer(overlay.element, true);\n\n    if (overlay) {\n      overlay.html.remove();\n      overlay.htmlContainer.remove();\n\n      delete overlay.htmlContainer;\n      delete overlay.element;\n\n      delete self._overlays[overlay.id];\n    }\n\n    if (container) {\n      var idx = container.overlays.indexOf(overlay);\n      if (idx !== -1) {\n        container.overlays.splice(idx, 1);\n      }\n    }\n  });\n\n};\n\n\nOverlays.prototype.show = function() {\n  this._overlayRoot.show();\n};\n\n\nOverlays.prototype.hide = function() {\n  this._overlayRoot.hide();\n};\n\n\nOverlays.prototype._updateOverlayContainer = function(container) {\n  var element = container.element,\n      html = container.html;\n\n  // update container left,top according to the elements x,y coordinates\n  // this ensures we can attach child elements relative to this container\n\n  // TODO(nre): update according to element bbox (for connections)\n  html.css({ left: element.x, top: element.y });\n};\n\n\nOverlays.prototype._updateOverlay = function(overlay) {\n\n  var position = overlay.position,\n      htmlContainer = overlay.htmlContainer,\n      element = overlay.element;\n\n  // update overlay html relative to shape because\n  // it is already positioned on the element\n\n  // update relative\n  var left = position.left,\n      top = position.top;\n\n  if (position.right !== undefined) {\n    left = position.right * -1 + element.width;\n  }\n\n  if (position.bottom !== undefined) {\n    top = position.bottom * -1 + element.height;\n  }\n\n  htmlContainer.css({ left: left || 0, top: top || 0 });\n};\n\n\nOverlays.prototype._createOverlayContainer = function(element) {\n  var html = $('<div />')\n                .addClass('djs-overlays')\n                .addClass('djs-overlays-' + element.id)\n                .css({ position: 'absolute' });\n\n  html.appendTo(this._overlayRoot);\n\n  var container = {\n    html: html,\n    element: element,\n    overlays: []\n  };\n\n  this._updateOverlayContainer(container);\n\n  return container;\n};\n\n\nOverlays.prototype._updateRoot = function(viewbox) {\n  var a = viewbox.scale || 1;\n  var d = viewbox.scale || 1;\n  var e = viewbox.x || 0;\n  var f = viewbox.y || 0;\n\n  var matrix = 'matrix(' + a + ',0,0,' + d + ',' + (-1 * viewbox.x * a) + ',' + (-1 * viewbox.y * d) + ')';\n\n  this._overlayRoot.css('transform', matrix);\n};\n\n\nOverlays.prototype._getOverlayContainer = function(element, raw) {\n  var id = (element && element.id) || element;\n\n  var container = this._overlayContainers[id];\n  if (!container && !raw) {\n    container = this._overlayContainers[id] = this._createOverlayContainer(element);\n  }\n\n  return container;\n};\n\n\nOverlays.prototype._addOverlay = function(overlay) {\n\n  var id = overlay.id,\n      element = overlay.element;\n\n  var container = this._getOverlayContainer(element);\n\n  var htmlContainer = $('<div>', {\n    id: id,\n    'class': 'djs-overlay'\n  }).css({ position: 'absolute' }).append(overlay.html);\n\n  if (overlay.type) {\n    htmlContainer.addClass('djs-overlay-' + overlay.type);\n  }\n\n  overlay.htmlContainer = htmlContainer;\n\n  container.overlays.push(overlay);\n  container.html.append(htmlContainer);\n\n  this._overlays[id] = overlay;\n\n  this._updateOverlay(overlay);\n};\n\nOverlays.prototype._updateOverlayVisibilty = function(viewbox) {\n\n  _.forEach(this._overlays, function(overlay) {\n    if (overlay.show) {\n      if (overlay.show.minZoom > viewbox.scale ||\n          overlay.show.maxZoom < viewbox.scale) {\n        overlay.htmlContainer.hide();\n      } else {\n        overlay.htmlContainer.show();\n      }\n    }\n  });\n};\n\nOverlays.prototype._init = function(config) {\n\n  var eventBus = this._eventBus;\n\n  var self = this;\n\n\n  // scroll/zoom integration\n\n  var updateViewbox = function(viewbox) {\n    self._updateRoot(viewbox);\n    self._updateOverlayVisibilty(viewbox);\n\n    self.show();\n  };\n\n  if (!config || config.deferUpdate !== false) {\n    updateViewbox = _.debounce(updateViewbox, 300);\n  }\n\n  eventBus.on('canvas.viewbox.changed', function(event) {\n    self.hide();\n    updateViewbox(event.viewbox);\n  });\n\n\n  // remove integration\n\n  eventBus.on([ 'shape.remove', 'connection.remove' ], function(e) {\n    var overlays = self.get({ element: e.element });\n\n    _.forEach(overlays, function(o) {\n      self.remove(o.id);\n    });\n  });\n\n\n  // move integration\n\n  eventBus.on([\n    'commandStack.shape.move.executed',\n    'commandStack.shape.move.reverted'\n  ], function(e) {\n    var element = e.context.shape;\n\n    var container = self._getOverlayContainer(element, true);\n    if (container) {\n      self._updateOverlayContainer(container);\n    }\n  });\n\n  eventBus.on([\n    'commandStack.shape.resize.executed',\n    'commandStack.shape.resize.reverted'\n  ], function(e) {\n\n    var overlays = self._overlays;\n\n    var element = e.context.shape;\n\n    _.forEach(overlays, function(overlay) {\n      if (overlay.element.id === element.id) {\n        self._updateOverlay(overlay);\n      }\n    });\n\n    var container = self._getOverlayContainer(element, true);\n    if (container) {\n      self._updateOverlayContainer(container);\n    }\n  });\n\n  // marker integration, simply add them on the overlays as classes, too.\n\n  eventBus.on('element.marker.update', function(e) {\n    var container = self._getOverlayContainer(e.element, true);\n    if (container) {\n      container.html[e.add ? 'addClass' : 'removeClass'](e.marker);\n    }\n  });\n};\n\n},{\"../../util/IdGenerator\":68}],61:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  __init__: [ 'overlays' ],\n  overlays: [ 'type', _dereq_('./Overlays') ]\n};\n},{\"./Overlays\":60}],62:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\n\n/**\n * A service that offers the current selection in a diagram.\n * Offers the api to control the selection, too.\n *\n * @class\n *\n * @param {EventBus} eventBus the event bus\n */\nfunction Selection(eventBus) {\n\n  this._eventBus = eventBus;\n\n  this._selectedElements = [];\n\n  var self = this;\n\n  eventBus.on([ 'shape.remove', 'connection.remove' ], function(e) {\n    var element = e.element;\n    self.deselect(element);\n  });\n}\n\nSelection.$inject = [ 'eventBus' ];\n\nmodule.exports = Selection;\n\n\nSelection.prototype.deselect = function(element) {\n  var selectedElements = this._selectedElements;\n\n  var idx = selectedElements.indexOf(element);\n\n  if (idx !== -1) {\n    var oldSelection = selectedElements.slice();\n\n    selectedElements.splice(idx, 1);\n\n    this._eventBus.fire('selection.changed', { oldSelection: oldSelection, newSelection: selectedElements });\n  }\n};\n\n\nSelection.prototype.get = function() {\n  return this._selectedElements;\n};\n\nSelection.prototype.isSelected = function(element) {\n  return this._selectedElements.indexOf(element) !== -1;\n};\n\n\n/**\n * This method selects one or more elements on the diagram.\n *\n * By passing an additional add parameter you can decide whether or not the element(s)\n * should be added to the already existing selection or not.\n *\n * @method Selection#select\n *\n * @param  {Object|Object[]} elements element or array of elements to be selected\n * @param  {boolean} [add] whether the element(s) should be appended to the current selection, defaults to false\n */\nSelection.prototype.select = function(elements, add) {\n  var selectedElements = this._selectedElements,\n      oldSelection = selectedElements.slice();\n\n  if (!_.isArray(elements)) {\n    elements = elements ? [ elements ] : [];\n  }\n\n  var self = this;\n\n  // selection may be cleared by passing an empty array or null\n  // to the method\n  if (elements.length && add) {\n    _.forEach(elements, function(element) {\n      if (selectedElements.indexOf(element) !== -1) {\n        // already selected\n        return;\n      } else {\n        selectedElements.push(element);\n      }\n    });\n  } else {\n    this._selectedElements = selectedElements = elements.slice();\n  }\n\n  this._eventBus.fire('selection.changed', { oldSelection: oldSelection, newSelection: selectedElements });\n};\n},{}],63:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\n\nfunction originalEvent(e) {\n  return e.srcEvent || e;\n}\n\n\nvar MARKER_HOVER = 'hover',\n    MARKER_SELECTED = 'selected';\n\n\n/**\n * A plugin that adds a visible selection UI to shapes and connections\n * by appending the <code>hover</code> and <code>selected</code> classes to them.\n *\n * @class\n *\n * Makes elements selectable, too.\n *\n * @param {EventBus} events\n * @param {SelectionService} selection\n * @param {Canvas} canvas\n */\nfunction SelectionVisuals(events, selection, canvas) {\n\n  function addMarker(e, cls) {\n    canvas.addMarker(e, cls);\n  }\n\n  function removeMarker(e, cls) {\n    canvas.removeMarker(e, cls);\n  }\n\n  /**\n   * Wire click on shape to select the shape\n   *\n   * @param  {Object} event the fired event\n   */\n  events.on('shape.click', function(event) {\n    var add = originalEvent(event).shiftKey;\n    selection.select(event.element, add);\n  });\n\n  events.on('shape.hover', function(event) {\n    addMarker(event.element, MARKER_HOVER);\n  });\n\n  events.on('shape.out', function(event) {\n    removeMarker(event.element, MARKER_HOVER);\n  });\n\n  events.on('selection.changed', function(event) {\n\n    function deselect(s) {\n      removeMarker(s, MARKER_SELECTED);\n    }\n\n    function select(s) {\n      addMarker(s, MARKER_SELECTED);\n    }\n\n    var oldSelection = event.oldSelection,\n        newSelection = event.newSelection;\n\n    _.forEach(oldSelection, function(e) {\n      if (newSelection.indexOf(e) === -1) {\n        deselect(e);\n      }\n    });\n\n    _.forEach(newSelection, function(e) {\n      if (oldSelection.indexOf(e) === -1) {\n        select(e);\n      }\n    });\n  });\n\n  // deselect all selected shapes on canvas click\n  events.on('canvas.click', function(event) {\n    if (originalEvent(event).srcElement === event.root.paper.node) {\n      selection.select(null);\n    }\n  });\n}\n\nSelectionVisuals.$inject = [\n  'eventBus',\n  'selection',\n  'canvas'\n];\n\nmodule.exports = SelectionVisuals;\n\n},{}],64:[function(_dereq_,module,exports){\n'use strict';\n\nmodule.exports = {\n  __init__: [ 'selectionVisuals' ],\n  __depends__: [\n    _dereq_('../interaction-events'),\n    _dereq_('../outline')\n  ],\n  selection: [ 'type', _dereq_('./Selection') ],\n  selectionVisuals: [ 'type', _dereq_('./SelectionVisuals') ]\n};\n},{\"../interaction-events\":57,\"../outline\":59,\"./Selection\":62,\"./SelectionVisuals\":63}],65:[function(_dereq_,module,exports){\n'use strict';\n\nvar _ = (window._);\n\nvar Refs = _dereq_('object-refs');\n\nvar parentRefs = new Refs({ name: 'children', enumerable: true, collection: true }, { name: 'parent' }),\n    labelRefs = new Refs({ name: 'label', enumerable: true }, { name: 'labelTarget' }),\n    outgoingRefs = new Refs({ name: 'outgoing', collection: true }, { name: 'source' }),\n    incomingRefs = new Refs({ name: 'incoming', collection: true }, { name: 'target' });\n\n/**\n * @namespace djs.model\n */\n\n/**\n * @memberOf djs.model\n */\n\n/**\n * The basic graphical representation\n *\n * @class\n *\n * @abstract\n */\nfunction Base() {\n\n  /**\n   * The object that backs up the shape\n   *\n   * @name Base#businessObject\n   * @type Object\n   */\n  Object.defineProperty(this, 'businessObject', {\n    writable: true\n  });\n\n  /**\n   * The parent shape\n   *\n   * @name Base#parent\n   * @type Shape\n   */\n  parentRefs.bind(this, 'parent');\n\n  /**\n   * @name Base#label\n   * @type Label\n   */\n  labelRefs.bind(this, 'label');\n\n  /**\n   * The list of outgoing connections\n   *\n   * @name Base#outgoing\n   * @type Array<Connection>\n   */\n  outgoingRefs.bind(this, 'outgoing');\n\n  /**\n   * The list of outgoing connections\n   *\n   * @name Base#incoming\n   * @type Array<Connection>\n   */\n  incomingRefs.bind(this, 'incoming');\n}\n\n\n/**\n * A graphical object\n *\n * @class\n * @constructor\n *\n * @extends Base\n */\nfunction Shape() {\n  Base.call(this);\n\n  /**\n   * The list of children\n   *\n   * @name Shape#children\n   * @type Array<Base>\n   */\n  parentRefs.bind(this, 'children');\n}\n\nShape.prototype = Object.create(Base.prototype);\n\n\n/**\n * A root graphical object\n *\n * @class\n * @constructor\n *\n * @extends Shape\n */\nfunction Root() {\n  Shape.call(this);\n}\n\nRoot.prototype = Object.create(Shape.prototype);\n\n\n/**\n * A label for an element\n *\n * @class\n * @constructor\n *\n * @extends Shape\n */\nfunction Label() {\n  Shape.call(this);\n\n  /**\n   * The labeled element\n   *\n   * @name Label#labelTarget\n   * @type Base\n   */\n  labelRefs.bind(this, 'labelTarget');\n}\n\nLabel.prototype = Object.create(Shape.prototype);\n\n\n/**\n * A connection between two elements\n *\n * @class\n * @constructor\n *\n * @extends Base\n */\nfunction Connection() {\n  Base.call(this);\n\n  /**\n   * The element this connection originates from\n   *\n   * @name Connection#source\n   * @type Base\n   */\n  outgoingRefs.bind(this, 'source');\n\n  /**\n   * The element this connection points to\n   *\n   * @name Connection#target\n   * @type Base\n   */\n  incomingRefs.bind(this, 'target');\n}\n\nConnection.prototype = Object.create(Base.prototype);\n\n\nvar types = {\n  connection: Connection,\n  shape: Shape,\n  label: Label,\n  root: Root\n};\n\n/**\n * Creates a new model element of the specified type\n *\n * @method create\n *\n * @example\n *\n * var shape1 = Model.create('shape', { x: 10, y: 10, width: 100, height: 100 });\n * var shape2 = Model.create('shape', { x: 210, y: 210, width: 100, height: 100 });\n *\n * var connection = Model.create('connection', { waypoints: [ { x: 110, y: 55 }, {x: 210, y: 55 } ] });\n *\n * @param  {String} type lower-cased model name\n * @param  {Object} attrs attributes to initialize the new model instance with\n *\n * @return {Base} the new model instance\n */\nmodule.exports.create = function(type, attrs) {\n  var Type = types[type];\n  if (!Type) {\n    throw new Error('unknown type: <' + type + '>');\n  }\n  return _.extend(new Type(), attrs);\n};\n\n\nmodule.exports.Root = Root;\nmodule.exports.Shape = Shape;\nmodule.exports.Connection = Connection;\nmodule.exports.Label = Label;\n},{\"object-refs\":74}],66:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Failsafe remove an element from a collection\n *\n * @param  {Array<Object>} [collection]\n * @param  {Object} [element]\n *\n * @return {Object} the element that got removed or undefined\n */\nmodule.exports.remove = function(collection, element) {\n\n  if (!collection || !element) {\n    return;\n  }\n\n  var idx = collection.indexOf(element);\n  if (idx === -1) {\n    return;\n  }\n\n  collection.splice(idx, 1);\n\n  return element;\n};\n},{}],67:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * @module util/GraphicsUtil\n */\n\nfunction is(e, cls) {\n  return e.hasClass(cls);\n}\n\n\n/**\n *\n * A note on how SVG elements are structured:\n *\n * Shape layout:\n *\n * [group.djs-group.djs-shape]\n *  |-> [rect.djs-hit]\n *  |-> [rect.djs-visual]\n *  |-> [rect.djs-outline]\n *  ...\n *\n * [group.djs-group.djs-connection]\n *  |-> [polyline.djs-hit]\n *  |-> [polyline.djs-visual]\n *  |-> [polyline.djs-outline]\n *  ...\n *\n */\n\n/**\n * Returns the visual part of a diagram element\n *\n * @param  {snapsvg.Element} gfx\n * @return {snapsvg.Element}\n */\nfunction getVisual(gfx) {\n  return gfx.select('.djs-visual');\n}\n\n/**\n * Returns the visual bbox of an element\n *\n * @param  {snapsvg.Element} gfx\n * @return {snapsvg.Element}\n */\nfunction getBBox(gfx) {\n  return getVisual(gfx).select('*').getBBox();\n}\n\n\nmodule.exports.getBBox = getBBox;\nmodule.exports.getVisual = getVisual;\n},{}],68:[function(_dereq_,module,exports){\n'use strict';\n\n/**\n * Util that provides unique IDs.\n *\n * @class djs.util.IdGenerator\n * @memberOf djs.util\n *\n * @constructor\n *\n * The ids can be customized via a given prefix and contain a random value to avoid collisions.\n *\n * @param {String} prefix a prefix to prepend to generated ids (for better readability)\n */\nfunction IdGenerator(prefix) {\n\n  this._counter = 0;\n  this._prefix = (prefix ? prefix + '-' : '') + Math.floor(Math.random() * 1000000000) + '-';\n}\n\nmodule.exports = IdGenerator;\n\n/**\n * Returns a next unique ID.\n *\n * @method djs.util.IdGenerator#next\n *\n * @returns {String} the id\n */\nIdGenerator.prototype.next = function() {\n  return this._prefix + (++this._counter);\n};\n\n},{}],69:[function(_dereq_,module,exports){\n'use strict';\n\nvar Snap = (window.Snap);\nvar _ = (window._);\n\nvar DEFAULT_BOX_PADDING = 0;\n\nvar DEFAULT_LABEL_SIZE = {\n  width: 150,\n  height: 50\n};\n\n\nfunction parseAlign(align) {\n\n  var parts = align.split('-');\n\n  return {\n    horizontal: parts[0] || 'center',\n    vertical: parts[1] || 'top'\n  };\n}\n\nfunction parsePadding(padding) {\n\n  if (_.isObject(padding)) {\n    return _.extend({ top: 0, left: 0, right: 0, bottom: 0 }, padding);\n  } else {\n    return {\n      top: padding,\n      left: padding,\n      right: padding,\n      bottom: padding\n    };\n  }\n}\n\n\n/**\n * Creates a new label utility\n *\n * @param {Object} config\n * @param {Dimensions} config.size\n * @param {Number} config.padding\n * @param {Object} config.style\n * @param {String} config.align\n */\nfunction Text(config) {\n\n  this._config = _.extend({}, {\n    size: DEFAULT_LABEL_SIZE,\n    padding: DEFAULT_BOX_PADDING,\n    style: {},\n    align: 'center-top'\n  }, config || {});\n}\n\n/**\n * Create a label in the parent node.\n *\n * @method Text#createText\n *\n * @param {SVGElement} parent the parent to draw the label on\n * @param {String} text the text to render on the label\n * @param {Object} options\n * @param {String} options.align how to align in the bounding box.\n *                             Any of { 'center-middle', 'center-top' }, defaults to 'center-top'.\n * @param {String} options.style style to be applied to the text\n *\n * @return {SVGText} the text element created\n */\nText.prototype.createText = function(parent, text, options) {\n\n  var box = _.merge({}, this._config.size, options.box || {}),\n      style = _.merge({}, this._config.style, options.style || {}),\n      align = parseAlign(options.align || this._config.align),\n      padding = parsePadding(options.padding !== undefined ? options.padding : this._config.padding);\n\n  var lines = text.split(/\\r?\\n/g),\n      layouted = [];\n\n  var maxWidth = box.width - padding.left - padding.right;\n\n  var fakeText = parent.text(0, 0, '').attr(style).node;\n  // FF regression: ensure text is shown during rendering\n  // by attaching it directly to the body\n  fakeText.ownerSVGElement.appendChild(fakeText);\n\n  /**\n   * Layout the next line and return the layouted element.\n   *\n   * Alters the lines passed.\n   *\n   * @param  {Array<String>} lines\n   * @return {Object} the line descriptor, an object { width, height, text }\n   */\n  function layoutNext(lines) {\n\n    var originalLine = lines.shift(),\n        fitLine = originalLine;\n\n    var textBBox;\n\n    function fit() {\n      if (fitLine.length < originalLine.length) {\n        var nextLine = lines[0] || '',\n            remainder = originalLine.slice(fitLine.length);\n\n        if (/-\\s*$/.test(remainder)) {\n          nextLine = remainder.replace(/-\\s*$/, '') + nextLine.replace(/^\\s+/, '');\n        } else {\n          nextLine = remainder + ' ' + nextLine;\n        }\n\n        lines[0] = nextLine;\n      }\n      return { width: textBBox.width, height: textBBox.height, text: fitLine };\n    }\n\n    function getTextBBox(text) {\n      fakeText.textContent = text;\n      return fakeText.getBBox();\n    }\n\n    /**\n     * Shortens a line based on spacing and hyphens.\n     * Returns the shortened result on success.\n     *\n     * @param  {String} line\n     * @param  {Number} maxLength the maximum characters of the string\n     * @return {String} the shortened string\n     */\n    function semanticShorten(line, maxLength) {\n      var parts = line.split(/(\\s|-)/g),\n          part,\n          shortenedParts = [],\n          length = 0;\n\n      // try to shorten via spaces + hyphens\n      if (parts.length > 1) {\n        while ((part = parts.shift())) {\n\n          if (part.length + length < maxLength) {\n            shortenedParts.push(part);\n            length += part.length;\n          } else {\n            // remove previous part, too if hyphen does not fit anymore\n            if (part === '-') {\n              shortenedParts.pop();\n            }\n\n            break;\n          }\n        }\n      }\n\n      return shortenedParts.join('');\n    }\n\n    function shortenLine(line, width, maxWidth) {\n      var length = line.length * (maxWidth / width);\n\n      // try to shorten semantically (i.e. based on spaces and hyphens)\n      var shortenedLine = semanticShorten(line, length);\n\n      if (!shortenedLine) {\n\n        // force shorten by cutting the long word\n        shortenedLine = line.slice(0, Math.floor(length - 1));\n      }\n\n      return shortenedLine;\n    }\n\n\n    while (true) {\n\n      textBBox = getTextBBox(fitLine);\n\n      // try to fit\n      if (textBBox.width < maxWidth) {\n        return fit();\n      }\n\n      fitLine = shortenLine(fitLine, textBBox.width, maxWidth);\n    }\n  }\n\n  while (lines.length) {\n    layouted.push(layoutNext(lines));\n  }\n\n  var totalHeight = _.reduce(layouted, function(sum, line, idx) {\n    return sum + line.height;\n  }, 0);\n\n\n  // the center x position to align against\n  var cx = box.width / 2;\n\n  // the y position of the next line\n  var y, x;\n\n  switch (align.vertical) {\n    case 'middle':\n      y = (box.height - totalHeight) / 2 - layouted[0].height / 4;\n      break;\n\n    default:\n      y = padding.top;\n  }\n\n  var textElement = parent.text().attr(style);\n\n  _.forEach(layouted, function(line) {\n    y += line.height;\n\n    switch (align.horizontal) {\n      case 'left':\n        x = padding.left;\n        break;\n\n      case 'right':\n        x = (maxWidth - padding.right - line.width);\n        break;\n\n      default:\n        // aka center\n        x = (maxWidth - line.width) / 2 + padding.left;\n    }\n\n\n    var tspan = Snap.create('tspan', { x: x, y: y }).node;\n    tspan.textContent = line.text;\n\n    textElement.append(tspan);\n  });\n\n  // remove fake text\n  fakeText.parentNode.removeChild(fakeText);\n\n  return textElement;\n};\n\n\nmodule.exports = Text;\n},{}],70:[function(_dereq_,module,exports){\n\r\nvar isArray = function(obj) {\r\n  return Object.prototype.toString.call(obj) === '[object Array]';\r\n};\r\n\r\nvar annotate = function() {\r\n  var args = Array.prototype.slice.call(arguments);\r\n  \r\n  if (args.length === 1 && isArray(args[0])) {\r\n    args = args[0];\r\n  }\r\n\r\n  var fn = args.pop();\r\n\r\n  fn.$inject = args;\r\n\r\n  return fn;\r\n};\r\n\r\n\r\n// Current limitations:\r\n// - can't put into \"function arg\" comments\r\n// function /* (no parenthesis like this) */ (){}\r\n// function abc( /* xx (no parenthesis like this) */ a, b) {}\r\n//\r\n// Just put the comment before function or inside:\r\n// /* (((this is fine))) */ function(a, b) {}\r\n// function abc(a) { /* (((this is fine))) */}\r\n\r\nvar FN_ARGS = /^function\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m;\r\nvar FN_ARG = /\\/\\*([^\\*]*)\\*\\//m;\r\n\r\nvar parse = function(fn) {\r\n  if (typeof fn !== 'function') {\r\n    throw new Error('Cannot annotate \"' + fn + '\". Expected a function!');\r\n  }\r\n\r\n  var match = fn.toString().match(FN_ARGS);\r\n  return match[1] && match[1].split(',').map(function(arg) {\r\n    match = arg.match(FN_ARG);\r\n    return match ? match[1].trim() : arg.trim();\r\n  }) || [];\r\n};\r\n\r\n\r\nexports.annotate = annotate;\r\nexports.parse = parse;\r\nexports.isArray = isArray;\r\n\n},{}],71:[function(_dereq_,module,exports){\nmodule.exports = {\r\n  annotate: _dereq_('./annotation').annotate,\r\n  Module: _dereq_('./module'),\r\n  Injector: _dereq_('./injector')\r\n};\r\n\n},{\"./annotation\":70,\"./injector\":72,\"./module\":73}],72:[function(_dereq_,module,exports){\nvar Module = _dereq_('./module');\r\nvar autoAnnotate = _dereq_('./annotation').parse;\r\nvar annotate = _dereq_('./annotation').annotate;\r\nvar isArray = _dereq_('./annotation').isArray;\r\n\r\n\r\nvar Injector = function(modules, parent) {\r\n  parent = parent || {\r\n    get: function(name) {\r\n      currentlyResolving.push(name);\r\n      throw error('No provider for \"' + name + '\"!');\r\n    }\r\n  };\r\n\r\n  var currentlyResolving = [];\r\n  var providers = this._providers = Object.create(parent._providers || null);\r\n  var instances = this._instances = Object.create(null);\r\n\r\n  var self = instances.injector = this;\r\n\r\n  var error = function(msg) {\r\n    var stack = currentlyResolving.join(' -> ');\r\n    currentlyResolving.length = 0;\r\n    return new Error(stack ? msg + ' (Resolving: ' + stack + ')' : msg);\r\n  };\r\n\r\n  var get = function(name) {\r\n    if (!providers[name] && name.indexOf('.') !== -1) {\r\n      var parts = name.split('.');\r\n      var pivot = get(parts.shift());\r\n\r\n      while(parts.length) {\r\n        pivot = pivot[parts.shift()];\r\n      }\r\n\r\n      return pivot;\r\n    }\r\n\r\n    if (Object.hasOwnProperty.call(instances, name)) {\r\n      return instances[name];\r\n    }\r\n\r\n    if (Object.hasOwnProperty.call(providers, name)) {\r\n      if (currentlyResolving.indexOf(name) !== -1) {\r\n        currentlyResolving.push(name);\r\n        throw error('Cannot resolve circular dependency!');\r\n      }\r\n\r\n      currentlyResolving.push(name);\r\n      instances[name] = providers[name][0](providers[name][1]);\r\n      currentlyResolving.pop();\r\n\r\n      return instances[name];\r\n    }\r\n\r\n    return parent.get(name);\r\n  };\r\n\r\n  var instantiate = function(Type) {\r\n    var instance = Object.create(Type.prototype);\r\n    var returned = invoke(Type, instance);\r\n\r\n    return typeof returned === 'object' ? returned : instance;\r\n  };\r\n\r\n  var invoke = function(fn, context) {\r\n    if (typeof fn !== 'function') {\r\n      if (isArray(fn)) {\r\n        fn = annotate(fn.slice());\r\n      } else {\r\n        throw new Error('Cannot invoke \"' + fn + '\". Expected a function!');\r\n      }\r\n    }\r\n\r\n    var inject = fn.$inject && fn.$inject || autoAnnotate(fn);\r\n    var dependencies = inject.map(function(dep) {\r\n      return get(dep);\r\n    });\r\n\r\n    // TODO(vojta): optimize without apply\r\n    return fn.apply(context, dependencies);\r\n  };\r\n\r\n\r\n  var createPrivateInjectorFactory = function(privateChildInjector) {\r\n    return annotate(function(key) {\r\n      return privateChildInjector.get(key);\r\n    });\r\n  };\r\n\r\n  var createChild = function(modules, forceNewInstances) {\r\n    if (forceNewInstances && forceNewInstances.length) {\r\n      var fromParentModule = Object.create(null);\r\n      var matchedScopes = Object.create(null);\r\n\r\n      var privateInjectorsCache = [];\r\n      var privateChildInjectors = [];\r\n      var privateChildFactories = [];\r\n\r\n      var provider;\r\n      var cacheIdx;\r\n      var privateChildInjector;\r\n      var privateChildInjectorFactory;\r\n      for (var name in providers) {\r\n        provider = providers[name];\r\n\r\n        if (forceNewInstances.indexOf(name) !== -1) {\r\n          if (provider[2] === 'private') {\r\n            cacheIdx = privateInjectorsCache.indexOf(provider[3]);\r\n            if (cacheIdx === -1) {\r\n              privateChildInjector = provider[3].createChild([], forceNewInstances);\r\n              privateChildInjectorFactory = createPrivateInjectorFactory(privateChildInjector);\r\n              privateInjectorsCache.push(provider[3]);\r\n              privateChildInjectors.push(privateChildInjector);\r\n              privateChildFactories.push(privateChildInjectorFactory);\r\n              fromParentModule[name] = [privateChildInjectorFactory, name, 'private', privateChildInjector];\r\n            } else {\r\n              fromParentModule[name] = [privateChildFactories[cacheIdx], name, 'private', privateChildInjectors[cacheIdx]];\r\n            }\r\n          } else {\r\n            fromParentModule[name] = [provider[2], provider[1]];\r\n          }\r\n          matchedScopes[name] = true;\r\n        }\r\n\r\n        if ((provider[2] === 'factory' || provider[2] === 'type') && provider[1].$scope) {\r\n          forceNewInstances.forEach(function(scope) {\r\n            if (provider[1].$scope.indexOf(scope) !== -1) {\r\n              fromParentModule[name] = [provider[2], provider[1]];\r\n              matchedScopes[scope] = true;\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n      forceNewInstances.forEach(function(scope) {\r\n        if (!matchedScopes[scope]) {\r\n          throw new Error('No provider for \"' + scope + '\". Cannot use provider from the parent!');\r\n        }\r\n      });\r\n\r\n      modules.unshift(fromParentModule);\r\n    }\r\n\r\n    return new Injector(modules, self);\r\n  };\r\n\r\n  var factoryMap = {\r\n    factory: invoke,\r\n    type: instantiate,\r\n    value: function(value) {\r\n      return value;\r\n    }\r\n  };\r\n\r\n  modules.forEach(function(module) {\r\n\r\n    function arrayUnwrap(type, value) {\r\n      if (type !== 'value' && isArray(value)) {\r\n        value = annotate(value.slice());\r\n      }\r\n\r\n      return value;\r\n    }\r\n\r\n    // TODO(vojta): handle wrong inputs (modules)\r\n    if (module instanceof Module) {\r\n      module.forEach(function(provider) {\r\n        var name = provider[0];\r\n        var type = provider[1];\r\n        var value = provider[2];\r\n\r\n        providers[name] = [factoryMap[type], arrayUnwrap(type, value), type];\r\n      });\r\n    } else if (typeof module === 'object') {\r\n      if (module.__exports__) {\r\n        var clonedModule = Object.keys(module).reduce(function(m, key) {\r\n          if (key.substring(0, 2) !== '__') {\r\n            m[key] = module[key];\r\n          }\r\n          return m;\r\n        }, Object.create(null));\r\n\r\n        var privateInjector = new Injector((module.__modules__ || []).concat([clonedModule]), self);\r\n        var getFromPrivateInjector = annotate(function(key) {\r\n          return privateInjector.get(key);\r\n        });\r\n        module.__exports__.forEach(function(key) {\r\n          providers[key] = [getFromPrivateInjector, key, 'private', privateInjector];\r\n        });\r\n      } else {\r\n        Object.keys(module).forEach(function(name) {\r\n          if (module[name][2] === 'private') {\r\n            providers[name] = module[name];\r\n            return;\r\n          }\r\n\r\n          var type = module[name][0];\r\n          var value = module[name][1];\r\n\r\n          providers[name] = [factoryMap[type], arrayUnwrap(type, value), type];\r\n        });\r\n      }\r\n    }\r\n  });\r\n\r\n  // public API\r\n  this.get = get;\r\n  this.invoke = invoke;\r\n  this.instantiate = instantiate;\r\n  this.createChild = createChild;\r\n};\r\n\r\nmodule.exports = Injector;\r\n\n},{\"./annotation\":70,\"./module\":73}],73:[function(_dereq_,module,exports){\nvar Module = function() {\r\n  var providers = [];\r\n\r\n  this.factory = function(name, factory) {\r\n    providers.push([name, 'factory', factory]);\r\n    return this;\r\n  };\r\n\r\n  this.value = function(name, value) {\r\n    providers.push([name, 'value', value]);\r\n    return this;\r\n  };\r\n\r\n  this.type = function(name, type) {\r\n    providers.push([name, 'type', type]);\r\n    return this;\r\n  };\r\n\r\n  this.forEach = function(iterator) {\r\n    providers.forEach(iterator);\r\n  };\r\n};\r\n\r\nmodule.exports = Module;\r\n\n},{}],74:[function(_dereq_,module,exports){\nmodule.exports = _dereq_('./lib/refs');\r\n\r\nmodule.exports.Collection = _dereq_('./lib/collection');\n},{\"./lib/collection\":75,\"./lib/refs\":76}],75:[function(_dereq_,module,exports){\n'use strict';\r\n\r\n/**\r\n * An empty collection stub. Use {@link RefsCollection.extend} to extend a\r\n * collection with ref semantics.\r\n *\r\n * @classdesc A change and inverse-reference aware collection with set semantics.\r\n *\r\n * @class RefsCollection\r\n */\r\nfunction RefsCollection() { }\r\n\r\n/**\r\n * Extends a collection with {@link Refs} aware methods\r\n *\r\n * @memberof RefsCollection\r\n * @static\r\n *\r\n * @param  {Array<Object>} collection\r\n * @param  {Refs} refs instance\r\n * @param  {Object} property represented by the collection\r\n * @param  {Object} target object the collection is attached to\r\n *\r\n * @return {RefsCollection<Object>} the extended array\r\n */\r\nfunction extend(collection, refs, property, target) {\r\n\r\n  var inverseProperty = property.inverse;\r\n\r\n  /**\r\n   * Removes the given element from the array and returns it.\r\n   *\r\n   * @method RefsCollection#remove\r\n   *\r\n   * @param {Object} element the element to remove\r\n   */\r\n  collection.remove = function(element) {\r\n    var idx = this.indexOf(element);\r\n    if (idx !== -1) {\r\n      this.splice(idx, 1);\r\n\r\n      // unset inverse\r\n      refs.unset(element, inverseProperty, target);\r\n    }\r\n\r\n    return element;\r\n  };\r\n\r\n  /**\r\n   * Returns true if the collection contains the given element\r\n   *\r\n   * @method RefsCollection#contains\r\n   *\r\n   * @param {Object} element the element to check for\r\n   */\r\n  collection.contains = function(element) {\r\n    return this.indexOf(element) !== -1;\r\n  };\r\n\r\n  /**\r\n   * Adds an element to the array, unless it exists already (set semantics).\r\n   *\r\n   * @method RefsCollection#add\r\n   *\r\n   * @param {Object} element the element to add\r\n   */\r\n  collection.add = function(element) {\r\n\r\n    if (!this.contains(element)) {\r\n      this.push(element);\r\n\r\n      // set inverse\r\n      refs.set(element, inverseProperty, target);\r\n    }\r\n  };\r\n\r\n  return collection;\r\n}\r\n\r\n\r\nmodule.exports.extend = extend;\n},{}],76:[function(_dereq_,module,exports){\n'use strict';\r\n\r\nvar Collection = _dereq_('./collection');\r\n\r\nfunction hasOwnProperty(e, property) {\r\n  return Object.prototype.hasOwnProperty.call(e, property.name || property);\r\n}\r\n\r\n\r\nfunction defineCollectionProperty(ref, property, target) {\r\n  Object.defineProperty(target, property.name, {\r\n    enumerable: property.enumerable,\r\n    value: Collection.extend(target[property.name] || [], ref, property, target)\r\n  });\r\n}\r\n\r\n\r\nfunction defineProperty(ref, property, target) {\r\n\r\n  var inverseProperty = property.inverse;\r\n\r\n  var _value = target[property.name];\r\n\r\n  Object.defineProperty(target, property.name, {\r\n    enumerable: property.enumerable,\r\n\r\n    get: function() {\r\n      return _value;\r\n    },\r\n\r\n    set: function(value) {\r\n\r\n      // return if we already performed all changes\r\n      if (value === _value) {\r\n        return;\r\n      }\r\n\r\n      var old = _value;\r\n\r\n      // temporary set null\r\n      _value = null;\r\n\r\n      if (old) {\r\n        ref.unset(old, inverseProperty, target);\r\n      }\r\n\r\n      // set new value\r\n      _value = value;\r\n\r\n      // set inverse value\r\n      ref.set(_value, inverseProperty, target);\r\n    }\r\n  });\r\n\r\n}\r\n\r\n/**\r\n * Creates a new references object defining two inversly related\r\n * attribute descriptors a and b.\r\n *\r\n * <p>\r\n *   When bound to an object using {@link Refs#bind} the references\r\n *   get activated and ensure that add and remove operations are applied\r\n *   reversely, too.\r\n * </p>\r\n *\r\n * <p>\r\n *   For attributes represented as collections {@link Refs} provides the\r\n *   {@link RefsCollection#add}, {@link RefsCollection#remove} and {@link RefsCollection#contains} extensions\r\n *   that must be used to properly hook into the inverse change mechanism.\r\n * </p>\r\n *\r\n * @class Refs\r\n *\r\n * @classdesc A bi-directional reference between two attributes.\r\n *\r\n * @param {Refs.AttributeDescriptor} a property descriptor\r\n * @param {Refs.AttributeDescriptor} b property descriptor\r\n *\r\n * @example\r\n *\r\n * var refs = Refs({ name: 'wheels', collection: true, enumerable: true }, { name: 'car' });\r\n *\r\n * var car = { name: 'toyota' };\r\n * var wheels = [{ pos: 'front-left' }, { pos: 'front-right' }];\r\n *\r\n * refs.bind(car, 'wheels');\r\n *\r\n * car.wheels // []\r\n * car.wheels.add(wheels[0]);\r\n * car.wheels.add(wheels[1]);\r\n *\r\n * car.wheels // [{ pos: 'front-left' }, { pos: 'front-right' }]\r\n *\r\n * wheels[0].car // { name: 'toyota' };\r\n * car.wheels.remove(wheels[0]);\r\n *\r\n * wheels[0].car // undefined\r\n */\r\nfunction Refs(a, b) {\r\n\r\n  if (!(this instanceof Refs)) {\r\n    return new Refs(a, b);\r\n  }\r\n\r\n  // link\r\n  a.inverse = b;\r\n  b.inverse = a;\r\n\r\n  this.props = {};\r\n  this.props[a.name] = a;\r\n  this.props[b.name] = b;\r\n}\r\n\r\n/**\r\n * Binds one side of a bi-directional reference to a\r\n * target object.\r\n *\r\n * @memberOf Refs\r\n *\r\n * @param  {Object} target\r\n * @param  {String} property\r\n */\r\nRefs.prototype.bind = function(target, property) {\r\n  if (typeof property === 'string') {\r\n    if (!this.props[property]) {\r\n      throw new Error('no property <' + property + '> in ref');\r\n    }\r\n    property = this.props[property];\r\n  }\r\n\r\n  if (property.collection) {\r\n    defineCollectionProperty(this, property, target);\r\n  } else {\r\n    defineProperty(this, property, target);\r\n  }\r\n};\r\n\r\nRefs.prototype.ensureBound = function(target, property) {\r\n  if (!hasOwnProperty(target, property)) {\r\n    this.bind(target, property);\r\n  }\r\n};\r\n\r\nRefs.prototype.unset = function(target, property, value) {\r\n\r\n  if (target) {\r\n    this.ensureBound(target, property);\r\n\r\n    if (property.collection) {\r\n      target[property.name].remove(value);\r\n    } else {\r\n      target[property.name] = undefined;\r\n    }\r\n  }\r\n};\r\n\r\nRefs.prototype.set = function(target, property, value) {\r\n\r\n  if (target) {\r\n    this.ensureBound(target, property);\r\n\r\n    if (property.collection) {\r\n      target[property.name].add(value);\r\n    } else {\r\n      target[property.name] = value;\r\n    }\r\n  }\r\n};\r\n\r\nmodule.exports = Refs;\r\n\r\n\r\n/**\r\n * An attribute descriptor to be used specify an attribute in a {@link Refs} instance\r\n *\r\n * @typedef {Object} Refs.AttributeDescriptor\r\n * @property {String} name\r\n * @property {boolean} [collection=false]\r\n * @property {boolean} [enumerable=false]\r\n */\n},{\"./collection\":75}],77:[function(_dereq_,module,exports){\nmodule.exports=_dereq_(74)\n},{\"./lib/collection\":78,\"./lib/refs\":79}],78:[function(_dereq_,module,exports){\nmodule.exports=_dereq_(75)\n},{}],79:[function(_dereq_,module,exports){\nmodule.exports=_dereq_(76)\n},{\"./collection\":78}]},{},[1])\n(1)\n});"]}